
<!doctype html>
<html>
	<head>
		<meta charset="utf-8">

		<!-- Don't cache! -->
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0">

		<title>Amalgamation of Render Results - mmt-pygments-lexer</title>
	</head>
	<body>
		<h1>Amalgamation of Render Results</h1>
<style>pre { line-height: 125%; margin: 0; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #ffffcc }
.c { color: #408080; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.-MMT_DD { color: #D3D3D3 } /* MMT_DD */
.-MMT_MD { color: #D3D3D3 } /* MMT_MD */
.-MMT_OD { color: #D3D3D3 } /* MMT_OD */
.o { color: #666666 } /* Operator */
.ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cp { color: #BC7A00 } /* Comment.Preproc */
.cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #408080; font-style: italic } /* Comment.Single */
.cs { color: #408080; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.gr { color: #FF0000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #00A000 } /* Generic.Inserted */
.go { color: #888888 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #7D9029 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #999999; font-weight: bold } /* Name.Entity */
.ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #A0A000 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #BB6688 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/Context-Graph</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Basic example of a Dung abstract argumentation framework interpreting theories as arguments and views as attacks âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">a</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">a_attacks_b</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?a</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?b</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">b_attacks_a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?b</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?a</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// view c_attacks_a : ?c â†’ ?a =</span>

<span class="cm">âš</span><span class="w"></span>

<span class="cm">// Doing Semantics: For semantics, one would have to teach MMT to compute the different semantics </span>
<span class="cm">based on the views between theories. Alternativey, this could be done in the graph viewer.âš</span><span class="w"></span>

<span class="cm">// A larger example: âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">C</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">D</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">E</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">F</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">G</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">A_attacks_B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?A</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?B</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">B_attacks_A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?B</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?A</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">G_attacks_F</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?G</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?F</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">E_attacks_F</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?E</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?F</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">view</span><span class="w"> </span><span class="nc">F_attacks_D</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?F</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?D</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">D_attacks_C</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?D</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?C</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">C_attacks_A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?C</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?A</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">C_attacks_B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?C</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?B</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="cm">/T A little bit more. First a metatheory: âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TrueFalse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">true</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="ss">T</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="ss">F</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">bot</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¥</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">impl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">implies</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">and</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">and</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">ded</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (T and F implies âŠ¥) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>



<span class="kd">theory</span><span class="w"> </span><span class="nc">TND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">neg</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">impl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">implies</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">ded</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ded</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">bot</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¥</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">LEM1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded {A:prop}(A implies (neg (neg A))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">LEM2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded {A:prop}(neg (neg A) implies A) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="cm">/T Now the contentious propositions:âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">props</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">fact1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">fact2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">one</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TrueFalse </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">True</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">two</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TrueFalse </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">False</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ F </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">view</span><span class="w"> </span><span class="nc">one_attacks_two</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?one</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?two</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TrueFalse = ?TrueFalse </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T True = False</span>

<span class="cm">	</span>
<span class="cm">	/T The following line characterises the attack: one and two disagree allow to prove contradicting statements. Hence one attacks two on fact1 (or vice versa: these semantics for attack don&#39;t tell us enough yet to determine the correct direction of the arrow). Allowing a view to have this could e.g. involve a replacement of &quot;=&quot; by some contradiction operator. Note also the different between finding a view that yields a contradiction and proving that no non-contradictory view /theory-morphism is possible between the two theories.â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T supports_fact1 = attacks_fact1 â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Another semantics for attack based on includes, views and conflict theoriesâš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">common_ground</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">X</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Y</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">conflict</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">C</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">A</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded C </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">B</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded (C implies âŠ¥) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>



<span class="kd">theory</span><span class="w"> </span><span class="nc">three</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">X</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Y</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">ass1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded X </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">ass2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded (X implies Â¬Y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">four</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Y</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">ass3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded Y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">oneandthree</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?three </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?four </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">three_attacks_four</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?conflict</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?oneandthree</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND = ?TND </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">C</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">X </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T A = ass1 â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T B = ded X implies âŠ¥ â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">A</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ass1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/JLogic/Context_Graph</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">found</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ABA</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">found:?NaturalDeduction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="vc">assumption</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|~</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">aid</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} |~ X âŸ¶ âŠ¦ X </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">aid</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Contrary</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ABA</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">contrary</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">not</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">con</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Convenience</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ABA</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Contrary </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="cm">/T some derivable rules for convenience:â™</span><span class="w"></span>
<span class="vc">or_elim</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} âŠ¦ (A âˆ¨ B) âŸ¶ (âŠ¦ A âŸ¶ âŠ¦ C) âŸ¶ (âŠ¦ B âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orel</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">double_negation_introduction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ A âŸ¶ âŠ¦ (Â¬ Â¬ A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">NI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">quantifier_exchange</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:ğ’° 100, B: A âŸ¶ prop} (âŠ¦ Â¬ âˆƒ [x:A] B x) âŸ¶ (âŠ¦ âˆ€ [x:A] Â¬ B x) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">exch</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?Convenience</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Arg1</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">a1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ Â¬ use Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Arg2</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">a2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ Â¬ âˆƒ[x] x better Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Kernel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">w</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Assumption</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kernel </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">con1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ w </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Defeater</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kernel </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">con2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ con w </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Î´</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Kernel</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">w</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Â¬ use Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Ï†</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Assumption</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Arg1</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Î´</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">con1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Ïˆ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Defeater</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Arg2</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Î´</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">con2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NI (MP ax1 (aid a2)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/JLogic/Context_Graph</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">found</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?Convenience</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ordinary_Premise</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">op</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ Â¬ too_complicated Meta_Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Too_Complicated_Cond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">comp</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">comp_ax</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ met comp  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Too_Complicated_Rule</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Cond </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">too_complicated_proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated comp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">too_complicated_rule</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ met comp â‡’ too_complicated_proposition</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">too_complicated_arg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ too_complicated_proposition </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">MP (aid too_complicated_rule) comp_ax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">its_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Cond</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">comp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meta_Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">comp_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ax2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Too_Complicated_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">too_complicated_app</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ met Meta_Tweety_example â‡’ too_complicated Meta_Tweety_example</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">too_complicated_met</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ too_complicated Meta_Tweety_example </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">MP (aid too_complicated_app) ax2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">met_is_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Rule</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?its_complicated</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">too_complicated_rule</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated_app </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">too_complicated_arg</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated_met </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Prop_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Proposition</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated Meta_Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Pro_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Pro</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Prop_complicated </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">pro</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated_met </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Con_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Con</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Ordinary_Premise</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Prop_complicated </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">con</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Meta_is_Better_Cond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">ex1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">ex2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">cond_normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ standard ex2 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">cond_met</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ met ex1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Meta_is_Better_Rule</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Meta_is_Better_Cond </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">better_proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ex1 better ex2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">better_rule</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ met ex1 âˆ§ standard ex2 â‡’ better_proposition</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">better_arg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ better_proposition </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">MP (aid better_rule) and_introduction cond_met cond_normal </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">its_better</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Meta_is_Better_Cond</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Ordinary_Premise</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">ex1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meta_Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">ex2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">cond_met</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ax2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">cond_normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ax3 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Meta_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ordinary_Premise </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">met_Tweety_better_proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meta_Tweety_example better Tweety_example</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">met_Tweety_better_rule</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ met Meta_Tweety_example âˆ§ standard Tweety_example â‡’ met_Tweety_better_proposition</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">better_arg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ met_Tweety_better_proposition </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">MP (aid met_Tweety_better_rule) and_introduction ax2 ax3 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Dont_Use_Tweety_Example</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Meta_Pushout </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">no_Tweety</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ Â¬ use Tweety_example</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">conservatively_Dont_Use_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Dont_Use_Tweety_Example</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Meta_Pushout</span><span class="w">  </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Meta_Pushout </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">no_Tweety</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">MP ax4 (existsI better_arg)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Default_Cond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">Prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Default_Rule</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Default_Cond </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">default_proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">default</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ Â¬ default_proposition </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Default_App_Knowledge_Base</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Default_Cond</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">Prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âˆƒ[x] x better Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Def_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">Def_better</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ Â¬ âˆƒ[x] x better Tweety_example</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Pushout_Along_Default_App</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Default_Rule</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Def_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Default_App_Knowledge_Base </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Def_better </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Use_Tweety</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Def_Pushout </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ use Tweety_example</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">conservatively_Use_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Use_Tweety</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Def_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Def_Pushout </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">Tweety</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">MP ax1 (aid Def_better)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">undercut1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Kernel</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">w</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">met Meta_Tweety_example âˆ§ standard Tweety_example â‡’ Meta_Tweety_example better Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">undercut2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Assumption</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Meta_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?undercut1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">con1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">met_Tweety_better_rule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">undercut3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Defeater</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Def_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?undercut1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">con2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">not_introduction [x](fals_introduction (MP x (and_introduction ax2 ax3)) forallE (exch aid Def_better) Meta_Tweety_example) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/Context-Graph</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">found</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T How about a first-order-metatheory?âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">background_knowledge</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">found:?Logic </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">found:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">human</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">black</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">fetus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">has_rights</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_born</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_conceived</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_black</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_caucasian</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">def_fetus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ is_conceived fetus âˆ§ Â¬ is_born fetus </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">def_black</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ is_conceived black âˆ§ Â¬ is_caucasian black </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// theory attack =</span>
<span class="cm">	tag â™</span>
<span class="cm">// âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// person: âŠ¦ âˆ€[x] (is_person x â‡” is_born x âˆ§ is_human x) â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x:human] (is_person x â‡’ is_born x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">                                                   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">constitution_pro_slavery</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// person: âŠ¦ âˆ€[x] is_person x â‡” is_conceived x âˆ§ is_human x âˆ§ Â¬ is_black x â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x:human] (is_person x â‡’ is_caucasian x)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x:human] (is_conceived x â‡’ is_person x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_choice_attacks_constitution_pro_slavery</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_slavery_attacks_constitution_pro_choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_life_attacks_constitution_pro_choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class="cm">/T person = person â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_life_attacks_constitution_pro_slavery</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_slavery_attacks_constitution_pro_life</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_choice_attacks_constitution_pro_life</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">fourteenth_amendment</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ is_person black </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w">	</span>
<span class="w">	</span>
<span class="kd">view</span><span class="w"> </span><span class="nc">fourteenth_amendment_attacks_constitution_pro_slavery</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?fourteenth_amendment</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">legal_common_ground</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">personhood_and_rights</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] Â¬ is_person x â‡’ Â¬ has_rights x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">dredd_scott_v_sanford</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?legal_common_ground </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">blacks_have_no_rights</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦  Â¬ has_rights black </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch </span>
<span class=" -MMT_ObjectExpression">									&quot;				</span>
<span class=" -MMT_ObjectExpression">								  background knowledge.def_black: Blacks are not caucasian. </span>
<span class=" -MMT_ObjectExpression">									constitution_pro_slavery.person: Whoever is not caucasian is not a person to the constitution. </span>
<span class=" -MMT_ObjectExpression">									Hence blacks are not persons to the constitution. </span>
<span class=" -MMT_ObjectExpression">									legal_common_ground.personhood_and_rights: If you&#39;re not a person then you have no rights. </span>
<span class=" -MMT_ObjectExpression">									Ergo blacks have no rights</span>
<span class=" -MMT_ObjectExpression">									&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">dredd_scott_v_sanford_attacks_constitution_pro_life</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">person </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">dredd_scott_v_sanford_attacks_constitution_pro_choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">person </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">fourteenth_amendment_superseds_dredd_scott_v_sanford</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">view</span><span class="w"> </span><span class="nc">fourteenth_amendment_superseds_dredd_scott_v_sanford</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?fourteenth_amendment</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// view constitution_pro_choice_attacks_dredd_scott_v_sanford : ?constitution_pro_choice â†’ ?dredd_scott_v_sanford =</span>
<span class="cm">	include ?background_knowledge = ?background_knowledge â™</span>
<span class="cm">	// tag ?attack â™</span>
<span class="cm">	/T person1 = person1 â™</span>
<span class="cm">	/T person2 = person2 â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">roe_v_wade</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?legal_common_ground </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">fetusses_have_no_rights</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ Â¬ has_rights fetus </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch </span>
<span class=" -MMT_ObjectExpression">									&quot;				</span>
<span class=" -MMT_ObjectExpression">								  background knowledge.def_fetus: fetusses are not born. </span>
<span class=" -MMT_ObjectExpression">									constitution_pro_slavery.person: Whoever is not born is not a person to the constitution. </span>
<span class=" -MMT_ObjectExpression">									Hence fetusses are not persons to the constitution. </span>
<span class=" -MMT_ObjectExpression">									legal_common_ground.personhood_and_rights: If you&#39;re not a person then you have no rights. </span>
<span class=" -MMT_ObjectExpression">									Ergo fetusses have no rights</span>
<span class=" -MMT_ObjectExpression">									&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">view</span><span class="w"> </span><span class="nc">if_not_dredd_scott_v_sanford_then_not_roe_v_wade</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?roe_v_wade</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">black</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">fetus </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">blacks_have_no_rights</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">fetusses_have_no_rights </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person1=person1 â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person2=person2 â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">roe_v_wade_attacks_constitution_pro_life</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?roe_v_wade</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">person </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/JLogic/Context_Graph</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">found</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">found:?NaturalDeduction</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lexicon</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">example</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">Tweety_example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">Meta_Tweety_example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">have</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">use</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">standard</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">better_than</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example âŸ¶ example âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">better</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">met</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">/T should be meta but unfortunately meta is an mmt keyword, hence not usable.â™</span><span class="w"></span>
<span class="vc">too_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ have Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">b</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ have Meta_Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">ax1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (Â¬ âˆƒ[x] x better Tweety_example) â‡’ use Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">ax2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ met Meta_Tweety_example</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">ax3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ standard Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">ax4</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">âŠ¦ (âˆƒ[x] x better Tweety_example) â‡’ Â¬ use Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Use_Tweety</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ use Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Not_Tweety</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">d</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ Â¬ use Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// theory Joint_Inconsistency =</span>
<span class="cm">include ?Use_Tweety â™</span>
<span class="cm">include ?Not_Tweety â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Proposition</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">proposition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Pro</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proposition </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">pro</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ proposition </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Con</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proposition </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">con</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">âŠ¦ Â¬ proposition </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// view Contradiction : ?Conflict_Theory â†’ ?Joint_Inconsistency =</span>
<span class="cm">conflict = fals_introduction c d â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">prop_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Proposition</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Lexicon</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">use Tweety_example </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">pro_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Pro</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Joint_Inconsistency</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?prop_Tweety</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">pro</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">con_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Con</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Joint_Inconsistency</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?prop_Tweety </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="vc">con</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">d </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveSet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveMagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveSet</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveSet/add</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Commutative </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma/add</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveIdempotent</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Idempotent </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma/add</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Semigroup </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma/add</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveCommSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveCommutative</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?CommSemigroup </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveSemigroup/add</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveCommutative/add</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T regular bands and views between them</span>
<span class="cm">mostly following the wikipedia page on Bands</span>

<span class="cm">Notes: </span>
<span class="cm">- some names that were not given on Wikipedia are made up</span>
<span class="cm">- most views do not actually use (all of) the Band properties</span>
<span class="cm">- LeftX and RightX are stronger than X, not weaker</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:/?LF</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Magma</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?EqualityType</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">carrier âŸ¶ carrier âŸ¶ carrier </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semigroup</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} (xâˆ˜y)âˆ˜z = xâˆ˜(yâˆ˜z)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assocR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} xâˆ˜(yâˆ˜z) = (xâˆ˜y)âˆ˜z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] sym assoc</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">assoc4</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{w,x,y,z} ((wâˆ˜x)âˆ˜y)âˆ˜z = wâˆ˜(xâˆ˜(yâˆ˜z))</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[w,x,y,z] trans3 (assoc congT [u]uâˆ˜z) assoc (assoc congT [u]wâˆ˜u)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} wâˆ˜(xâˆ˜(yâˆ˜z)) = ((wâˆ˜x)âˆ˜y)âˆ˜z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z] sym assoc4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} (((vâˆ˜w)âˆ˜x)âˆ˜y)âˆ˜z = vâˆ˜(wâˆ˜(xâˆ˜(yâˆ˜z)))</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z] trans4 (assoc4 congT [u]uâˆ˜z) assoc</span>
<span class=" -MMT_ObjectExpression">                              (assoc congT [u]vâˆ˜u) (assoc congT [u]vâˆ˜(wâˆ˜u))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Commutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} xâˆ˜y = yâˆ˜x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Neutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">e</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">carrier </span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="vc">neutLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} eâˆ˜x = x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} xâˆ˜e = x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Idempotent</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} xâˆ˜x = x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Neutral</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Band</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Idempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BoundedSemilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommMonoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">regular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} zâˆ˜xâˆ˜zâˆ˜yâˆ˜z = zâˆ˜xâˆ˜yâˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} zâˆ˜xâˆ˜zâˆ˜y = zâˆ˜xâˆ˜y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,z} zâˆ˜xâˆ˜z = zâˆ˜x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} xâˆ˜zâˆ˜yâˆ˜z = xâˆ˜yâˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{y,z} zâˆ˜yâˆ˜z = yâˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T views for the three stages of regular band theories âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftregular1 congT [u]uâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2LeftRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftregular congT [u]uâˆ˜y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc5 ((trans3 assoc4R rightregular1 assoc) congT [u]zâˆ˜u) assoc4R</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2RightRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc4 ((trans assocR rightregular) congT [u] xâˆ˜u) assocR</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T normal bands âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">normal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} zâˆ˜(xâˆ˜y)âˆ˜z = zâˆ˜(yâˆ˜x)âˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} zâˆ˜(xâˆ˜y) = zâˆ˜(yâˆ˜x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} (xâˆ˜y)âˆ˜z = (yâˆ˜x)âˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T views for the diamond of normal band theories (with semilattices at the bottom) âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftnormal congT [u]uâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc (rightnormal congT [u]zâˆ˜u) assocR</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">RightCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] comm congT [u]zâˆ˜u</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] comm congT [u]uâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T views from regular to normal band theories âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// zxzy = zxzyzxzy = zx yz zxzy = zxy zx zy = zxy xz zy = zxy zxy = zxyâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (sym idempotent) _ idempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftRegular2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,z] trans4 assoc leftnormal assocR (idempotent congT [u]uâˆ˜x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// xzyz = xzyz xzyz = x yz zxzyz = xy zxzyz = xyz zx yz = xyz xyz = xyzâ™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (sym idempotent) _ idempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightRegular2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[y,z] trans3 rightnormal assoc (idempotent congT [u]yâˆ˜u)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T rectangular bands (the axioms here already imply idempotency)âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rectangular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} xâˆ˜yâˆ˜x = x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// provable â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangularAny</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} xâˆ˜yâˆ˜z = xâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftZero</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftsingular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} xâˆ˜y = x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightZero</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightsingular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} xâˆ˜y = y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T regular bands and views between them</span>
<span class="cm">mostly following the wikipedia page on Bands</span>

<span class="cm">Notes: </span>
<span class="cm">- some names that were not given on Wikipedia are made up</span>
<span class="cm">- most views do not actually use (all of) the Band properties</span>
<span class="cm">- LeftX and RightX are stronger than X, not weaker</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">regular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ zâˆ˜xâˆ˜zâˆ˜yâˆ˜z â‰ zâˆ˜xâˆ˜yâˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ zâˆ˜xâˆ˜zâˆ˜y â‰ zâˆ˜xâˆ˜y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,z} âŠ¦ zâˆ˜xâˆ˜z â‰ zâˆ˜x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ xâˆ˜zâˆ˜yâˆ˜z â‰ xâˆ˜yâˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{y,z} âŠ¦ zâˆ˜yâˆ˜z â‰ yâˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T views for the three stages of regular band theories âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftregular1 congT [u]uâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2LeftRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftregular congT [u]uâˆ˜y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc5 ((trans3 assoc4R rightregular1 assoc) congT [u]zâˆ˜u) assoc4R</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2RightRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc4 ((assocR trans rightregular) congT [u] xâˆ˜u) assocR</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T normal bands âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">normal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ zâˆ˜(xâˆ˜y)âˆ˜z â‰ zâˆ˜(yâˆ˜x)âˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ zâˆ˜(xâˆ˜y) â‰ zâˆ˜(yâˆ˜x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ (xâˆ˜y)âˆ˜z â‰ (yâˆ˜x)âˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T views for the diamond of normal band theories (with semilattices at the bottom) âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftnormal congT [u]uâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc (rightnormal congT [u]zâˆ˜u) assocR</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">RightCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] comm congT [u]zâˆ˜u</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] comm congT [u]uâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T views from regular to normal band theories âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// zxzy = zxzyzxzy = zx yz zxzy = zxy zx zy = zxy xz zy = zxy zxy = zxyâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (idem sym) _ idem</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftRegular2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,z] trans4 assoc leftnormal assocR (idem congT [u]uâˆ˜x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// xzyz = xzyz xzyz = x yz zxzyz = xy zxzyz = xyz zx yz = xyz xyz = xyzâ™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (idem sym) _ idem</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightRegular2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[y,z] trans3 rightnormal assoc (idem congT [u]yâˆ˜u)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T rectangular bands (the axioms here already imply idempotency)âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rectangular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ xâˆ˜yâˆ˜x â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// provable â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangularAny</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ xâˆ˜yâˆ˜z â‰ xâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftZero</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftzero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ xâˆ˜y â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightZero</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightzero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ xâˆ˜y â‰ y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">powertypes?PowerSFOL</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneratedSets</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">generated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?ClosureOperator </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">X</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">closure</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¨</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŸ©</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneratedMagmas</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GeneratedSets</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure_op</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} âŠ¦ âˆ€[x]âˆ€[y] xâˆˆâŸ¨SâŸ© â‡’ yâˆˆâŸ¨SâŸ© â‡’ (xâˆ˜y)âˆˆâŸ¨SâŸ©</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneratedPointed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Pointed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GeneratedMagmas</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure_elem</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} âŠ¦ eâˆˆâŸ¨SâŸ©</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneratedInverseFun</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InverseFun</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GeneratedPointed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure_inv</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} âŠ¦ âˆ€[x] xâˆˆâŸ¨SâŸ© â‡’ xâ»âˆˆâŸ¨SâŸ©</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQ</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Quasigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">div_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] âˆ€[y] âˆƒ[a] (aâˆ˜x â‰ y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">div_right</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] âˆ€[y] âˆƒ[b] (xâˆ˜b â‰ y) </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Loop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Quasigroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InverseOperator</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â»</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_weak_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] xâˆ˜yâˆ˜x â‰ x âˆ§ yâˆ˜xâˆ˜y â‰ y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T weaker variant of unique inverse element, formulated without neutral element</span>
<span class="cm">   usually union of X and WeakInverse usually called InverseX in the literatureâš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">WeakInverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InverseOperator</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">weak_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] is_weak_inverse x (xâ»)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InverseFun</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InverseOperator</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">inverseLeft</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] xâ»âˆ˜x â‰ e</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverseRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] xâˆ˜xâ» â‰ e</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y]xâˆ˜yâ»</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">invL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ xâ»âˆ˜xâ‰e</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] inverseLeft forallE x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">invR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ xâˆ˜xâ»â‰e</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] inverseRight forallE x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inverse_inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ inverse x (xâ»)</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] andI invR invL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inv_unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ eâ»â‰e</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">inverse_unique inverse_inv inverse_neutral</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inv_op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ (xâˆ˜y)â» â‰ yâ»âˆ˜xâ»</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] inverse_unique inverse_inv (inverse_op inverse_inv inverse_inv)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InverseExistence</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverseLeft</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆƒ[i] iâˆ˜x â‰ e </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverseRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆƒ[i] xâˆ˜i â‰ e </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Group</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InverseFun </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommGroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommMonoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GroupHom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MagmaHom </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">domain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Group </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">domain/U </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">codoamin</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Group </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">codomain/U </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="cm">// e: âŠ¦ U domain/e â‰ codomain/e â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Magma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">divisibility</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Relation </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,z] âˆƒ[y]xâˆ˜yâ‰z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MagmaHom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetHom </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">domain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetHom/domain</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">codomain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetHom/codomain</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y] U (x domain/âˆ˜ y) â‰ U x codomain/âˆ˜ U y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubMagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubSet</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">parent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubSet/parent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y] U x â‡’ U y â‡’ U (x parent/âˆ˜ y)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Commutative</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y] xâˆ˜y â‰ yâˆ˜x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ xâˆ˜y â‰ yâˆ˜x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] comm_ax forallE x forallE y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">OppositeMagma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, y] y âˆ˜ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Idempotent</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idem_ax</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] xâˆ˜x â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ xâˆ˜xâ‰x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] idem_ax forallE x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">OppositeCommMagma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OppositeMagma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">comm_ax </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerAssociative</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">power_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] (xâˆ˜x)âˆ˜x â‰ xâˆ˜(xâˆ˜x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y]âˆ€[z] (xâˆ˜y)âˆ˜z â‰ xâˆ˜(yâˆ˜z)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ (xâˆ˜y)âˆ˜z â‰ xâˆ˜(yâˆ˜z)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] assoc_ax forallE x forallE y forallE z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assocR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ xâˆ˜(yâˆ˜z) â‰ (xâˆ˜y)âˆ˜z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] assoc sym</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{w,x,y,z} âŠ¦ ((wâˆ˜x)âˆ˜y)âˆ˜z â‰ wâˆ˜(xâˆ˜(yâˆ˜z))</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[w,x,y,z] trans3 (assoc congT [u]uâˆ˜z) assoc (assoc congT [u]wâˆ˜u)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} âŠ¦ wâˆ˜(xâˆ˜(yâˆ˜z)) â‰ ((wâˆ˜x)âˆ˜y)âˆ˜z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z] assoc4 sym</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} âŠ¦ (((vâˆ˜w)âˆ˜x)âˆ˜y)âˆ˜z â‰ vâˆ˜(wâˆ˜(xâˆ˜(yâˆ˜z)))</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z] trans4 (assoc4 congT [u]uâˆ˜z) assoc</span>
<span class=" -MMT_ObjectExpression">                             (assoc congT [u]vâˆ˜u) (assoc congT [u]vâˆ˜(wâˆ˜u))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?PowerAssociative</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">power_assoc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">forallI [x] assoc</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">//  total structure divisibility : ?Transitivity =</span>
<span class="cm">    include ?Magma/divisibilityâ™</span><span class="w"></span>
<span class="cm">//    metarel/trans = [x,y,z,p,q] p existsE [xy,xyP] q existsE [yz,yzP]</span>
<span class="cm">      existsI (xy âˆ˜ yz) trans3 assocR (xyP congT [u]uâˆ˜yz) yzPâ™</span><span class="w"></span>
<span class="cm">//  âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">OppositeSemigroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OppositeMagma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">assoc_ax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Commutative </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Band</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Idempotent </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommIdempotent</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Idempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommIdempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Pointed</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">elem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UnitElement</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">unitelem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Pointed </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">elem</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">involution</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] xâˆ˜xâ‰e</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightUnital</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UnitElement</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutralR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] xâˆ˜e â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ xâˆ˜eâ‰x</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] neutralR forallE x</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftUnital</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UnitElement</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutralL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] eâˆ˜x â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutL</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ eâˆ˜xâ‰x</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] neutralL forallE x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Unital</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftUnital </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RightUnital </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AbsorbingElement</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">absorbingelem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Pointed </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">elem</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">abs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightAbsorptive</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AbsorbingElement</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">absorbR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] xâˆ˜abs â‰ abs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">absR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ xâˆ˜abs â‰ abs</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] absorbR forallE x</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftAbsorptive</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AbsorbingElement</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">absorbL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] absâˆ˜x â‰ abs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">absL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ absâˆ˜x â‰ abs</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] absorbL forallE x</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Absorptive</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftAbsorptive</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RightAbsorptive</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FirstNonNeutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">firstNonNeutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] xâ‰ e â‡’ âˆ€[y]xâˆ˜yâ‰x</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="cm">// realize ?Monoidâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LastNonNeutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lastNonNeutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] xâ‰ e â‡’ âˆ€[y]xâˆ˜yâ‰x</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="cm">// realize ?Monoidâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Powers</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerAssociative</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?Nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">power</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ â„• âŸ¶ U</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">power_zero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ x^0 â‰ e</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">power_succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,n} âŠ¦ x^(n&#39;) â‰ x^nâˆ˜x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,xËˆ] xâˆ˜xËˆâ‰e âˆ§ xËˆâˆ˜xâ‰e</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">inverse</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">inverse_sym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,xËˆ} âŠ¦ inverse x xËˆ âŸ¶ âŠ¦ inverse xËˆ x</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,xËˆ,p] andI (p andEr) (p andEl)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverse_unique</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,x1,x2} âŠ¦ inverse x x1 âŸ¶ âŠ¦ inverse x x2 âŸ¶ âŠ¦ x1â‰x2</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,x1,x2,p,q] trans3</span>
<span class=" -MMT_ObjectExpression">                   ((neutR sym) trans (q andEl sym congT [u]x1âˆ˜u))</span>
<span class=" -MMT_ObjectExpression">                   assocR</span>
<span class=" -MMT_ObjectExpression">                   ((p andEr congT [u]uâˆ˜x2) trans neutL)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">inverse_neutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ inverse e e</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">andI neutL neutL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverse_op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,xËˆ,yËˆ} âŠ¦ inverse x xËˆ âŸ¶ âŠ¦ inverse y yËˆ âŸ¶ âŠ¦ inverse (xâˆ˜y) (yËˆâˆ˜xËˆ)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">             </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,xËˆ,yËˆ,p,q] andI</span>
<span class=" -MMT_ObjectExpression">             (trans3 assoc ((trans3 assocR (q andEl congT [u]uâˆ˜xËˆ) neutL) congT [u]xâˆ˜u) (p andEl))</span>
<span class=" -MMT_ObjectExpression">             (trans3 assoc ((trans3 assocR (p andEr congT [u]uâˆ˜y) neutL) congT [u]yËˆâˆ˜u) (q andEr))</span>
<span class=" -MMT_ObjectExpression">             </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">involution_inverse</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ involution x â‡” inverse x x</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">             </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] equivI ([p] andI p p) ([p] p andEl)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Involutory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">involutory</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ involution x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inverse_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ inverse x x</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] involution_inverse equivEl involutory</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverse_ident</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ inverse x y âŸ¶ âŠ¦ xâ‰y</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p] inverse_unique inverse_refl p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IdempotentMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BoundedSemilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semilattice </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommMonoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/powertypes?PowerSFOL</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftModule</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">left_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Ring </span><span class="p">=</span><span class="w"></span>
<span class="w">	  </span><span class="vc">U</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">S</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="vc">left_scalar_mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">S âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ—</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">left_identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[a:U] one âˆ— a â‰ a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">left_distrib_ring</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[r: S] âˆ€[s: S] âˆ€[a : U] (r + s) âˆ— a â‰ add (r âˆ— a) (s âˆ— a) </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">left_distrib_module</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[r: S] âˆ€[a: U] âˆ€[b: U] r âˆ— (add a b) â‰ add (r âˆ— a) (r âˆ— b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">left_assoc_ring</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[r: S] âˆ€[s: S] âˆ€[a: U] r âˆ— (s âˆ— a) â‰ (r â‹… s) âˆ— a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightModule</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">right_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Ring </span><span class="p">=</span><span class="w"></span>
<span class="w">	  </span><span class="vc">U</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">S</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="vc">right_scalar_mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ S âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ—</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">right_identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[a:U] a âˆ— one â‰ a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">right_distrib_ring</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[r: S] âˆ€[s: S] âˆ€[a : U] a âˆ— (r + s) â‰ add (a âˆ— r) (a âˆ— s) </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">right_distrib_module</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[r: S] âˆ€[a: U] âˆ€[b: U] (add a b) âˆ— r â‰ add (a âˆ— r) (b âˆ— r) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">right_assoc_ring</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[r: S] âˆ€[s: S] âˆ€[a: U] (a âˆ— s) âˆ— r â‰ a âˆ— (s â‹… r) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BiModule</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftModule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RightModule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">VectorSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftModule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?DivisionRing </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftModule/left_scalars </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Relation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">metarel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?Relation </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] âŠ¦ x $ y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Reflexivity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">metarel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?Reflexivity </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation/metarel</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symmetry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">metarel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?Symmetry </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation/metarel</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Transitivity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">metarel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?Transitivity </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation/metarel</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Preorder</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Reflexivity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Transitivity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceRelation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Preorder</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symmetry</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AntiSymmetry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ x$y âŸ¶ âŠ¦ y$x âŸ¶ âŠ¦ xâ‰y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Order</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Preorder</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AntiSymmetry</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQ</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BiMagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ringoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMagma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">left_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[r]âˆ€[x]âˆ€[y] râ‹…(x+y) â‰ râ‹…x + râ‹…y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">right_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[r]âˆ€[x]âˆ€[y] (x+y)â‹…r â‰ xâ‹…r + yâ‹…r </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommRingoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ringoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?CommSemigroup </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMagma/mult </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MonoidalRingoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ringoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Monoid </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMagma?add</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">elem</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">zero</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BiMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MonoidalRingoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Monoid </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMagma?mult</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">elem</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">one</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NonZeroInvertible</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">multinverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] Â¬xâ‰zero â‡’ âˆƒ[y] mult/inverse x y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NoZeroDividers</span><span class="w"> </span><span class="p">=</span><span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">no_zero_div</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y] (xâ‹…y â‰ zero) â‡’ ((x â‰ zero) âˆ¨ (y â‰ zero)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NonTrivial</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neq01</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ Â¬(zero â‰ one)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semiring</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?CommMonoid </span><span class="p">=</span><span class="w">                                                                   </span>
<span class="w">	  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MonoidalRingoid/add </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommSemiring</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semiring </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRingoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NearRing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Group </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MonoidalRingoid/add </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">inv</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">45</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">div</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommNearRing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NearRing </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRingoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ring</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NearRing</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realize ?Semiringâ™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?CommGroup </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NearRing/add </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BooleanRing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?IdempotentMonoid </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid/mult</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommRing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRingoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntegralDomain</span><span class="w"> </span><span class="p">=</span><span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRing </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NoZeroDividers</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SkewField</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NonZeroInvertible</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NonTrivial</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Field</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SkewField </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRingoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BilinearRingoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ringoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bilinear</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y]âˆ€[z] (f (x+y) z) â‰ (f x z) + (f y z) âˆ§ (f x (y+z)) â‰ (f x y) + (f y z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">homogen</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[r]âˆ€[x]âˆ€[y] f (râ‹…x) y â‰ râ‹… (f x y) âˆ§ f x (râ‹…y) â‰ râ‹…(f x y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LieRing</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BilinearRingoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">bracket</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">f </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¨</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="si">2</span><span class="w"> </span><span class="ss">âŸ©</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">bracket_defn</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y] âŸ¨x yâŸ© â‰ xâ‹…y - yâ‹…x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">jacobi</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y]âˆ€[z] âŸ¨x âŸ¨y zâŸ©âŸ© + âŸ¨y âŸ¨z xâŸ©âŸ© + âŸ¨z âŸ¨x yâŸ©âŸ© â‰ zero </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">alternating</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x] âŸ¨x xâŸ© â‰ zero </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Set</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm universe</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetHom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kd">structure</span><span class="w"> </span><span class="nc">domain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Set</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span><span class="kd">structure</span><span class="w"> </span><span class="nc">codomain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Set</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span><span class="vc">U</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">domain/U âŸ¶ codomain/U </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubSet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">parent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Set </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">P âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PropositionsAsTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TypesAsPropositionsAs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Propositions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Proofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inconsistent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} âŠ¦ a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â†¯</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inconsistentE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">inconsistent âŸ¶ {a} âŠ¦ a</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,a] p a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">inconE</span><span class="w"> </span><span class="si">%I2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Terms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">term</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Types</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Kinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">kd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">of</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ tp âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â¦‚</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KindedTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kinds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kd âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">tf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tpk</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kd</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tf tpk</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UntypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">         </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalPropositions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalPropositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">of</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">in</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">typesAsPredicates</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SoftTypedTerms </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">of</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,A] A X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EqualityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ x â‰ x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congP</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ x â‰ y âŸ¶ {P: term âŸ¶ prop} âŠ¦ P x âŸ¶ âŠ¦ P y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">congP</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EquivalenceCongruence </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] âŠ¦ xâ‰y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">refl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">sym</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p] p congP ([u]uâ‰x) refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z,p,q] q congP ([u]xâ‰u) p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">congT</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p,T] p congP ([u] T x â‰ T u) refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedEqualityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EqualityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedEqualityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x: tm A} âŠ¦ x â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congP</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,  x,y} âŠ¦ x â‰ y âŸ¶ {P: tm A âŸ¶ prop} âŠ¦ P x âŸ¶ âŠ¦ P y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">congP</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,x,y} âŠ¦ x â‰ y âŸ¶ {T: tm A âŸ¶ tm B} âŠ¦ T x  â‰  T y </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,x,y,p,T] p congP ([u] T x â‰ T u) refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">sym</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, x,y: tm A} âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">sym</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,p] p congP ([u]uâ‰x) refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, x,y,z: tm A} âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ x â‰ z</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">trans</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,z,p,q] q congP ([u]xâ‰u) p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, w,x,y,z: tm A} âŠ¦ w â‰ x âŸ¶ âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ w â‰ z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, w,x,y,z,p,q,r] p trans q trans r</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans4</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, v,w,x,y,z: tm A} âŠ¦ v â‰ w âŸ¶ âŠ¦ w â‰ x âŸ¶ âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ v â‰ z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, v,w,x,y,z,p,q,r,s] p trans q trans r trans s</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OneTyped</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">carrier</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Relation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OneTyped</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">carrier âŸ¶ carrier âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Reflexivity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} x$x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symmetry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y âŸ¶ y$x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Transitivity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} x$y âŸ¶ y$z âŸ¶ x$z</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans3</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} w$x âŸ¶ x$y âŸ¶ y$z âŸ¶ w$z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z,p,q,r] p trans q trans r</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans4</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} v$w âŸ¶ w$x âŸ¶ x$y âŸ¶ y$z âŸ¶ v$z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z,p,q,r,s] trans3 (p trans q) r s</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Preorder</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Reflexivity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Transitivity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceRelation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Preorder</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symmetry</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Congruence</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y âŸ¶ {T: carrier âŸ¶ carrier} T x $ T y </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceCongruence</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceRelation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Congruence</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Equality is an equivalence-congruence.</span>
<span class="cm">   But semantic equality is even stronger: it allows substitution in objects of any type so that equal objects can never be distinguished.</span>
<span class="cm">   This is different from the syntactic equality used inside a logic, where equal objets cannot be distinguished by logical formulas but might be distinguishable by other judgments.âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SemanticEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceRelation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y âŸ¶ {A: carrier âŸ¶ type} A x âŸ¶ A y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realizes Congruenceâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y âŸ¶ {T: carrier âŸ¶ carrier} T x $ T y </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p,T] p cong ([u]T x $ T u) refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EqualityType</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OneTyped</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">equalityRel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EquivalenceRelation </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OneTyped</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">refl</span><span class="w"> </span><span class="p">@</span><span class="no"> refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">sym</span><span class="w"> </span><span class="p">@</span><span class="no"> sym</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans</span><span class="w"> </span><span class="p">@</span><span class="no"> trans</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans3</span><span class="w"> </span><span class="p">@</span><span class="no"> trans3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans4</span><span class="w"> </span><span class="p">@</span><span class="no"> trans4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AntiSymmetry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EqualityType</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y âŸ¶ y$x âŸ¶ x = y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Order</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Preorder</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AntiSymmetry</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subtyping</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subtype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âª½</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">subtype_preorder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Preorder </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] âŠ¦ Aâª½B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubtypeInjections</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inject</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âª½ B âŸ¶ tm A âŸ¶ tm B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">â†‘</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inject_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x: tm A} âŠ¦ x â†‘ subtype_preorder/refl â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inject_trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,x: tm A,P:âŠ¦Aâª½B, Q:âŠ¦Bâª½C} âŠ¦ xâ†‘(P subtype_preorder/trans Q) â‰ (xâ†‘P)â†‘Q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQ</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Booleans</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">tt</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ff</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">if</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} tm bool âŸ¶ tm S âŸ¶ tm S âŸ¶ tm S</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">bool_tnd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[b] bâ‰tt âˆ¨ bâ‰ff</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool_nontrivial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ Â¬ ttâ‰ff</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">if_tt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x,y:tm s} âŠ¦ if tt then x else y â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">if_ff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x,y:tm s} âŠ¦ if ff then x else y â‰ y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T A formalization of Discourse Representation Theory (Hans Kamp \cite{Kamp:atotas81}; </span>
<span class="cm">  see also \cite{KamRey:acffodrs96}).</span>
<span class="cm">  This formalization is patterned after https://kwarc.info/people/mkohlhase/papers/dlc00.pdf</span>
<span class="cm">  only that we restrict ourselves to the first-order case. </span>
<span class="cm">  We give DRSes and Conditions a mode (in the type), where modes record the binding </span>
<span class="cm">  and bindable (i.e. free) discourse referents. </span>
<span class="cm">  In particular, the modes allow us to predict binding potentials; just see the positive </span>
<span class="cm">  referents in the mode. </span>
<span class="cm">  The modes have special computation rules here, so that they are normalized correctly.</span>
<span class="cm">âš</span><span class="w"></span>
<span class="w">  </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DRT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">dr</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">//Discourse Referents â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mode</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w">  </span><span class="cm">//DLC modes, they annotate the dynamic status of DRs â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pos</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr âŸ¶ mode</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âº</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neg</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr âŸ¶ mode</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â»</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">punion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode âŸ¶ mode âŸ¶ mode</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">mequal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode âŸ¶ mode âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} x â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// bounded semi-latticeâ™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">capture</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} xâºâŠxâ» â‰ pos x</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">//specifying DR capture â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">â˜scala://modes.drt.latin2?NormalizePunion</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">close</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode âŸ¶ mode</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â†“</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">close_pos</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} xâºâ†“ â‰ âˆ…</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">close_neg</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} xâ»â†“ â‰ xâ»</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">close_empty</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âˆ…â†“ â‰ âˆ…</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">close_close</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x}xâ†“â†“ â‰ xâ†“</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// normal form of modes: set of DR with function into booleanâ™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">drs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">#</span><span class="w"> </span><span class="ss">o</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// type of DRSes â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// type of terms â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cond</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">cond</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// type of conditions â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T DRSsâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">atomic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} cond n âŸ¶ drs (mâŠn)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w">  </span><span class="cm">// m is just set of drs, all mapped with pos in the return typeâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">merge</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} drs m âŸ¶ drs n âŸ¶ drs(mâŠn) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ—</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">seqmerge</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} drs m âŸ¶ drs n âŸ¶ drs (m âŠ nâ†“) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">;;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span>
<span class="w">  </span><span class="cm">/T conditionsâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} cond m âŸ¶ cond n âŸ¶ cond mâŠn</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">âˆ§</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dneg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m} drs m âŸ¶ cond mâ†“</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimpl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} drs m âŸ¶ drs n âŸ¶ cond (mâŠnâ†“)â†“ </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â‡’*</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">  </span><span class="cm">/T termsâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{i:dr} tm iâ»</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">`</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DRT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T example for a predicateâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">farmer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m} tm m âŸ¶ cond m</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">donkey</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m} tm m âŸ¶ cond m</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">stick</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m} tm m âŸ¶ cond m</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">beat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{l,m,n} tm l âŸ¶ tm m âŸ¶ tm n âŸ¶ cond lâŠmâŠn</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">own</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} tm m âŸ¶ tm n âŸ¶ cond mâŠn</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">u</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">v</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">w</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">uv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">uâº âŠ vâº</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T A farmer owns a donkey â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fod</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">uv | farmer`u âˆ§ donkey`v âˆ§ own(`u)`v</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T He beats it with a stick â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fbds</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">wâº | stick`w âˆ§ beat(`u)(`v)`w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the iconic DRT example: If a farmer owns a donkey, he beats it with a stick â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">donkey_sentence</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">drs âˆ…</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âˆ… | fod â‡’* fbds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Dynamic Logic is a Multi-Modal Logic originally introduced by</span>
<span class="cm">  Vaugham Pratt in 1996 for reasoning about imperative programs</span>
<span class="cm">  and later extended to more general uses in linguistics and philosophy.</span>
<span class="cm">  See https://en.wikipedia.org/wiki/Dynamic_logic_(modal_logic) for details.</span>
<span class="cm">  </span>
<span class="cm">  Dynamic Logic comes with a very simple non-deterministic programming</span>
<span class="cm">  language Î  that only features composition, distribution, iteration, test, and assignment.</span>
<span class="cm">  </span>
<span class="cm">  The main idea is to have a modality for every program Î± and proposition A:prop</span>
<span class="cm">  - âŸ¬Î±âŸ­A means that &quot;if Î± terminates, then $A$ holds afterwards&quot;</span>
<span class="cm">  - â¦‰Î±â¦ŠA means that &quot;Î± terminates and $A$ holds afterwards&quot;.</span>
<span class="cm">  The possible worlds are &quot;states&quot;, i.e. variable assignments for program</span>
<span class="cm">  variables, and a state w:world is accessible from state v:state for program Î±,</span>
<span class="cm">  if a run of program Î± in v yields state w.</span>
<span class="cm">  </span>
<span class="cm">  Dynamic logic comes in three levels of modeling: </span>
<span class="cm">  - Proposititional Dynamic Logic: programs are built up from program opaque variables,</span>
<span class="cm">    states are unspecified, and tests are over propositional formulae.</span>
<span class="cm">  - First-Order Dynamic Logics: program contain (program) variables and assignment,</span>
<span class="cm">    possible worlds are states, accessibility is state change.</span>
<span class="cm">  âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Programs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Dynamic Logic is just the multimodal logic </span>
<span class="cm">   where the modality is given by Î  programs. âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DynamicLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MML</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?Programs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prog</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">modality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T A simple non-deterministic programming language âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NonDetProg</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Programs</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the programming language primitives of a non-deterministic programming</span>
<span class="cm">    language Î  whose semantics is easy to specify.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î  âŸ¶ Î  âŸ¶ Î </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">distrib</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î  âŸ¶ Î  âŸ¶ Î </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆª</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">iteration</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î  âŸ¶ Î </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ Î </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">?</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T in Î , we can define the usual program combinators we know and love â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">skip</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">true ?</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ Î  âŸ¶ Î  âŸ¶ Î </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,P,Q] (F ? ; P) âˆª (Â¬F ? ; Q)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">while</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ Î  âŸ¶ Î </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">while</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">do</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,P] *(F ?;P) ; Â¬F ?</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">until</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ Î  âŸ¶ Î </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">repeat</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">until</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,P] *(P; Â¬F ?) ; F ?</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PropDynamicLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DynamicLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NonDetProg</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T A theory of (first-order) program variables and for Î ; we also extend the language of</span>
<span class="cm">tests ot sorted first-order logic âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedDynamicLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropDynamicLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">retrieve</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} var S âŸ¶ tm S</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">`</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assign</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} var S âŸ¶ tm S âŸ¶ Î </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰”</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">random_assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} var S âŸ¶ Î </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">randomize</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T A simple example to test what we have done above âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TypedDynamicLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Booleans</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">int</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">1</span><span class="p">:</span><span class=" -MMT_ObjectExpression">tm int</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">5</span><span class="p">:</span><span class=" -MMT_ObjectExpression">tm int</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm int âŸ¶ tm int âŸ¶ tm int</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">test</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b: var bool,x:var int}prog</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b,x] xâ‰”1; bâ‰”tt; while `bâ‰tt do (x â‰” `x+1; if `xâ‰5 then bâ‰”ff else skip); xâ‰”`x+1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">kripkemodels</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T a theory of states, i.e. assignments to program variables âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">State</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?HOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cell</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">state</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W âŸ¶ {S} tm cell S âŸ¶ tm S</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">extends</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W âŸ¶ tm W âŸ¶ {S} tm cell S âŸ¶ (tm W âŸ¶ tm S) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,S,n,x] n*w â‰ x v âˆ§ âˆ€[m] Â¬nâ‰m â‡’ m*vâ‰m*w</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">#</span><span class="w"> </span><span class="ss">extends</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trclos</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (tm S âŸ¶ tm S âŸ¶ prop) âŸ¶ (tm S âŸ¶ tm S âŸ¶ prop)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trclos</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trclose_extend</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,r} {x,y: tm S} âŠ¦ r x y âŸ¶ âŠ¦ trclos r x y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trclose_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,r} {x: tm S} âŠ¦ trclos r x x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trclose_trans</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,r} {x,y,z: tm S} âŠ¦ trclos r x y âŸ¶ âŠ¦ trclos r y z âŸ¶ âŠ¦ trclos r x z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">DynamicLogicSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?DynamicLogic</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?State</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MMLSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">NonDetProgSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?NonDetProg</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?State</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?Programsâ˜ = ?DynamicLogicSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,q] [u,w] âˆƒ [v] p u v âˆ§ q v w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">distrib</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,q] [v,w] p v w âˆ¨ q v w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">iteration</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] [v,w] trclos p v w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [v,w] f v âˆ§ vâ‰w</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// check currently skippedâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">skip</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w] v â‰ w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PropDynamicLogicSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?PropDynamicLogic</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?State</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DynamicLogicSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NonDetProgSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TypedDynamicSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?TypedDynamicLogic</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?State</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropDynamicLogicSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">var</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] tm cell S</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">retrieve</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,n] [w] n*w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assign</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,n,x] [v,w] extends v w n x</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">random_assign</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,n] [v,w] âˆƒ[t: tm Wâ†’S] extends v w n ([u]t@u)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_OD">â˜</span><span class="p">##</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ({x} âŠ¦ (P x)) âŸ¶ âŠ¦ âˆ€ P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,X} âŠ¦ âˆ€ P âŸ¶ âŠ¦ (P X)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">forallE</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationNDE</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationNDI</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_OD">â˜</span><span class="p">##</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantificationNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,X} âŠ¦ P X âŸ¶ âŠ¦ âˆƒ P</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">existsI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantificationNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,C} âŠ¦ âˆƒ P âŸ¶ ({x} âŠ¦ (P x) âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">existsE</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">EliminationRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantificationNDI</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantificationNDE</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IFOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IFOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IFOLEQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IFOLEQND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IFOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EqualityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IFOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IFOLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EqualityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelativizedUniversalQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rforall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ (term âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] âˆ€[x] xâ¦‚A â‡’ P x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€&#39;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelativizedUniversalQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RelativizedUniversalQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rforallI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F} ({x} âŠ¦xâ¦‚A âŸ¶ âŠ¦ F x) âŸ¶ âŠ¦ âˆ€&#39; A F</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F,P] forallI [x] impI [xa] P x xa</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rforallE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F} âŠ¦ âˆ€&#39; A F âŸ¶ {x} âŠ¦xâ¦‚A âŸ¶ âŠ¦ F x</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F,p,x,xa] p forallE x impE xa</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelativizedExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rexists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ (term âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] âˆƒ[x] xâ¦‚A âˆ§ P x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ&#39;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelativizedExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RelativizedExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rexistsI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F} {x} âŠ¦xâ¦‚A âŸ¶ âŠ¦ F x âŸ¶ âŠ¦ âˆƒ&#39; A F</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F,x,xa,p] existsI x andI xa p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rexistsE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F,C} âŠ¦ âˆƒ&#39; A F âŸ¶ ({x} âŠ¦xâ¦‚A âŸ¶ âŠ¦ F x âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F,C,p,P] p existsE [x,q] P x (q andEl) (q andEr)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniqueExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUnique</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒÂ¹</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniqueExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniqueExistentialQuantification </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUniqueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} {x} âŠ¦ P x âŸ¶ ({y} âŠ¦ P y âŸ¶ âŠ¦ x â‰ y) âŸ¶ âŠ¦ âˆƒÂ¹ P</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">existsUniqueI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUniqueE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,C} âŠ¦ âˆƒÂ¹ P âŸ¶ ({x} âŠ¦ P x âŸ¶ ({y} âŠ¦ P y âŸ¶ âŠ¦ x â‰ y) âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">existsUniqueE</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_OD">â˜</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Description</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniqueExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">the</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âŠ¦ âˆƒÂ¹ P âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">the</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">the_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,p} âŠ¦ P (the P p)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">some</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âŠ¦ âˆƒ P âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">some</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">some_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,p} âŠ¦ P (some P p)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQDesc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Description</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQDescND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQDesc</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">UQ_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âŠ¦ âˆ€ [x] P x â‡’ âˆ€ P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// The following views need to be built âš</span><span class="w"></span>
<span class="cm">// view HilbertNDEquivalence : ?EquivalenceHilbert â†’ ?EquivalenceNDI =</span>
<span class="cm">  UQ_ax = â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">// view NDHilbertEquivalence : ?EquivalenceNDI â†’ ?EquivalenceHilbert =</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equalConstant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A â†’ (A â†’ bool)</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A]Î»[x]Î»[y]xâ‰y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PropositionalExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">propext</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} (âŠ¦ F âŸ¶ âŠ¦ G) âŸ¶ (âŠ¦ G âŸ¶ âŠ¦ F) âŸ¶ âŠ¦ Fâ‰G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IHOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropositionalExtensionality</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IHOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?HOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IHOLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionsEta</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eq_equiv</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦Fâ‰G âŸ¶ âŠ¦Fâ‡”G</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] equivI ([q] p congP ([u]u) q) ([q] (p sym) congP ([u]u) q)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv_eq</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦Fâ‡”G âŸ¶ âŠ¦Fâ‰G</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] propext ([q] p equivEl q) ([q] p equivEr q)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerHOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?HOLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">powertypes?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">power</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] a â†’ bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">filter</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] Î» P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,S] S @ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compute</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,x] eq_equiv simpbeta</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] eta sym</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOLAndrews</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropositionalExtensionality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Remaining implementation is missing</span>

<span class="cm">  realize ?IHOLNDâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// true = (Î»[x:tm bool]x) â‰ Î»[x]xâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// false = (Î»[x]x) â‰ Î»[x]trueâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// not = [F]F â‰ falseâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// forall = [A,P] (Î»[x]P x) â‰ Î»[x]trueâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// and = [F,G] âˆ€[h:tm boolâ†’boolâ†’bool] h@F@G â‰ h@true@trueâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// impl = [F,G] (Fâˆ§G) â‰ Fâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// or = [F,G] âˆ€[H] (Fâ‡’H) â‡’ (Gâ‡’H) â‡’ Hâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// equiv = [F,G] (Fâ‡’G) âˆ§ (Gâ‡’F)â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// exists = [A,F] âˆ€[H] (âˆ€[x]F x â‡’ H) â‡’ Hâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetaLevelUniversalQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetaLevelExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetaLevelEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} A âŸ¶ A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŠœ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x:A} âŠ¦ x âŠœ x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">transport</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y} âŠ¦ x âŠœ y âŸ¶ {T: AâŸ¶type} T x âŸ¶ T y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">transport</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,x,y} âŠ¦ x âŠœ y âŸ¶ {F: AâŸ¶B} âŠ¦ F x âŠœ F y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">6</span><span class="w"></span>
<span class="w">        </span><span class="ss">=</span><span class="w"> </span><span class="ss">[A,B,x,y,p,F]</span><span class="w"> </span><span class="ss">transport</span><span class="w"> </span><span class="ss">p</span><span class="w"> </span><span class="ss">([a]</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="ss">F</span><span class="w"> </span><span class="ss">x</span><span class="w"> </span><span class="ss">âŠœ</span><span class="w"> </span><span class="ss">F</span><span class="w"> </span><span class="ss">a)</span><span class="w"> </span><span class="ss">refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetaLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetaLevelEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?MetaLevelUniversalQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?MetaLevelExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x:prop]x) âŠœ [x]x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x]x) âŠœ [x]true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F]F âŠœ false</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F] F âŠœ [x:A]true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] âˆ€[h: prop âŸ¶ prop âŸ¶ prop]h F G âŠœ h true true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] (Fâˆ§G) âŠœ F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] âˆ€[H] (Fâ‡’H) â‡’ (Gâ‡’H) â‡’ H</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] (Fâ‡’G) âˆ§ (Gâ‡’F)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F] âˆ€[H] (âˆ€[x]F x â‡’ H) â‡’ H</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Box</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â–¡</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Diamond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">diamond</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â—‡</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ML</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Box</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Diamond</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MLHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ML</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Rules with hypothetical premises are not sound in Kripke models; so we need to use a Hilbert calculus.â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLHilbert</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">kripkemodels</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Worlds</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?HOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">world</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">W</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">liftPred2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A,B} (          tm A âŸ¶           tm B  âŸ¶          prop)</span>
<span class=" -MMT_ObjectExpression">                   âŸ¶ (tm S âŸ¶ tm A) âŸ¶ (tm S âŸ¶ tm B) âŸ¶ (tm S âŸ¶ prop)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,A,B,o,f,g] [x] o (f x) (g x)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">liftFun</span><span class="si">2</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">lift0</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} prop âŸ¶ (tm S âŸ¶ prop)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,o] [x]o</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">lift</span><span class="si">0</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lift1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (prop âŸ¶ prop) âŸ¶ (tm S âŸ¶ prop) âŸ¶ (tm S âŸ¶ prop)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,o,f] [x]o (f x)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">lift</span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lift2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (prop âŸ¶ prop âŸ¶ prop) âŸ¶ (tm S âŸ¶ prop) âŸ¶ (tm S âŸ¶ prop) âŸ¶ (tm S âŸ¶ prop)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,o,f,g] [x]o (f x) (g x)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">lift</span><span class="si">2</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span>
<span class="w">  </span><span class="vc">liftbind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} ({T}  (        tm T            âŸ¶ prop)  âŸ¶          prop) âŸ¶</span>
<span class=" -MMT_ObjectExpression">                  {T} ((tm S âŸ¶ tm T) âŸ¶ (tm S âŸ¶ prop)) âŸ¶ (tm S âŸ¶ prop)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S][B][T][F][x] B (Sâ†’T) [f] F (apply1 f) x</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">           </span><span class="p">#</span><span class="w"> </span><span class="ss">liftbind</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">latin:/?DisjunctionHilbert2ND</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">latin:/?NegationHilbert2ND</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">latin:/?ImplicationHilbert2ND</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">latin:/?EquivalenceHilbert2ND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KripkeFrame</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?TypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">accessible</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W âŸ¶ tm W âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">acc</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KripkeModel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?SFOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?KripkeFrame</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PropSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?Propositions</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W âŸ¶ prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">LogicSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?Logic</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] {w} âŠ¦ f w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?PL</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift0 true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift0 false</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift2 and</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift2 or</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift2 impl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift1 not</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift2 equiv</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PLHilbertSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?PLHilbert</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w] trueI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [g,w] f w falseE inconE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">andI</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,f,g][w] andI (f w) (g w)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg] [w] fg w andEl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg] [w] fg w andEr</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">orIl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,f] [w] f w orIl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,f] [w] f w orIr</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H][w] orE_ax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">impE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg,f] [w] (fg w) impE (f w)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">K_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,w] K_ax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">S_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H,w] S_ax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">notI_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,w] notI_ax</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">notE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,nf,f] [g,w] (nf w) notE (f w) inconE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">equivI_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,w] equivI_ax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg,f] [w] (fg w) equivEl (f w)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg,g] [w] (fg w) equivEr (g w)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">classical</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,p] [w] classical [Fwincon] [A] p ([Fw,Gv,v] Fwincon (Fw w) (Gv v)) ([u] A) w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TermSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?TypedTerms</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T constant universe; alternative would be tp = tm W âŸ¶ tpâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] tm W âŸ¶ tm S</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">SFOLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQ</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">liftbind forall</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">liftbind exists</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] liftFun2 (equal S)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">MLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?ML</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?KripkeModel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] [v] âˆ€ [w] v acc w â‡’ p w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">diamond</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] [v] âˆƒ [w] v acc w âˆ§ p w</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">MLHilbertSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?MLHilbert</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?KripkeModel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MLSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLHilbertSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MultiModal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">modality</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MultiBox</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiModal</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">modality âŸ¶ prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¬</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŸ­</span><span class="w">  </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MultiDiamond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiModal</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">diamond</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">modality âŸ¶ prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â¦‰</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â¦Š</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MML</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiModal</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiBox</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiDiamond</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SMML</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MML</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">kripkemodels</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">MMLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?MML</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">modality</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W âŸ¶ tm W âŸ¶ prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,p] [v] âˆ€ [w] m v w â‡’ p w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">diamond</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,p] [v] âˆƒ [w] m v w âˆ§ p w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">SMMLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?SMML</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MMLSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLSemantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">diagops</span><span class="w"> </span><span class="l l-URI">scala://diagops.latin2</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Declare operator constants</span>

<span class="cm">   Use an empty meta theory! E.g. if we used LF as a meta theory the notation</span>
<span class="cm">   would be parsed as LF-y.</span>
<span class="cm">âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LogicDiagramOperatorsSyntax</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">fol_typifier</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">TYPIFY</span><span class="w"> </span><span class="ss">FOL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LogicDiagramOperatorsSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://cds.omdoc.org/urtheories?ModExp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">diagops?ComputeFOLTypified </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LogicDiagramOperators</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicDiagramOperatorsSyntax </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicDiagramOperatorsSemantics </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://cds.omdoc.org/urtheories?Combinators </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLModel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Booleans</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// View currently not total</span>

<span class="cm">view PLSemantics : ?PLND â†’ ?PLModel =</span>
<span class="cm">  prop = tm boolâ™</span>
<span class="cm">  ded  = [F] âŠ¦ F â‰ ttâ™</span>
<span class="cm">  </span>
<span class="cm">  true = ttâ™</span>
<span class="cm">  false = ffâ™</span>
<span class="cm">  </span>
<span class="cm">  and   = [x,y] if x then y else ffâ™</span>
<span class="cm">  or    = [x,y] if x then tt else yâ™</span>
<span class="cm">  impl  = [x,y] if x then y else ttâ™</span>
<span class="cm">  not   = [x] if x then ff else ttâ™</span>
<span class="cm">  equiv = [x,y] if x then y else if y then ff else ttâ™</span>

<span class="cm">  trueI = reflâ™</span>
<span class="cm">  falseE = [p][a] (bool_nontrivial notE (p sym)) inconEâ™</span>
<span class="cm">  </span>
<span class="cm">  andI = [F][G][p][q]</span>
<span class="cm">          trans3 (p congT [u] if u then G else ff) if_tt qâ™</span>

<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Tableaux</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">marktrue</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Â¹</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">TabMarker </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">markfalse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â°</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">TabMarker </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closedbranch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¥</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p} pÂ¹ </span><span class=" -MMT_OD">â˜</span><span class="w">  </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">TabClosed </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// We could define many of the rules below by defining Pâ° = PÂ¹ âŸ¶ âŠ¥ â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">closebranch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} PÂ¹ âŸ¶ Pâ° âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">close</span><span class="si">10</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closebranch2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} Pâ° âŸ¶ PÂ¹ âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">close</span><span class="si">01</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,p0,p1] close10 p1 p0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">proofstart</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} (Pâ° âŸ¶ âŠ¥) âŸ¶ PÂ¹ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">start</span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refutationstart</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} (PÂ¹ âŸ¶ âŠ¥) âŸ¶ Pâ° </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">start</span><span class="si">0</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">classicality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ((PÂ¹ âŸ¶ âŠ¥) âŸ¶ âŠ¥) âŸ¶ PÂ¹ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// We need classicality to prove proofstart âš</span><span class="w"></span>
<span class="kd">view</span><span class="w"> </span><span class="nc">Tableaux2Proofs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Tableaux</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Classical</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">marktrue</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] âŠ¦ p </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">markfalse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] âŠ¦ p âŸ¶ â†¯ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closedbranch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â†¯ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closebranch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P, p1, p0] p0 p1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">proofstart</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">classical </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">classicality</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">classical </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refutationstart</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,pr] pr </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Proofs2Tableaux</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Tableaux</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] pÂ¹ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// classical = classicality â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">negationTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} Â¬Pâ° âŸ¶ (PÂ¹ âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">negt</span><span class="si">0</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">negationTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} Â¬PÂ¹ âŸ¶ (Pâ° âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">negt</span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">NegationTab2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NegationTab</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux2Proofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">not </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">negationTab0</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P, np0, p1r] np0 (notI p1r) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">negationTab1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P, np1, p0r] np1 notE (classical p0r) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">NegationND2Tab</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NegationND</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?NegationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs2Tableaux </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">not </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F, fr : FÂ¹ âŸ¶ âŠ¥] start1 ([nfr : Â¬Fâ°] negt0 nfr fr) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F, nf, f] negt1 nf ([f0] close10 f f0) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">ConjunctionTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">conjunctionTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} Aâˆ§Bâ° âŸ¶ (Aâ° âŸ¶ âŠ¥) âŸ¶ (Bâ° âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">conjt</span><span class="si">0</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">conjunctionTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} Aâˆ§BÂ¹ âŸ¶ (AÂ¹ âŸ¶ BÂ¹ âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">conjt</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// view ConjunctionTab2ND : ?ConjunctionTab -&gt; ?PLND =</span>
<span class="cm">  and = and â™</span>
<span class="cm">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">disjunctionTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} Aâˆ¨Bâ° âŸ¶ (Aâ° âŸ¶ Bâ° âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">disjt</span><span class="si">0</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">disjunctionTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} Aâˆ¨BÂ¹ âŸ¶ (AÂ¹ âŸ¶ âŠ¥) âŸ¶ (BÂ¹ âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">disjt</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">implicationTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} Aâ‡’Bâ° âŸ¶ (AÂ¹ âŸ¶ Bâ° âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">implt</span><span class="si">0</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">implicationTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} Aâ‡’BÂ¹ âŸ¶ (Aâ° âŸ¶ âŠ¥) âŸ¶ (BÂ¹ âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">implt</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equivalence </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivalenceTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} Aâ‡”Bâ° âŸ¶ (Aâ° âŸ¶ BÂ¹ âŸ¶ âŠ¥) âŸ¶ (AÂ¹ âŸ¶ Bâ° âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equivt</span><span class="si">0</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivalenceTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} Aâ‡”BÂ¹ âŸ¶ (Aâ° âŸ¶ Bâ° âŸ¶ âŠ¥) âŸ¶ (AÂ¹ âŸ¶ BÂ¹ âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equivt</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P, X} âˆ€ P Â¹ âŸ¶ (P X Â¹ âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ApplyRepeatedly </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âˆ€ P â° âŸ¶ ({x} P x â° âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantificationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âˆƒ P Â¹ âŸ¶ ({x} P x Â¹ âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P, X} âˆƒ P â° âŸ¶ (P X â° âŸ¶ âŠ¥) âŸ¶ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ApplyRepeatedly </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   Interdefinability of logics is formalized in various views. âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   The views currently still need single theories as a domain and codomain, which </span>
<span class="cm">  forces us to provide spurious named theories. This should be refactored when</span>
<span class="cm">  multi-theory domains and codomains are possible. âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationTruth</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Truth</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationFalsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationTruthND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationTruth</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationFalsityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationFalsity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">FalsityNegTruth</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?NegationTruth</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Â¬ true </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">FalsityNegTruthND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?NegationTruthND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityNegTruth</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] p notE trueI </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TruthNegFalsity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Truth</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?NegationFalsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Â¬ false </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TruthNegFalsityND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?NegationFalsityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthNegFalsity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">notI [p] p falseE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">DisjNegConj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?NegationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] Â¬(Â¬a âˆ§ Â¬b)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">ConjNegDisj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?NegationDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] Â¬(Â¬a âˆ¨ Â¬b)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationImplication</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">DisjNegConj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?NegationImplication</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] Â¬a â‡’ b</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">ImplNegDisj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?NegationDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] Â¬a âˆ¨ b</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">ImplNegConj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?NegationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] Â¬(a âˆ§ Â¬b)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">EquivImplConj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Equivalence</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?ImplicationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] (a â‡’ b) âˆ§ (b â‡’ a)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationFalsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">NegImplFalsity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?ImplicationFalsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] a â‡’ false</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T A fully modular specification of intuitionistic and classical propositional</span>
<span class="cm">  logics.</span>
<span class="cm">  Every connective and all proof rules are specified in their own theories to maximize reusability.</span>
<span class="cm">  </span>
<span class="cm">  Proof rules follow natural deduction except that a judgment for inconsistency is used in some rules.</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">/T Naming conventions for theory name suffixes</span>
<span class="cm">   * ND: natural deduction rules</span>
<span class="cm">   * I resp. E: introduction resp. elimination rules</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Truth</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TruthND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Truth</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Falsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FalsityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ false âŸ¶ â†¯</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">falseE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Negation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} (âŠ¦ F âŸ¶ â†¯) âŸ¶ âŠ¦ Â¬ F</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">notI</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} âŠ¦ Â¬ F âŸ¶ âŠ¦ F âŸ¶ â†¯</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">notE</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AlternativeNegationAndFalsityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notIntroduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (âŠ¦ A âŸ¶ âŠ¦ false) âŸ¶ (âŠ¦ Â¬ A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">altNotI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notElimination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ Â¬ Â¬ A âŸ¶ âŠ¦ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">altNotE</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseIntroduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ Â¬ A âŸ¶ âŠ¦ A âŸ¶ âŠ¦ false </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">altFI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">EliminationRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseElimination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ false âŸ¶ âŠ¦ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">altFE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Conjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ§</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ConjunctionNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F âŸ¶ âŠ¦ G âŸ¶ âŠ¦ F âˆ§ G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ConjunctionNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F âˆ§ G âŸ¶ âŠ¦ F</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">andEl</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F âˆ§ G âŸ¶ âŠ¦ G</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">andEr</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ConjunctionND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionNDI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Disjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ¨</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F âŸ¶ âŠ¦ F âˆ¨ G</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">orIl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIr</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ G âŸ¶ âŠ¦ F âˆ¨ G</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">orIr</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G,C} âŠ¦ F âˆ¨ G âŸ¶ (âŠ¦ F âŸ¶ âŠ¦ C) âŸ¶ (âŠ¦ G âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">orE</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">EliminationRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionNDI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Implication</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%Râ‡’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} (âŠ¦ F âŸ¶ âŠ¦ G) âŸ¶ âŠ¦ F â‡’ G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F â‡’ G âŸ¶ âŠ¦ F âŸ¶ âŠ¦ G</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">impE</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationNDI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">impl_preorder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Preorder </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] âŠ¦ x â‡’ y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">refl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] impI [f] f</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H,fg,gh] impI [f] gh impE (fg impE f)</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equivalence</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡”</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equivalence</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} (âŠ¦ F âŸ¶ âŠ¦ G) âŸ¶ (âŠ¦ G âŸ¶ âŠ¦ F) âŸ¶ âŠ¦ F â‡” G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equivalence</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F â‡” G âŸ¶ âŠ¦ F âŸ¶ âŠ¦ G</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">equivEl</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F â‡” G âŸ¶ âŠ¦ G âŸ¶ âŠ¦ F</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">equivEr</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceNDI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">equiv_equivalence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EquivalenceRelation </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] âŠ¦ x â‡” y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">refl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] equivI ([p]p) ([p]p)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">sym</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] equivI ([q] p equivEr q) ([q] p equivEl q)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H,fg,gh] equivI ([f] gh equivEl (fg equivEl f))</span>
<span class=" -MMT_ObjectExpression">                                 ([h] fg equivEr (gh equivEr h))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IPL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Truth</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equivalence</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IPLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">not_or_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ Â¬(Fâˆ¨G) âŸ¶ âŠ¦Â¬F </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] notI [q] p notE (q orIl)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not_or_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ Â¬(Fâˆ¨G) âŸ¶ âŠ¦Â¬G </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] notI [q] p notE (q orIr)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">nntnd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} âŠ¦Â¬Â¬(Fâˆ¨Â¬F)</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] notI [p] (not_or_right p) notE (not_or_left p)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">impl_order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Order </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationND/impl_preorder</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">    </span><span class="kd">structure</span><span class="w"> </span><span class="nc">equalityRel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="l l-URI">?EquivalenceND/equiv_equivalence</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">antisym</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg,gf] equivI ([f] fg impE f) ([g] gf impE g)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Classical</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">classical</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ((âŠ¦ F âŸ¶ â†¯) âŸ¶ â†¯) âŸ¶ âŠ¦ F</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">classical</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ProofIrrelevance</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TermIrrelevanceRule ded</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ProofIrrelevance</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Classical</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">indirect</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} (âŠ¦Â¬F âŸ¶ â†¯) âŸ¶ âŠ¦ F</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,h] classical [q] h (notI q)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">indirect</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="vc">dne</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} âŠ¦Â¬Â¬F âŸ¶ âŠ¦F</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,p] indirect [q] p notE q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tnd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} âŠ¦Fâˆ¨Â¬F</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] dne nntnd</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Conjunction where the second conjunct&#39;s well-formedness may depend on the truth of the first conjunct</span>
<span class="cm">   Curry-Howard analogue of Sigma types âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dand</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} (âŠ¦ F âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ§-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentConjunctionND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentConjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dandI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} {p:âŠ¦ F} âŠ¦ G p âŸ¶ âŠ¦ F âˆ§- G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dandEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F âˆ§- G âŸ¶ âŠ¦ F</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dandEl</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dandEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} {p: âŠ¦ F âˆ§- G} âŠ¦ G (p dandEl)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dandEr</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Disjunction where the second disjunct&#39;s well-formedness may depend on the falsity of the first disjunct</span>
<span class="cm">   Curry-Howard analogue of an unusual union type where the second argument is only considered if the first one is emptyâš</span><span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dor</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ((âŠ¦ F âŸ¶ â†¯) âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ¨-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentDisjunctionND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentDisjunction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dorIl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F âŸ¶ âŠ¦ F âˆ¨- G</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dorIl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dorIr</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ({p:âŠ¦ F âŸ¶ â†¯} âŠ¦ G p) âŸ¶ âŠ¦ F âˆ¨- G</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dorIr</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dorE</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G,C} âŠ¦ F âˆ¨- G âŸ¶ (âŠ¦ F âŸ¶ âŠ¦ C) âŸ¶ ({p: âŠ¦ F âŸ¶ â†¯} âŠ¦ G p âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">dorE</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Implication where the implicate&#39;s well-formedness may depend on the truth of the implicant</span>
<span class="cm">   Curry-Howard analogue of Pi types âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentImplication</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimpl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} (âŠ¦ F âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡’-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentImplicationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentImplication</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimpI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ({p} âŠ¦ G p) âŸ¶ âŠ¦ F â‡’- G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimpE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F â‡’- G âŸ¶ {p:âŠ¦ F} âŠ¦ G p</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dimpE</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Hilbert calculi for propositional and first-order logic. </span>
<span class="cm">  Here we formalize a version that is rule-maximal, i.e. we include </span>
<span class="cm">  as many rules from natural deduction a we can, i.e. all rules that </span>
<span class="cm">  do not use hypothetical reasoning. The ones that do, we reformulate </span>
<span class="cm">  into axioms, where all the function types become implications. </span>
<span class="cm">  </span>
<span class="cm">  Unfortunately, this means that we cannot be fully modular, since we </span>
<span class="cm">  need a treatment of implication in all cases.âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">K_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ F â‡’ G â‡’ F </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">S_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G,H} âŠ¦ (F â‡’ G â‡’ H) â‡’ (F â‡’ G) â‡’ F â‡’ H </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notI_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} âŠ¦ (F â‡’ Â¬F) â‡’ Â¬F </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionNDI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G,H} âŠ¦ (F âˆ¨ G) â‡’ (F â‡’ H) â‡’ (G â‡’ H) â‡’ H</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivI_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} âŠ¦ (F â‡’ G) â‡’ (G â‡’ F) â‡’ (F â‡” G)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationHilbert</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionHilbert</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceHilbert</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Classical</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">ImplicationHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?ImplicationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">K_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] impI [p] impI [q] p </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">S_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H] impI [p] impI [q] impI [r] (p impE r) impE (q impE r)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">NegationHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NegationHilbert</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert2ND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notI_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] impI [p] notI [q] (p impE q) notE q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">DisjunctionHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DisjunctionHilbert</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionNDI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert2ND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H] impI [fg] impI [fh] impI [gh] fg orE ([f] fh impE f) ([g] gh impE g)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">EquivalenceHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?EquivalenceHilbert</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceNDE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert2ND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivI_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] impI [fg] impI [gf] equivI ([f] fg impE f) ([g] gf impE g)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">PLHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLHilbert</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert2ND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationHilbert2ND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionHilbert2ND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceHilbert2ND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Classical</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">diagram</span><span class="w"> </span><span class="nv">SFOL_via_operator</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?LogicDiagramOperators :</span><span class=" -MMT_ObjectExpression">= TYPIFY FOL DIAG FROM FILE &quot;C:\Users\nroux\Desktop\kwarc-project\code\archives\MathHub\MMT\LATIN2\source\logic\fol.mmt&quot; </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedUniversalQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedUniversalQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniversalQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P} ({x: tm A} âŠ¦ P x) âŸ¶ âŠ¦ âˆ€ [x] P x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P} âŠ¦ âˆ€ P âŸ¶ {x: tm A} âŠ¦ P x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">forallE</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P} {x: tm A} âŠ¦ P x âŸ¶ âŠ¦ âˆƒ P</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">existsI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,C} âŠ¦ âˆƒ P âŸ¶ ({x: tm A} âŠ¦ P x âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">existsE</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_OD">â˜</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ISFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniversalQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ISFOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniversalQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLEQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notequal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y]Â¬xâ‰y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰ </span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLEQND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedUniqueExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUnique</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒÂ¹</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedUniqueExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniqueExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUniqueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P} {x: tm A} âŠ¦ P x âŸ¶ ({y} âŠ¦ P y âŸ¶ âŠ¦ x â‰ y) âŸ¶ âŠ¦ âˆƒÂ¹ P</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">existsUniqueI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUniqueE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,C} âŠ¦ âˆƒÂ¹ P âŸ¶ ({x: tm A} âŠ¦ P x âŸ¶ ({y} âŠ¦ P y âŸ¶ âŠ¦ x â‰ y) âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">existsUniqueE</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_OD">â˜</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedDescription</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniqueExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">the</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} {P:tm A âŸ¶ prop} âŠ¦ âˆƒÂ¹ P âŸ¶ tm A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">the</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">the_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P: tm A âŸ¶ prop,p} âŠ¦ P (the P p)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedChoice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantification</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">some</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} {P:tm A âŸ¶ prop} âŠ¦ âˆƒ P âŸ¶ tm A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">some</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">some_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P: tm A âŸ¶ prop,p} âŠ¦ P (some P p)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// Mainly ported (with very minor modifications)</span>
<span class="cm">// from Colin&#39;s examples/induction/NatExample.mmt</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatInduct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LFXI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">inductive</span><span class="w"> </span><span class="nc">nat</span><span class="p">()</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">plusn</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n âŸ¶ nat/n)     </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x)             </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] nat/s (u x)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n âŸ¶ nat/n âŸ¶ nat/n</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plusn/n</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">z_plus_n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m: nat/n} DED ((nat/z + m) EQ m) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">z_plus_z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED (nat/z + nat/z) EQ nat/z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">z_plus_suc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m: nat/n} DED (nat/z + m) EQ m âŸ¶ DED (nat/z + (nat/s m)) EQ (nat/s m) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">z_neutral</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] DED (nat/z + m) EQ m </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n nat/z </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plusn/z/Applied nat/z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:nat/n} n x âŸ¶ n (nat/s x) </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, px] plusn/z/Applied (nat/s x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">times</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n âŸ¶ nat/n)     </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] nat/z)         </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] (x + (u x))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">predec</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n   </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/z   </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u] u) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">monus</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n âŸ¶ nat/n)        </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x)                </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] predec/n (u x)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uom</span><span class="w"> </span><span class="l l-URI">scala://uom.api.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">nat</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Nat</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm nat</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â„•</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„•</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„•</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize â„• uom?StandardNat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize zero uom?Arithmetic/Zero</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize succ uom?Arithmetic/Succ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">proving</span><span class="w"> </span><span class="l l-URI">scala://latin2/proving</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PropositionsITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">proof</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">block</span><span class="w"> </span><span class="ss">proof</span><span class="w"> </span><span class="si">1</span><span class="ss">;</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">proving?CheckProof</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">hence</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">L1T</span><span class="w"> </span><span class="ss">by</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">suffices</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">use</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">use</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">proving?UseStep</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropositionsITP</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">assume</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">L1T</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">proving?AssumeStep</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cases</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLITP</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fix</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">L1T</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">proving?FixStep</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?SFOLITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T,A: tm TâŸ¶ prop} âŠ¦ âˆ€ [x] A x â‡’ A x</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T,A] proof fix x; assume a; use a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// the above is equivalent to the following in standard natural deductionâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T,A: tm TâŸ¶ prop} âŠ¦ âˆ€ [x] A x â‡’ A x</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T,A] forallI [x] impI [a] a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetFOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">set</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Description</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RelativizedUniversalQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RelativizedExistentialQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?SetFOL</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Empty</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">isempty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] Â¬ âˆƒ[y] y âˆˆ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ isempty âˆ…</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">emptyE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ xâˆˆâˆ… âŸ¶ â†¯</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,p] empty_prop notE (existsI x p)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UnorderedPairs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairIL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,XËˆ} âŠ¦ X âˆˆ uopair X XËˆ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairIR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,XËˆ} âŠ¦ X âˆˆ uopair X XËˆ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U,X,XËˆ} âŠ¦ U âˆˆ uopair X XËˆ âŸ¶ âŠ¦ Uâ‰X âˆ¨ Uâ‰XËˆ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Singletons</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ x âˆˆ singleton x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,u} âŠ¦ u âˆˆ singleton x âŸ¶ âŠ¦ uâ‰x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">issingleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] âˆƒÂ¹[u]uâˆˆx</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">singleton_the</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ issingleton x âŸ¶ set</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,p] the ([u] u âˆˆ x) p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">SelfPair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Singletons</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?UnorderedPairs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">singleton</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] uopair x x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] uopairIL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,u,p] uopairE p orE ([q] q) ([q] q)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Comprehension</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">comprehend</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ (set âŸ¶ prop) âŸ¶ set</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comprehendI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,X} âŠ¦ XâˆˆA âŸ¶ âŠ¦ P X âŸ¶ âŠ¦ X âˆˆ A|P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comprehend_sub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,X} âŠ¦ X âˆˆ A|P âŸ¶ âŠ¦ XâˆˆA</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comprehendE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,X} âŠ¦ X âˆˆ A|P âŸ¶ âŠ¦ P X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Replacement</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">replace</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ (set âŸ¶ set) âŸ¶ set</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">replaceI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F,X} âŠ¦ XâˆˆA âŸ¶ âŠ¦ (F X) âˆˆ A map F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">replaceE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F,X} âŠ¦ X âˆˆ A map F âŸ¶ âŠ¦ âˆƒ&#39;A [x] (F x) â‰ X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BigUnion</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â‹ƒ</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunionI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X,x} âŠ¦ xâˆˆX âŸ¶ âŠ¦ XâˆˆA âŸ¶ âŠ¦ x âˆˆ â‹ƒA</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunionE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X,x,C} âŠ¦ x âˆˆ â‹ƒA âŸ¶ (âŠ¦ XâˆˆA âŸ¶ âŠ¦ xâˆˆX âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerSets</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">power</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â„˜</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">powerI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,A} ({u} âŠ¦uâˆˆX âŸ¶ âŠ¦uâˆˆA) âŸ¶ âŠ¦Xâˆˆâ„˜ A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">powerE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,A} âŠ¦Xâˆˆâ„˜A âŸ¶ {u} âŠ¦uâˆˆX âŸ¶ âŠ¦uâˆˆA</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Infinite</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/powertypes?PowerSFOL</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosureSystem</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">CC</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm â„˜â„˜X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Q: tm â„˜â„˜X} âŠ¦ Q âŠ† CC âŸ¶ âŠ¦ (â‹‚ Q) âˆˆ CC</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// provable â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">full_closed</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ fullset âˆˆ CC</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosureOperator</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm â„˜X âŸ¶ tm â„˜X</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">cl</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">extensive</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ A âŠ† cl A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">monotone</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âŠ† B âŸ¶ âŠ¦ cl A âŠ† cl B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ cl (cl A) â‰ cl A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InteriorTopology</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="vc">X</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">interior</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm â„˜X âŸ¶ tm â„˜X</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">int_extensivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ ( subset X (interior A) A)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">idempotence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ ((interior A) â‰  (interior (interior A)))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">bin_inters</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} âŠ¦ ((interior (A âˆ© B)) â‰ ((interior A) âˆ© (interior B)))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">preservation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ ((interior (full X)) â‰ (full X))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosureTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ClosureOperator</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">closure_empty</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ cl (empty X) â‰ (empty X)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure_union</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ cl (A âˆª B) â‰ cl A âˆª cl B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// monotone provable from unionâ™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   isomorphic to ClosureOperatorâš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Closeness</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">close</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm X âŸ¶ tm â„˜X âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">in_close</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,A} âŠ¦ x âˆˆ A âŸ¶ âŠ¦ x|A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigger_close</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,A,B} âŠ¦ x|A âŸ¶ âŠ¦ A âŠ† B âŸ¶ âŠ¦ x|B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">transitive</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,x} âŠ¦ x|B âŸ¶ âŠ¦ (âˆ€ [y] y âˆˆ B â‡’ y|A) âŸ¶ âŠ¦ x|A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosenessTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Closeness</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">empty_union</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ Â¬ x|(empty X)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">finite_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,A,B} âŠ¦ x|(A âˆª B) âŸ¶ âŠ¦ x|A âˆ¨ x|B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// bigger_close provable from union â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   empty and full axioms are implied by/correspond to empty union and empty intersectionâš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">OpenTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">OO</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm â„˜â„˜X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">full_open</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (full X) âˆˆ OO</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">union_open</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Q: tm â„˜â„˜X} âŠ¦ Q âŠ† OO âŸ¶ âŠ¦ (â‹ƒ Q) âˆˆ OO</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">empty_open</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (empty X) âˆˆ OO </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">finite_intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âˆˆ OO âŸ¶ âŠ¦ B âˆˆ OO âŸ¶ âŠ¦ A âˆ© B âˆˆ OO</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosedTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ClosureSystem</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="vc">empty_closed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (empty X) âˆˆ CC</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">finite_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âˆˆ CC âŸ¶ âŠ¦ B âˆˆ CC âŸ¶ âŠ¦ A âˆª B âˆˆ CC</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NeighborhoodTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">NN</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm X âŸ¶ tm â„˜â„˜X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neighborhood</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm X âŸ¶ tm â„˜X âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,N] N âˆˆ (NN x)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">nonempty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ Â¬ (NN x) â‰ âˆ…</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inneighborhood</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: tm X,N} âŠ¦ x âˆ˜ N âŸ¶ âŠ¦ x âˆˆ N</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">superset_closed</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N,x} âŠ¦ x âˆ˜ M âŸ¶ âŠ¦ M âŠ† N âŸ¶ âŠ¦ x âˆ˜ N</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">intersection_closed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N,x} âŠ¦ x âˆ˜ M âŸ¶ âŠ¦ x âˆ˜ N âŸ¶ âŠ¦ x âˆ˜ M âˆ© N</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">openness</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{N,x} âŠ¦ x âˆ˜ N âŸ¶ âŠ¦ âˆƒ[M]âˆ€[y] x âˆ˜ M âˆ§ (yâˆˆM â‡’ yâˆ˜N)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// views</span>
<span class="cm">   ClosureSystem âŸ¶ ClosureOperator: A closed if A fixed point of cl</span>
<span class="cm">   ClosureOperator âŸ¶ ClosureSystem: cl A = intersection of closed supersets of A</span>
<span class="cm">   Closeness â†” ClosureOperator: X close A â‡” X â€âˆˆ cl A</span>
<span class="cm">   ClosureSystem âŸ¶ Closeness: A closed if A contains all points close to it </span>
<span class="cm">   Closeness â†” ClosureSystem: X close A if X in every closed superset of A</span>

<span class="cm">for functions f: X âŸ¶ Y</span>
<span class="cm">  f(cl A) âŠ†â€ cl f(A)  â‡”  preservation of closeness   â‡”  reflection of closedness  (= continuous)</span>
<span class="cm">  f(cl A) âŠ‡ cl f(A)  â‡”  preservation of closedness</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">//   views:</span>
<span class="cm">      Neighborhood âŸ¶ Open: NN = supersets of open sets</span>
<span class="cm">      Open âŸ¶ Neighborhood: OO = sets that are neightborhoods for every element</span>
<span class="cm">      Open âŸ¶ Closed: OO = complements of CC</span>
<span class="cm">      Closed âŸ¶ Open: CC = complements of OO</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?SFOLEQND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Option</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">option</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">?</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// unfortunately the notation ? does not work in binders, so use &#39;option A&#39; there</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">some</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A âŸ¶ tm A? </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">some</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">none</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">none</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">defined_and_equal_to</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? âŸ¶ tm A âŸ¶ prop</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, optionValue, value] optionValue â‰ some value</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰¡</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">defined</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? âŸ¶ prop</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, optionValue] âˆƒ[v: tm A] optionValue â‰¡ v</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â†“</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// we need higher precedence than âˆ§ (which is 10 currently) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">if_defined_then_equal_to</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? âŸ¶ tm A âŸ¶ prop</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, optionValue, value] optionValue â‰ none âˆ¨ optionValue â‰¡ value</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ifDefEq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">both_defined_and_equal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? âŸ¶ tm A? âŸ¶ prop</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, optionValue1, optionValue2] optionValue1â†“ âˆ§ optionValue2â†“ âˆ§ optionValue1 â‰ optionValue2</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">bothDefEq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">equality_ax</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} âŠ¦ âˆ€[optionValue1: tm (option A)] âˆ€[optionValue2: tm (option A)]</span>
<span class=" -MMT_ObjectExpression">      optionValue1 â‰ optionValue2 â‡” (optionValue1 â‰ none âˆ§ optionValue2 â‰ none) âˆ¨ (âˆƒ[v: tm A] optionValue1 â‰¡ v âˆ§ optionValue2 â‰¡ v) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">map</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} tm A? âŸ¶ (tm A âŸ¶ tm B) âŸ¶ tm B? </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">map_ax1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, f: tm A âŸ¶ tm B, a: tm A} âŠ¦ map (some a) f â‰¡ f a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">map_ax2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, f: tm A âŸ¶ tm B} âŠ¦ (map none f) â‰ none </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">flatMap</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} tm A? âŸ¶ (tm A âŸ¶ tm (option B)) âŸ¶ tm B? </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">flatMap</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ObjectLessComposition</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Option </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mor</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Mor</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm mor </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">OptionMor</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm mor? </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Mor?</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor âŸ¶ Mor âŸ¶ Mor? </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The question mark is on the optional side â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">opt_composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor? âŸ¶ Mor âŸ¶ Mor?</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[Î±, Î²] flatMap Î± ([z] z âˆ˜ Î²)</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆ˜?</span><span class="w"> </span><span class="si">1</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The question mark is on the optional side â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">composition_opt</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor âŸ¶ Mor? âŸ¶ Mor?</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[Î±, Î²] flatMap Î² ([z] Î± âˆ˜ z)</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">?âˆ˜</span><span class="w"> </span><span class="si">1</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// Object-less category theory according to</span>
<span class="cm">    https://arxiv.org/pdf/1602.01759.pdf âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ObjectLessCategory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Option </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ObjectLessComposition </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">associativity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î±: Mor, Î²: Mor, Î³: Mor}</span>
<span class=" -MMT_ObjectExpression">    âŠ¦ (Î± âˆ˜ Î²)â†“ âˆ§ (Î² âˆ˜ Î³)â†“ â‡’ (Î± âˆ˜? (Î² âˆ˜ Î³))â†“ âˆ§ ((Î± âˆ˜ Î²) ?âˆ˜ Î³)â†“ âˆ§ (Î± âˆ˜? (Î² âˆ˜ Î³)) â‰ ((Î± âˆ˜ Î²) ?âˆ˜ Î³)</span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existence_of_subcompositions1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î±: Mor, Î²: Mor, Î³: Mor} âŠ¦ (Î± âˆ˜? (Î² âˆ˜ Î³))â†“ â‡’ (Î± âˆ˜ Î²)â†“ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existence_of_subcompositions2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î±: Mor, Î²: Mor, Î³: Mor} âŠ¦ ((Î± âˆ˜ Î²) ?âˆ˜ Î³)â†“ â‡’ (Î² âˆ˜ Î³)â†“ </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">leftIdentity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m: Mor} Mor </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftIdentityAlternativeNotation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">leftIdentity </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">dom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightIdentity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m: Mor} Mor </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// notation &#39; 1 doesn&#39;t work with MMT&#39;s notation parser somehow </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightIdentityAlternativeNotation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightIdentity </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">cod</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_leftIdentityComposable</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î±: Mor} âŠ¦ (Î± âˆ˜ &#39;Î±)â†“ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ax_rightIdentityComposable</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î±: Mor} âŠ¦ (Î±&#39;&#39; âˆ˜ Î±)â†“ </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_leftIdentityNeutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î±: Mor, Î²: Mor} âŠ¦ (ifDefEq  (Î² âˆ˜ &#39;Î±) Î²) âˆ§ (ifDefEq  ((&#39;Î±) âˆ˜ Î²) Î²)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ax_rightIdentityNeutral</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î±: Mor, Î²: Mor} âŠ¦ (ifDefEq (Î² âˆ˜ (Î±&#39;&#39;)) Î²) âˆ§ (ifDefEq (Î±&#39;&#39; âˆ˜ Î²) Î²)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// {Î²: Mor} âŠ¦ (Î² âˆ˜ âŸœÎ²)â†“ â‡’ (Î² âˆ˜ âŸœÎ²) â‰¡ Î² â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">is_identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[Î±] âˆƒ[Î²] Î± â‰ dom Î² âˆ¨ Î± â‰ cod Î² </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Hom set between (dom Î±) and (cod Î²)</span>
<span class="cm">  hom: {Î±: Mor, Î²: Mor} tp â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// https://ncatlab.org/nlab/show/category#OneCollectionOfMorphisms âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">CategoryWithOneCollection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Option </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ObjectLessComposition </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor âŸ¶ tm obj </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cod</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor âŸ¶ tm obj </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">id</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm obj âŸ¶ Mor </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_dom_preserved</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f, g} âŠ¦ map (g âˆ˜ f) dom â‰¡ dom f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ax_cod_preserved</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f, g} âŠ¦ map (g âˆ˜ f) cod â‰¡ cod g </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_identities_dom_cod</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} âŠ¦ dom (id a) â‰ a âˆ§ cod (id a) â‰ a </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_comp_defined</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f, g} âŠ¦ cod f â‰ dom g â‡’ (g âˆ˜ f)â†“ </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_associativity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f, g, h} âŠ¦ (dom g â‰ cod f âˆ§ dom h â‰ cod g) â‡’ bothDefEq ((h âˆ˜ g) ?âˆ˜ f) (h âˆ˜? (g âˆ˜ f)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// https://ncatlab.org/nlab/show/category#AFamilyOfCollectionsOfMorphisms âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">CategoryWithHomSetsSFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">hom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{dom: tm obj, cod: tm obj} tp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Hom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm obj âŸ¶ tm obj âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b] tm (hom a b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">id</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Hom a a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compositionABC</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x, y, z} Hom x y âŸ¶ Hom y z âŸ¶ Hom x z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">associativity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b, c, d, f: Hom a b, g: Hom b c, h: Hom c d} âŠ¦ h âˆ˜ (g âˆ˜ f) â‰ (h âˆ˜ g) âˆ˜ f</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_identityLeftNeutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b, f: Hom a b} âŠ¦ (id b) âˆ˜ f â‰ f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ax_identityRightNeutral</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b, f: Hom a b} âŠ¦ f âˆ˜ (id a) â‰ f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// view blah: ObjectLessCategory -&gt; CategoryWithHomSetsSFOL =</span>
<span class="cm">  include ?Option â™</span>
<span class="cm">  // mor = ? â™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Collection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoNeutral</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a âŸ¶ tm &amp;a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">S</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a âŸ¶ tm &amp;a âŸ¶ tm &amp;a</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x,xs] S x âˆ˜ xs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ListSpec</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Collection</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMonoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MultisetSpec</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ListSpec</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommutative</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteSetSpec</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultisetSpec</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoIdempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OptionSpec</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ListSpec</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoFirstNonNeutral</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lists</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?ListSpec </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">applyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">concat</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">e</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">nil</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">    </span><span class="vc">singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">list</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Multisets</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">multiset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?MultisetSpec </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">applyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Multiset</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">munion</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">e</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">mempty</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">    </span><span class="vc">singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">multiset</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteSets</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">finset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?FiniteSetSpec </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">applyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">FinSet</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">union</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">e</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">empty</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">    </span><span class="vc">singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">finset</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Options</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">option</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?OptionSpec </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">applyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Option</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">orelse</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">e</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">none</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">    </span><span class="vc">singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">option</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/powertypes</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CongruenceTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?EquivalenceND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Cong</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm Cong A  âŸ¶ tm A âŸ¶ tm A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â‰¡</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">mod</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ tm A âŸ¶ prop) âŸ¶ tm Cong A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,R,x,y: tm A} âŠ¦ x â‰¡ y mod (cong R) â‡” R x y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,C:tm Cong A} âŠ¦ C â‰ cong [x,y] xâ‰¡y mod C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">cong_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, C: tm Cong A, x} âŠ¦ xâ‰¡x mod C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong_sym</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, C: tm Cong A, x, y} âŠ¦ xâ‰¡y mod C âŸ¶ âŠ¦ yâ‰¡x mod C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong_trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, C: tm Cong A, x,y,z} âŠ¦ xâ‰¡y mod C âŸ¶ âŠ¦ yâ‰¡z mod C âŸ¶  âŠ¦ xâ‰¡z mod C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeOperator</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyType</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">&amp;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoFunctor</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyFun</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} (tm a âŸ¶ tm b) âŸ¶ tm &amp;a âŸ¶ tm &amp;b</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyId</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,xs: tm &amp;a} âŠ¦ xs map ([x] x) â‰ xs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyComp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,f:tm a âŸ¶ tm b, g: tm b âŸ¶ tm c, xs: tm &amp;a} âŠ¦ xs map f map g â‰ xs map [x] g (f x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?HOLND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Category</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">hom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">obj âŸ¶ obj âŸ¶ tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Hom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">obj âŸ¶ obj âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] tm (hom a b)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Hom a a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c} Hom a b âŸ¶ Hom b c âŸ¶ Hom a c</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">neutLeft</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,f:Hom a b} âŠ¦ (id a);f â‰ f</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutRight</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,f:Hom a b} âŠ¦ f;(id b) â‰ f</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d, f:Hom a b, g:Hom b c, h:Hom c d} âŠ¦ f;(g;h) â‰ (f;g);h</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T View currently not total âš</span><span class="w"></span>
<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">CategoryOfTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Category</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?HOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">obj</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">hom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] aâ†’b</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] Î»[x]x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,c,f,g] Î»[x] g@(f@x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalEndoFunctor</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fmap</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm aâ†’b âŸ¶ tm &amp;aâ†’&amp;b</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">fmap</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fmapApply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm aâ†’b âŸ¶ tm &amp;a âŸ¶ tm &amp;b</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,f,x] (fmap f)@x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;$&gt;</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fmapId</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} âŠ¦ fmap (id a) â‰ id (&amp;a)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fmapComp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,f:tm aâ†’b,g:tm bâ†’c} âŠ¦ fmap (f;g) â‰ (fmap f);(fmap g)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Remaining implementation is missing</span>
<span class="cm">  realize ?EndoFunctorâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// applyFun = [a,b,f:tm a âŸ¶ tm b,x] (fmap Î» f) @ xâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoMagma</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoFunctor</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm &amp;a âŸ¶ tm &amp;a âŸ¶ tm &amp;a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x,y,z:tm &amp;a} âŠ¦ (xâˆ˜y)âˆ˜z â‰ xâˆ˜(yâˆ˜z)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assocR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x,y,z:tm &amp;a} âŠ¦ xâˆ˜(yâˆ˜z) â‰ (xâˆ˜y)âˆ˜z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x,y,z] assoc sym</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">assoc4</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{a,w,x,y,z:tm &amp;a} âŠ¦ ((wâˆ˜x)âˆ˜y)âˆ˜z â‰ wâˆ˜(xâˆ˜(yâˆ˜z))</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[a,w,x,y,z] trans3 (assoc congT [u]uâˆ˜z) assoc (assoc congT [u]wâˆ˜u)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,w,x,y,z:tm &amp;a} âŠ¦ wâˆ˜(xâˆ˜(yâˆ˜z)) â‰ ((wâˆ˜x)âˆ˜y)âˆ˜z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,w,x,y,z] assoc4 sym</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v,w,x,y,z:tm &amp;a} âŠ¦ (((vâˆ˜w)âˆ˜x)âˆ˜y)âˆ˜z â‰ vâˆ˜(wâˆ˜(xâˆ˜(yâˆ˜z)))</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,v,w,x,y,z] trans4 (assoc4 congT [u]uâˆ˜z) assoc</span>
<span class=" -MMT_ObjectExpression">                              (assoc congT [u]vâˆ˜u) (assoc congT [u]vâˆ˜(wâˆ˜u))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x,y:tm &amp;a} âŠ¦ xâˆ˜y â‰ yâˆ˜x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoNeutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">e</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm &amp;a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:tm &amp;a} âŠ¦ eâˆ˜x â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:tm &amp;a} âŠ¦ xâˆ˜e â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoIdempotent</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:tm &amp;a} âŠ¦ xâˆ˜x â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoFirstNonNeutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoNeutral</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">firstNonNeutral</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x,y:tm &amp;a} (âŠ¦ xâ‰e âŸ¶ â†¯) âŸ¶ âŠ¦ xâˆ˜y â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoNeutral</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoCommSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommutative</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoBand</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoIdempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoCommMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMonoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoSemilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoBand</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommSemigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoBoundedSemilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoSemilattice</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommMonoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?HOLND</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Applicative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a âŸ¶ tm &amp;a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">pure</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">splat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm &amp;(aâ†’b) âŸ¶ tm &amp;a âŸ¶ tm &amp;b</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;*&gt;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,X:tm &amp;a} âŠ¦ pure (id a) &lt;*&gt; X â‰ X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">homomorphism</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,f:tm aâ†’b,x} âŠ¦ pure f &lt;*&gt; pure x â‰ pure (f@x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">interchange</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,F:tm &amp;(aâ†’b), x} âŠ¦ F &lt;*&gt; pure x â‰ pure (applyTo x) &lt;*&gt; F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,F:tm &amp;(aâ†’b),G:tm &amp;(bâ†’c),X} âŠ¦ G &lt;*&gt; (F &lt;*&gt; X) â‰ pure (Î»[f]Î»[g]f;g) &lt;*&gt; F &lt;*&gt; G &lt;*&gt; X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// The remaining implementation is missing â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realize ?InternalEndoFunctorâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// fmap = [a,b,f] Î»[X] pure f &lt;*&gt; Xâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?CategoryOfTypes</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monad</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Return</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a âŸ¶ tm &amp;a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Return</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Bind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm &amp;a âŸ¶ (tm a âŸ¶ tm &amp;b) âŸ¶ tm &amp;b</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&gt;&gt;=</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">identLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,f:tm a âŸ¶ tm &amp;b,x} âŠ¦ Return x &gt;&gt;= f â‰ f x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">identRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,X: tm &amp;a} âŠ¦ X &gt;&gt;= ([x] Return x) â‰ X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,f:tm a âŸ¶ tm &amp;b, g:tm b âŸ¶ tm &amp;c,X} âŠ¦ X &gt;&gt;= f &gt;&gt;= g â‰ X &gt;&gt;= [x] (f x) &gt;&gt;= g</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// The remaining implementation is missing â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realize ?EndoFunctorâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// applyFun = [a,b,f,X] X &gt;&gt;= [x] Return (f x)â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalMonad</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">return</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm aâ†’&amp;a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm &amp;aâ†’(aâ†’&amp;b)â†’&amp;b</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">laws</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Monad </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">Return</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x] (return a) @ x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Return</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">Bind</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,X,F] (bind a b) @ X @ (Î» F)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&gt;&gt;=</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The remaining implementation is missing â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realize ?Applicativeâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// pure = [a,x] Return xâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// splat = [a,b,F,X] F &gt;&gt;= [f] X &gt;&gt;= [x] Return (f@x)â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// Assignments to neutrality and associativity axioms missing</span>
<span class="cm">// view KleisliCat : ?Category â†’ ?InternalMonad =</span>
<span class="cm">  obj = tpâ™</span>
<span class="cm">  hom = [a,b] aâ†’&amp;bâ™</span>
<span class="cm">  id = [a] return aâ™</span>
<span class="cm">  comp = [a,b,c,f,g] Î»[x] Return x &gt;&gt;= ([x]f@x) &gt;&gt;= ([y]g@y)â˜# 4 &gt;=&gt; 5 prec 50â™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%Râ†’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a:tp] a â†’ a â†’ a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">depfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ tp) âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î </span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpfun</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] Î  [x: tm A] B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftDependentFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">softfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ (term âŸ¶ tp) âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î </span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simplambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A âŸ¶ tm B) âŸ¶ tm A â†’ B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpapply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A â†’ B âŸ¶ tm A âŸ¶ tm B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpbeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A âŸ¶ tm B, X} âŠ¦ (Î» F) @ X â‰ F X</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// should be an extra notation for simpapplyâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm aâ†’b âŸ¶ (tm a âŸ¶ tm b)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,f] [x] f@x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyTo</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm a âŸ¶ tm (aâ†’b)â†’b</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,x] Î»[f]f@x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">applyTo</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">deplambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ({x: tm A} tm B x) âŸ¶ tm Î  B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">depapply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm Î  B âŸ¶ {x: tm A} tm B x </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">depbeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F:{x:tm A} tm B x, X} âŠ¦ (Î» F) @ X â‰ F X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// realize ?SimpleFunctionsâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// simplambda = [A,B,F] Î»[x:tm A] F xâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// simpapply = [A,B,F,X] F @ Xâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// simpbeta = [A,B,F,X] depbetaâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term âŸ¶ term) âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">beta</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,X} âŠ¦ (Î» F) @ X â‰ F X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedSimpleFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F} ({x} âŠ¦ xâ¦‚A âŸ¶ âŠ¦ (F x)â¦‚B) âŸ¶ âŠ¦ Î» F â¦‚ A â†’ B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedDependentFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftDependentFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F} ({x} âŠ¦ xâ¦‚A âŸ¶ âŠ¦ (F x)â¦‚(B x)) âŸ¶ âŠ¦ Î» F â¦‚ Î  A B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionsEta</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F:tm A â†’ B} âŠ¦ (Î»[x] F @ x) â‰ F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctionsEta</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, F:tm Î [x:tm A] B x} âŠ¦ (Î»[x] F @ x) â‰ F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedFunctionsEta</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} âŠ¦ (Î»[x] F @ x) â‰ F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F,G:tm A â†’ B} ({x} âŠ¦ F@x â‰ G@x) âŸ¶ âŠ¦ Fâ‰G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctionsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, F,G:tm Î [x:tm A] B x} ({x} âŠ¦ F@x â‰ G@x) âŸ¶ âŠ¦ Fâ‰G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SofttypedFunctionsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ({x} âŠ¦ F@x â‰ G@x) âŸ¶ âŠ¦ Fâ‰G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">diagops</span><span class="w"> </span><span class="l l-URI">scala://diagops.latin2</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Declare operator constants</span>

<span class="cm">   Use an empty meta theory! E.g. if we used LF as a meta theory the notation</span>
<span class="cm">   would be parsed as LF-y.</span>
<span class="cm">âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeTheoryDiagramOperatorsSyntax</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">single_typeindexifier</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SINGLE</span><span class="w"> </span><span class="ss">TYPEINDEXIFY</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">multi_typeindexifier</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">MULTI</span><span class="w"> </span><span class="ss">TYPEINDEXIFY</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeTheoryDiagramOperatorsSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://cds.omdoc.org/urtheories?ModExp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">diagops?ComputeSingleTypeIndexed </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">diagops?ComputeMultiTypeIndexed </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeTheoryDiagramOperators</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeTheoryDiagramOperatorsSyntax </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeTheoryDiagramOperatorsSemantics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// theory TestMagma2 : ?TestMagmaMeta2 =</span>
<span class="cm">  U: tp â™</span>
<span class="cm">  op: tm U âŸ¶ tm U âŸ¶ tm U â˜ # 1 âˆ˜ 2 â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">// diagram TestEndoMagmaSingle : ?TypeTheoryDiagramOperators := SINGLE TYPEINDEXIFY ?TestMagma2 âš</span><span class="w"></span>
<span class="cm">// diagram TestEndoMagmaMulti : ?TypeTheoryDiagramOperators := MULTI TYPEINDEXIFY ?TestMagma2 âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/powertypes</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">rules:?MMTURILexer</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?TypedEqualityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?EquivalenceND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">power</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â„˜</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A  âŸ¶ tm â„˜A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">filter</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ prop) âŸ¶ tm â„˜A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">filter</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,x: tm A} âŠ¦ x âˆˆ filter P â‡” P x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S:tm â„˜A} âŠ¦ S â‰ filter[x]xâˆˆS</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">filterI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,x: tm A} âŠ¦ P x âŸ¶ âŠ¦ x âˆˆ filter P</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  				</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,x,p] compute equivEr p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">filterE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,x: tm A} âŠ¦ x âˆˆ filter P âŸ¶ âŠ¦ P x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">filterE</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  				</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,x,p] compute equivEl p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Map</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?ConjunctionND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?TypedExistentialQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">map</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A âŸ¶ tm B) âŸ¶ tm â„˜A âŸ¶ tm â„˜B</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,S] filter[b] âˆƒ[a] aâˆˆS âˆ§ (b â‰ f a)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mapI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,f:tm A âŸ¶ tm B,S,x} âŠ¦ x âˆˆ S âŸ¶ âŠ¦ f x âˆˆ S map f</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,S,x,p] filterI existsI x andI p refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mapE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,f:tm A âŸ¶ tm B,S,x,C} âŠ¦ x âˆˆ S map f âŸ¶ ({a} âŠ¦ aâˆˆS âŸ¶ âŠ¦ x â‰ f a âŸ¶ âŠ¦C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,S,x,C,p,q] p filterE existsE [a,r] q a (r andEl) (r andEr)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Extensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?TypedUniversalQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">extensionality</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T:tm â„˜A} âŠ¦(âˆ€[x:tm A] xâˆˆS â‡” xâˆˆT) âŸ¶ âŠ¦ Sâ‰T</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">extensionalityI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T:tm â„˜A} ({x}âŠ¦xâˆˆSâŸ¶âŠ¦xâˆˆT) âŸ¶ ({x}âŠ¦xâˆˆTâŸ¶âŠ¦xâˆˆS) âŸ¶ âŠ¦ Sâ‰T</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,f,g] extensionality (forallI [x] equivI ([p] f x p) ([q] g x q))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eq_in_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} âŠ¦ Sâ‰T âŸ¶ âŠ¦ xâˆˆS âŸ¶ âŠ¦ xâˆˆT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p,q] p congP ([u]xâˆˆu) q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eq_in_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} âŠ¦ Sâ‰T âŸ¶ âŠ¦ xâˆˆT âŸ¶ âŠ¦ xâˆˆS</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p,q] p sym congP ([u]xâˆˆu) q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteSets</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?DisjunctionND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm â„˜A</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x] filter [u] uâ‰x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">%</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x: tm A} âŠ¦ x âˆˆ %x</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x] filterI refl</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">singletonE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y: tm A} âŠ¦ x âˆˆ %y âŸ¶ âŠ¦ xâ‰y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">uopair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm A âŸ¶ tm â„˜A</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y] filter [u]uâ‰x âˆ¨ uâ‰y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,,</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairI_left</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y: tm A} âŠ¦ x âˆˆ x,,y</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y] filterI (refl orIl)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairI_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y: tm A} âŠ¦ y âˆˆ x,,y</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y] filterI (refl orIr)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y,u:tm A,C} âŠ¦ u âˆˆ x,,y âŸ¶ (âŠ¦uâ‰x âŸ¶ âŠ¦ C) âŸ¶ (âŠ¦uâ‰y âŸ¶ âŠ¦ C) âŸ¶ âŠ¦C</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,u,C,p,q,r] p filterE orE q r</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subset</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Extensionality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?ImplicationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">subset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm â„˜A âŸ¶ tm â„˜A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w">	</span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] âˆ€[x] xâˆˆS â‡’ xâˆˆT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŠ†</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">subsetI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T} ({x: tm A} âŠ¦xâˆˆS âŸ¶ âŠ¦ xâˆˆT) âŸ¶ âŠ¦ SâŠ†T</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,f] forallI [x] impI [p] f x p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subsetE</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} âŠ¦ SâŠ†T âŸ¶ âŠ¦ xâˆˆS âŸ¶ âŠ¦ xâˆˆT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p,q] p forallE x impE q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S:tm â„˜A} âŠ¦ SâŠ†S</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] subsetI [x,p]p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,R,S,T:tm â„˜A} âŠ¦ RâŠ†S âŸ¶ âŠ¦ SâŠ†T âŸ¶ âŠ¦ RâŠ†T</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,R,S,T,p,q] subsetI [x,r] subsetE q (subsetE p r)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T:tm â„˜A} âŠ¦ SâŠ†T âŸ¶ âŠ¦ TâŠ†S âŸ¶ âŠ¦ Sâ‰T</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,p,q] extensionalityI ([x,r] subsetE p r) ([x,r] subsetE q r)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FullSet</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?TruthND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">full</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm â„˜A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] filter [x] true</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="ss">fullset</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fullI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x} âŠ¦ x âˆˆ full A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  		  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x] filterI trueI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EmptySet</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?FalsityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm â„˜A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] filter [x] false</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">emptyE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x} âŠ¦ x âˆˆ empty A âŸ¶ â†¯</span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,p] p filterE falseE</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  			 </span><span class="p">#</span><span class="w"> </span><span class="ss">emptyE</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Complement</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?NegationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm â„˜A âŸ¶ tm â„˜A </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] filter [x] Â¬ xâˆˆS </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">complI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,x:tm A} (âŠ¦xâˆˆS âŸ¶ â†¯) âŸ¶ âŠ¦ xâˆˆâˆS</span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,x,p] filterI notI p</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  			 </span><span class="p">#</span><span class="w"> </span><span class="ss">complI</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">complE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,x:tm A} âŠ¦ xâˆˆâˆS âŸ¶ âŠ¦ xâˆˆS âŸ¶ â†¯</span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,x,p,q] p filterE notE q </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">complE</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Intersection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?ConjunctionND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">inter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm â„˜A âŸ¶ tm â„˜A âŸ¶ tm â„˜A</span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  			</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] filter [x] xâˆˆS âˆ§ xâˆˆT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  			</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆ©</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">interEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} âŠ¦ x âˆˆ Sâˆ©T âŸ¶ âŠ¦ xâˆˆS</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  				 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T, x, p] p filterE andEl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">interEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} âŠ¦ x âˆˆ Sâˆ©T âŸ¶ âŠ¦ xâˆˆT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  				 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p] p filterE andEr</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">interI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} âŠ¦ xâˆˆS âŸ¶ âŠ¦ xâˆˆT âŸ¶ âŠ¦ x âˆˆ Sâˆ©T</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  				 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p,q] filterI andI p q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Union</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?DisjunctionND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm â„˜A âŸ¶ tm â„˜A âŸ¶ tm â„˜A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  				</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] filter [x] xâˆˆS âˆ¨ xâˆˆT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  				</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆª</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unionIl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} âŠ¦ xâˆˆS âŸ¶ âŠ¦ x âˆˆ SâˆªT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p] filterI (p orIl)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unionIr</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} âŠ¦ xâˆˆT âŸ¶ âŠ¦ x âˆˆ SâˆªT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p] filterI (p orIr)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unionE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A,C} âŠ¦ x âˆˆ SâˆªT âŸ¶ (âŠ¦xâˆˆSâŸ¶âŠ¦C) âŸ¶ (âŠ¦xâˆˆTâŸ¶âŠ¦C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,C,p,q,r] p filterE orE q r</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BigIntersection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?ImplicationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?TypedUniversalQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">biginter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm â„˜â„˜A âŸ¶ tm â„˜A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">    			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K] filter [x] âˆ€[S] SâˆˆK â‡’ xâˆˆS </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    			 </span><span class="p">#</span><span class="w"> </span><span class="ss">â‹‚</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">45</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">biginterI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,x:tm A} ({S}âŠ¦SâˆˆKâŸ¶âŠ¦xâˆˆS) âŸ¶ âŠ¦ xâˆˆâ‹‚K </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  				  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,x,f] filterI (forallI [S] impI [p] f S p)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">biginterE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,x:tm A,S} âŠ¦ xâˆˆâ‹‚K âŸ¶ âŠ¦SâˆˆK âŸ¶ âŠ¦xâˆˆS</span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  				  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,x,S,p,q] p filterE forallE S impE q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BigUnion</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?ConjunctionND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?TypedExistentialQuantificationND</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">bigunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm â„˜â„˜A âŸ¶ tm â„˜A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  				 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K] filter [x] âˆƒ [S] SâˆˆK âˆ§ xâˆˆS </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  				 </span><span class="p">#</span><span class="w"> </span><span class="ss">â‹ƒ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">45</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunionI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,S,x:tm A} âŠ¦ SâˆˆK âŸ¶ âŠ¦ xâˆˆS âŸ¶ âŠ¦ xâˆˆâ‹ƒK </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  				  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,S,x,p,q] filterI (existsI S (andI p q))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunionE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,x:tm A,C} âŠ¦ xâˆˆâ‹ƒK âŸ¶ ({S}âŠ¦SâˆˆKâŸ¶âŠ¦xâˆˆSâŸ¶âŠ¦C) âŸ¶ âŠ¦ C</span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">  				  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,x,C,p,f] p filterE existsE [S,rs] f S (rs andEl) (rs andEr)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Extensionality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subset</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FullSet</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EmptySet</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Complement</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Intersection</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BigIntersection</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BigUnion</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubsetRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">subset_full</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S} âŠ¦ S âŠ† full A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] subsetI [x,p] fullI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S} âŠ¦ empty A âŠ† S</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] subsetI [x,p] (emptyE p) inconE</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">subset_union_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm â„˜A} âŠ¦ S âŠ† S âˆª T</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] subsetI [x,p] unionIl p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_union_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm â„˜A} âŠ¦ T âŠ† S âˆª T</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] subsetI [x,p] unionIr p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_union_lub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,C: tm â„˜A} âŠ¦ S âŠ† C âŸ¶ âŠ¦ T âŠ† C âŸ¶ âŠ¦ S âˆª T âŠ† C</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,C,s,t] subsetI [x,st] unionE st ([xs] subsetE s xs) ([xt] subsetE t xt)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">subset_inter_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm â„˜A} âŠ¦ S âˆ© T âŠ† S</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] subsetI [x,p] interEl p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_inter_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm â„˜A} âŠ¦ S âˆ© T âŠ† T</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] subsetI [x,p] interEr p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_inter_glb</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,C: tm â„˜A} âŠ¦ C âŠ† S âŸ¶ âŠ¦ C âŠ† T âŸ¶ âŠ¦ C âŠ† S âˆ© T</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,C,s,t] subsetI [x,xc] interI (subsetE s xc) (subsetE t xc)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">subset_bigunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,S: tm â„˜A} âŠ¦ S âˆˆ K âŸ¶ âŠ¦ S âŠ† â‹ƒ K</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,S,p] subsetI [x,q] bigunionI p q</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">subset_bigunion_lub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,C: tm â„˜A} ({S} âŠ¦ S âˆˆ K âŸ¶ âŠ¦ S âŠ† C) âŸ¶ âŠ¦ â‹ƒ K âŠ† C</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,C,f] subsetI [x,p] bigunionE p [S,q,r] subsetE (f S q) r</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">subset_biginter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,S: tm â„˜A} âŠ¦ S âˆˆ K âŸ¶ âŠ¦ â‹‚ K âŠ† S</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,S,p] subsetI [x,q] biginterE q p</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">subset_biginter_glb</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,C: tm â„˜A} ({S} âŠ¦ S âˆˆ K âŸ¶ âŠ¦ C âŠ† S) âŸ¶ âŠ¦ C âŠ† â‹‚ K</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,C,f] subsetI [x,p] biginterI [S,q] subsetE (f S q) p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm â„˜A} âŠ¦ SâŠ†T âŸ¶ âŠ¦ âˆTâŠ†âˆS</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,p] subsetI [x,q] complI [r] complE q (subsetE p r)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ComplementRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubsetRules</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compl_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ(empty A) â‰ full A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] extensionalityI ([x,p] fullI) ([x,p] complI [q] emptyE q)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compl_full</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ(full A) â‰ empty A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] extensionalityI ([x,p] (complE p fullI) inconE) ([x,p] (emptyE p) inconE)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compl_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, S,T: tm â„˜A} âŠ¦ âˆ(SâˆªT) â‰ âˆS âˆ© âˆT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] extensionalityI</span>
<span class=" -MMT_ObjectExpression">                    ([x,p] interI (complI [q] complE p (unionIl q))</span>
<span class=" -MMT_ObjectExpression">                                  (complI [q] complE p (unionIr q))</span>
<span class=" -MMT_ObjectExpression">                    )</span>
<span class=" -MMT_ObjectExpression">                    ([x,p] complI [q,C] unionE q ([r] complE (interEl p) r inconE)</span>
<span class=" -MMT_ObjectExpression">                                                 ([r] complE (interEr p) r inconE)</span>
<span class=" -MMT_ObjectExpression">                    )</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">inter_compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S} âŠ¦ S âˆ© âˆS â‰ empty A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] extensionalityI ([x,p] (complE (interEr p) (interEl p)) inconE)</span>
<span class=" -MMT_ObjectExpression">                                      ([x,p] (emptyE p) inconE)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">compl_not</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,x:tm A} âŠ¦Â¬xâˆˆS âŸ¶ âŠ¦xâˆˆâˆS</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,x,p] complI [q] p notE q</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?PLND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">union_compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S} âŠ¦ S âˆª âˆS â‰ full A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] extensionalityI</span>
<span class=" -MMT_ObjectExpression">                   ([x,p] fullI)</span>
<span class=" -MMT_ObjectExpression">                   ([x,p] tnd orE ([q] unionIl q) ([q] unionIr (compl_not q)))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compl_tnd</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,x: tm A} âŠ¦ xâˆˆS âˆ¨ xâˆˆâˆS</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,x] (eq_in_right union_compl fullI) filterE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compl_inter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, S,T: tm â„˜A} âŠ¦ âˆ(Sâˆ©T) â‰ âˆS âˆª âˆT</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] extensionalityI</span>
<span class=" -MMT_ObjectExpression">                    ([x,p] compl_tnd orE ([q] compl_tnd orE ([r] complE p (interI q r) inconE) ([r] unionIr r)) ([r] unionIl r))</span>
<span class=" -MMT_ObjectExpression">                    ([x,p] unionE p ([q] subsetE (subset_compl subset_inter_left) q)</span>
<span class=" -MMT_ObjectExpression">                                    ([q] subsetE (subset_compl subset_inter_right) q)</span>
<span class=" -MMT_ObjectExpression">                    )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compl_compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, S:tm â„˜A} âŠ¦ âˆâˆS â‰ S</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] extensionalityI ([x,p] compl_tnd orE ([q] q) ([q] complE p q inconE)) ([x,p] complI [q] complE q p)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerSFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜latin:/?SFOLEQND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FiniteSets</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Map</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubsetRules</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ComplementRules</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PredicateSubtypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubtypeInjections</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">predsub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ prop) âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â¦ƒ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â¦„</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10050</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P, x:tm A}  âŠ¦ P x âŸ¶ tm â¦ƒPâ¦„</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">predsub_sub</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P: tm A âŸ¶ prop} âŠ¦ â¦ƒPâ¦„ âª½ A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">predsub_prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P: tm A âŸ¶ prop, x: tm â¦ƒPâ¦„} âŠ¦ P (xâ†‘predsub_sub)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleProductTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Ã—</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentProductTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">depprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ tp) âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î£</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?SimpleProductTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpprod</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] Î£ [x: tm A] B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftDependentProductTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">softprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ (term âŸ¶ tp) âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î£</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleProductTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simppair</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A âŸ¶ tm B âŸ¶ tm A Ã— B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simppi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A Ã— B âŸ¶ tm A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â‚</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simppi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A Ã— B âŸ¶ tm B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â‚‚</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compute1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a:tm A,b:tm B} âŠ¦ (a,b)â‚ â‰ a</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compute2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a:tm A,b:tm B} âŠ¦ (a,b)â‚‚ â‰ b</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentProductTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Transport</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">deppair</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, a: tm A} tm B a âŸ¶ tm Î£ B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">deppi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B: tm A âŸ¶ tp} tm Î£ B âŸ¶ tm A </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â‚</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">deppi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, u: tm Î£ [x: tm A] B x} tm B (uâ‚)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â‚‚</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">compute1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, a: tm A, b} âŠ¦ ((a,b):tm Î£ B)â‚ â‰ a</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// compute2 : {A, B: tm A âŸ¶ tp, a, b} âŠ¦ (a,b: tm Î£ B)â‚‚â†‘(compute1 congTp B) â‰ bâ˜role Simplifyâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pair</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‚</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‚‚</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">compute1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} âŠ¦ (a,b)â‚ â‰ a</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compute2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} âŠ¦ (a,b)â‚‚ â‰ b</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedSimpleProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedProducts</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleProductTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a,b} âŠ¦ aâ¦‚A âŸ¶ âŠ¦ bâ¦‚B âŸ¶ âŠ¦ (a,b) â¦‚ A Ã— B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedDependentProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedProducts</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftDependentProductTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a,b} âŠ¦ aâ¦‚A âŸ¶ âŠ¦ bâ¦‚(B a) âŸ¶ âŠ¦ (a,b) â¦‚ Î£ A B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleProductsExpand</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleProducts</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,u:tm A Ã— B} âŠ¦ (uâ‚,uâ‚‚) â‰ u</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentProductsExpand</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentProducts</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, u:tm Î£[x:tm A] B x} âŠ¦ (uâ‚,uâ‚‚) â‰ u</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedProductsExpand</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedProducts</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{u} âŠ¦ (uâ‚,uâ‚‚) â‰ u</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleProductsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleProducts</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,u,v:tm A Ã— B} âŠ¦ uâ‚â‰vâ‚ âŸ¶ âŠ¦ uâ‚‚â‰vâ‚‚ âŸ¶ âŠ¦ uâ‰v</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentProductsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentProducts</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,u,v:tm Î£[x:tm A] B x} {p: âŠ¦ uâ‚â‰vâ‚} âŠ¦ uâ‚‚â†‘(p congTp B)â‰vâ‚‚ âŸ¶ âŠ¦ uâ‰v</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedProductsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedProducts</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{u,v} âŠ¦ uâ‚ â‰ vâ‚ âŸ¶ âŠ¦ uâ‚‚â‰vâ‚‚ âŸ¶ âŠ¦ uâ‰v</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">Strings</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">string</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize string rules/api/uom?StandardString</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">concat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string âŸ¶ string âŸ¶ string</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize concat rules/api/uom?StringOperations/Concat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;test&quot;</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CTTQE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Strings</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UndefinedTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">Quotation</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Îµ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize (tm Quotation) rules/api/uom?TermLiteral</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">quote</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŒˆ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŒ‰</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10050</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">eval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Îµ âŸ¶ {a:tp} tm a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŸ§</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10050</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">const</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string âŸ¶ tp âŸ¶ tm Îµ</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">const</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">var</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string âŸ¶ tp âŸ¶ tm Îµ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">application</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Îµ âŸ¶ tm Îµ âŸ¶ tm Îµ</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">app</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">abstraction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string âŸ¶ tp âŸ¶ tm Îµ âŸ¶ tm Îµ</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">abs</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">quotation</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Îµ âŸ¶ tm Îµ</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">quo</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// rule ComputeApplyâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Example</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CTTQE</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">tpeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EqualityND </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">term</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">equal</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰›</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w">   </span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Transport</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">congTp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, X,Y} âŠ¦ Xâ‰Y âŸ¶ {B: tm A âŸ¶ tp} âŠ¦ B X â‰› B Y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">congTp</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">transport</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} âŠ¦ A â‰› B âŸ¶ tm A âŸ¶ tm B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">â†‘</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">70</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">transport_refl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X: tm A} âŠ¦ Xâ†‘tpeq/refl â‰ X</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Doesn&#39;t typecheck:</span>
<span class="cm">  transport_trans: {A,B,C, X: tm A, p:âŠ¦ A â‰› B, q: âŠ¦ B â‰› C} âŠ¦ Xâ†‘pâ†‘q â‰ Xâ†‘(tpeq/eq/trans p q)â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TypeErasTerms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TypeErasEquality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?SoftTypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeErasTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y] xâ‰y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// View currently not total</span>
<span class="cm">view TypeErasSimpleFunctions : ?SimpleFunctions â†’ ?SoftTypedSimpleFunctions =</span>
<span class="cm">  include ?TypeErasTermsâ™</span>
<span class="cm">  include ?TypeErasEqualityâ™</span>
<span class="cm">  simpfun = [A,B] A â†’ Bâ™</span>
<span class="cm">  simplambda = [A,B,F] Î» Fâ™</span>
<span class="cm">  simpapply = [A,B,F,X] F @ Xâ™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">// View currently not total</span>
<span class="cm">view TypeErasDependentFunctions : ?DependentFunctions â†’ ?SoftTypedDependentFunctions =</span>
<span class="cm">  include ?TypeErasTermsâ™ </span>
<span class="cm">  include ?TypeErasEqualityâ™</span>
<span class="cm">  depfun = [A,B] Î  A Bâ™</span>
<span class="cm">  deplambda = [A,B,F] Î» Fâ™</span>
<span class="cm">  depapply = [A,B,F,X] F @ Xâ™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UndefinedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â†“</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">70</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">strict_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰š</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UndefinedTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â†“</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">70</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">strict_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰š</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UndefinedSoftTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ tp âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â†“</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Coproducts</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Coproducts.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">Coprod</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">â¨</span><span class="si">â€¦</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">inl</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â†ªl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">inr</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">râ†©</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">coprodmatch</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">match</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="ss">|</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">%I5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">coprodmatch2</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">match</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="ss">|</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9001</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FuncaddSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">Addfunc</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">âŠ•</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CoprodTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?inlTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?inrTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MatchTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MatchComp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// rule rules?MatchEquality â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CoprodSubType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedCoproduct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?TermsTypesKinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">FuncaddRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AddFuncComp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFCoprod</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FuncaddSymbol </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FuncaddRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedCoproduct </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Datatypes</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://datatypes.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ListSymbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">ListType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">nil</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">ls</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ls</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">append</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">++</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">map</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ListRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ListTypeRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ListVariance </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ListCheckRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AppendType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MapType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MapComp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFLists</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ListSymbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ListRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LetSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">Let</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Let</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LetRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LetRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFLet</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LetSymbol </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LetRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">substitute</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">sub</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFSub</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubSymbol </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Equality</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Equality.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">eqtype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">on</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">refl</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">ind</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ind</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V3</span><span class="w"> </span><span class="ss">âŸ¹</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EqFormation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ReflIntro </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EqIndElim </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EqIndComp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?TermsTypesKinds </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://FiniteTypes.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LambdaPi </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">emptyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">emptyFun</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ…f</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-900</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">UNIT</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">unite</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â˜…</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?Typed </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?Kinded </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EmptyTypeFormation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitTypeFormation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitIntro </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EmptyElim </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitIrrelevance </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubTypedRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EmptySub </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EmptyFunComputation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EnumSymbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">ENUM</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ENUM</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">CASE</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">CASE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EnumRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?NatLiteralsOnly </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubTypedRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EnumFormation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CaseIntroduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CaseTyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CaseSubtyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EnumCoprodRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EnumRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://gl.mathhub.info/MMT/LFX/Coproducts?TypedCoproduct </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EnumComputation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CaseComputation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DefinedUnitRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitComputation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitElemComputation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFFiniteBase</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EnumSymbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DefinedUnitRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EnumRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?Ded </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?NatRels </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFFinite</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFFiniteBase </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EnumCoprodRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://gl.mathhub.info/MMT/LFX/Coproducts?LFCoprod </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/IntersectionTypes</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://LFIntersectionTypes.LFX.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfrules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">typeintersection</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">âŠ“</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9999</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?TermsTypesKinds </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntersectionTypeRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntersectionTyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntersectionSubtypeRuleLeft </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntersectionSubtypeRuleRight </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFIntersectionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LambdaPi </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?PiType</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?PiTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule lfrules?ApplyTermâ™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?LambdaTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Beta</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Extensionality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?PiCongruence</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?LambdaCongruence</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Solve</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?SolveType</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?TheoryTypeWithLF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?PiIntroduction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?ForwardPiElimination</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?BackwardPiElimination</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?LFHOAS</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ApplyIntersection </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Records</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Records.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules2</span><span class="w"> </span><span class="l l-URI">scala://LFX.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://cds.omdoc.org/urtheories?ModExp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">Rectype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{&#39;</span><span class="w"> </span><span class="si">L1Td</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">&#39;}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Recexp</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">[&#39;</span><span class="w"> </span><span class="si">L1Dd</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">&#39;]</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-12000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Getfield</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">L2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ModelsOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Mod</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// ModelsOfUnary # Mod 1 prec -999 â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// AsInstance # AsInstance 1 prec -1000 â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">RecordMerge</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">âŠ•</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?GetFieldComp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule rules?GetFieldInType â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?GetfieldTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecEquality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecExpCongruence </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecordExpTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecordTypeTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecSubtype </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecTypeCheck </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecTypeCongruence </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CanonicalSolution</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule rules?ModelsRule â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ModelsInference </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ModelsChecking </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Instance </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ExtendInstance </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecordMergeInference </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MergeCheck </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedRecords</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?TermsTypesKinds </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFRecords</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedRecords </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Sigma.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">Sigma</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">Î£</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">Product</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">Ã—</span><span class="si">â€¦</span><span class="w">           </span><span class="k">prec</span><span class="w">  </span><span class="mi">-9990</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">Tuple</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¨</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">âŸ©</span><span class="w">				</span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">Projl</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">Ï€l</span><span class="w"> </span><span class="si">1</span><span class="w">						</span><span class="k">prec</span><span class="w"> </span><span class="mi">-900</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">Projr</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">Ï€r</span><span class="w"> </span><span class="si">1</span><span class="w">						</span><span class="k">prec</span><span class="w"> </span><span class="mi">-900</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SigmaTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TupleTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection1Term </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection2Term </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SigmaType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SigmaEquality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TupleEquality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection1Beta </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection2Beta </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SigmaSubtype </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedSigma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?TermsTypesKinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFSigma</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSigma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Subtyping</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Subtyping.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PiRule</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFWithVariance</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PiRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtypeOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9996</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SubRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubUniverseRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubUniverseType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubtypeOfRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubtypeOfTypeRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFPowerTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubSymbol </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFWithVariance </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">JudgmentSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtypeJudge</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9995</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">JudgmentRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubJudgUniverseType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule rules?SubJudgRule â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFSubJudgment</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?JudgmentSymbol </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?JudgmentRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFWithVariance </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PredSubSymbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">predsubtp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¨</span><span class="w"> </span><span class="si">V1T</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŸ©</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10001</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">PredOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PredOf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">PredSubRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Predsubtype </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Predsubrule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PredsubTyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PredOfTerm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFPredSub</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PredSubSymbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PredSubRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFWithVariance </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">AllSubtypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// include ?SubSymbol â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// include ?SubRules â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?JudgmentSymbol </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?JudgmentRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PredSubSymbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PredSubRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFSubtyped</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSubtypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFWithVariance </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://TypedHierarchy.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lf</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">TypeLevel</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ğ’°</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">UnspecifiedTypeLevel</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ğ’°</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-999</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypeLevelUniverse </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypeLevelSubRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LevelType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedHierarchy</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://cds.omdoc.org/urtheories?ModExp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?Typed </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?Kinded </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?NatLiteralsOnly </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LevelComputation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFHierarchy</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedHierarchy </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?PLF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiHierarchy</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LambdaHierarchy</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Polymorphism</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PolymorphismLambda </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/WTypes</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://WTypes.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">wtype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">W</span><span class="w"> </span><span class="si">V1T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">sup</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sup</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">âŸ¹</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-8000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rec</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rec</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V3</span><span class="w"> </span><span class="ss">âŸ¹</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">6</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-8000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?WTypeFormation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SupIntroduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?WEquality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecElimination </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecComputation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// rule info.kwarc.mmt.LFX.WTypes.supEquality â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">WTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFW</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?WTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://gl.mathhub.info/MMT/LFX/Finite?LFFinite </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Inductive</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFW </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://gl.mathhub.info/MMT/LFX/Sigma?LFSigma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveDefs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Quote-Eval</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">Construction</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„°</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">quoteOp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŒœ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŒ</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">evalOp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|âŒœ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŒ|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1100</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">unquoteOp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŒ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŒŸ</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://foswiki.cs.uu.nl/foswiki/IFIP21/Goteborg/MMT-tutorial-final</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Types</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:tm A} âŠ¦ X = X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X,Y:tm A} âŠ¦ X = Y âŸ¶ âŠ¦ Y = X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X,Y,Z:tm A} âŠ¦ X = Y âŸ¶ âŠ¦ Y = Z âŸ¶ âŠ¦ X = Z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,X,Y,F:tm A âŸ¶ tm B} âŠ¦ X = Y âŸ¶ âŠ¦ (F X) = (F Y)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">STT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡’</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">abstract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A âŸ¶ tm B) âŸ¶ tm (A â‡’ B)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm (A â‡’ B) âŸ¶ tm A âŸ¶ tm B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A âŸ¶ tm B,X} âŠ¦ (Î» F) @ X = (F X)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Eta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?STT</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm (A â‡’ B)} âŠ¦ (Î» [x: tm A] (F @ x)) = F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?STT</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ext</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F,G: tm (A â‡’ B)} ({x: tm A} âŠ¦ F @ x = G @ x) âŸ¶ âŠ¦ F = G</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">ext</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//  view EtaExt : ?Eta -&gt; ?Extensionality =</span>
<span class="cm">  // include mmtid ?STTâ™</span>
<span class="cm">  eta = [A,B,F] ext [x] betaâ™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">List</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?STT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">nilOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm &lt;A&gt;</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">nil</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A âŸ¶ tm &lt;A&gt; âŸ¶ tm &lt;A&gt;</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fold</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm B âŸ¶ (tm A âŸ¶ tm B âŸ¶ tm B) âŸ¶ tm &lt;A&gt; âŸ¶ tm B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold_nil</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,N,C} âŠ¦ fold A B N C nil = N</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold_cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,N,C,X,L} âŠ¦ fold A B N C (X+L) = C X (fold A B N C L)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span>
<span class="w">  </span><span class="vc">map</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm (A â‡’ B) âŸ¶ tm &lt;A&gt; âŸ¶ tm &lt;B&gt;</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] fold A &lt;B&gt; nil ([a,bs] (f@a)+bs)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">append</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm &lt;A&gt; âŸ¶ tm &lt;A&gt; â‡’ &lt;A&gt;</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] fold A (&lt;A&gt; â‡’ &lt;A&gt;) (Î»[x]x) ([a,f] Î»[l]a+(f@l))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">flatten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm &lt; &lt;A&gt; &gt; âŸ¶ tm &lt;A&gt;</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] fold &lt;A&gt; &lt;A&gt; nil ([l,r] (append A l) @ r)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?STT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">operator</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">M</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm M A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">return</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm M A âŸ¶ tm (A â‡’ M B) âŸ¶ tm M B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">neutral_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm (A â‡’ M B)}{X: tm A} âŠ¦ (return X) &gt; F = F @ X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutral_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,m: tm M A} âŠ¦ m &gt; (Î» [x] return x) = m</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C, F: tm (A â‡’ M B), G: tm (B â‡’ M C),m: tm M A} âŠ¦ (m &gt; F) &gt; G = m &gt; (Î»[x]F @ x &gt; G)</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">ListMonad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Monad</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?List</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">operator</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] [x] x+nil</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bind</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][l,f] (flatten B) (map f l)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// neutral_left = ...â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// neutral_right = ...â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// assoc = ...â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MonadPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?STT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monad</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// more stuff hereâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/ijcar</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">../urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">natâŸ¶nat </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize nat  rules/api/uom?StandardNat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize zero rules/api/uom?Arithmetic/Zero</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize succ rules/api/uom?Arithmetic/Succ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">../urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">proof</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DHOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">../urtheories?LF</span><span class="w">  </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?ShallowPolymorphism</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a âŸ¶ a âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Double</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">double</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">double_zero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ double 0 = 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">double_succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ double(x&#39;) = (double x)&#39;&#39;</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TopologicalArgumentationTheory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">K</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop  âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â–¡</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">world</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">argument</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">attacks</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">argument âŸ¶ argument âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â†</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world âŸ¶ argument âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â€âˆˆ</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world âŸ¶ prop âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ§</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Fix</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">argument âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">holds_conj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,G} w âŠ§ F âŸ¶ w âŠ§ G âŸ¶ w âŠ§ F âˆ§ G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds_disj1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,G} w âŠ§ F âŸ¶ w âŠ§ F âˆ¨ G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds_disj2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,G} w âŠ§ G âŸ¶ w âŠ§ F âˆ¨ G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">holds_K</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F} ({v} v âŠ§ F) âŸ¶ w âŠ§ K F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds_box</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,T} w â€âˆˆ T âŸ¶ ({v} v â€âˆˆ T âŸ¶ v âŠ§ F) âŸ¶ w âŠ§ â–¡ F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds_B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,T} w â€âˆˆ T âŸ¶ Fix T âŸ¶ ({v} v â€âˆˆ T âŸ¶ v âŠ§ F) âŸ¶ w âŠ§ B F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   An abstraction over the rational numbers and the arithmetic operations.âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Numbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">sort</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort âŸ¶ type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} tm S âŸ¶ tm S âŸ¶ prop     </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (tm S âŸ¶ prop) âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class="w">  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ded</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w">  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">rat</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tmrat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm rat </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„š</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š     </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_</span><span class="si">0</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">%D</span><span class="si">0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">170</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">one</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š     </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_</span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">_0 &#39;</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">%D</span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">two</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š     </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">_1 &#39;</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">%D</span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">add</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sub</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neg</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š      </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">170</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Â·</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">155</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">div</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">155</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">exp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">160</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">power_example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded âˆ€x.âˆ€y.âˆ€z.x^(y+z)=x^yÂ·x^z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Simplification rules for the rational numbers. â™</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Numbers</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// addition â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">add_zero_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded _0 + x = x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">add_zero_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x + _0 = x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">add_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded x &#39; + y = (x+y)&#39;</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">add_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded x + y&#39; = (x+y)&#39;</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// subtraction â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">sub_add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded x-(y+z) = x-y-z  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sub_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x - _0 = x  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// negation  â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">neg_neg</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded -(-x) = x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neg_add</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded -(x+y) = -x + (-y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">neg_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded - _0 = _0 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// multiplication â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_zero_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded _0 Â· x = _0</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_zero_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x Â· _0 = _0</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_one_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded _1 Â· x = x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_one_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x Â· _1 = x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded x&#39;Â·y = x + x Â· y</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded xÂ·y&#39; = xÂ·y+y</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_add_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded (x+y)Â·z = xÂ·z+yÂ·z</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_add_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded xÂ·(y+z) = xÂ·y+xÂ·z</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_sub_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded (x-y)Â·z = xÂ·y-yÂ·z</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_sub_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded xÂ·(y-z) = xÂ·y-xÂ·z</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_neg_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded (-x)Â·y = -(xÂ·y)</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_neg_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded xÂ·(-y) = -(xÂ·y)</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// exponentiation â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x ^ _0 = _1</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_one</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x ^ _1 = x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_add</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded x^(y+z) = x^yÂ·x^z  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_exp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded x^(y^z) = x^(yÂ·z)  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">one_exp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded _1 ^ x = _1 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded (xÂ·y)^z = x^zÂ·y^z  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   A sort of natural numbers and a big sum operator with notations for parsing and presentation.âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Sums</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Numbers</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">nat</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tmnat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm nat </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„•</span><span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">incl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">170</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100000000</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">sum</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ (â„• âŸ¶ â„š) âŸ¶ â„š  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">#</span><span class="w"> </span><span class="ss">Î£</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">155</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">##</span><span class="w"> </span><span class="ss">Î£</span><span class="w"> </span><span class="ss">__</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">155</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sum_example</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded âˆ€m.âˆ€n. Î£ m to n ([i]$i)=($mÂ·($m+ _1)-$nÂ·($n+ _1))/ _2 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T regular bands and views between them</span>
<span class="cm">mostly following the wikipedia page on Bands</span>

<span class="cm">Notes: </span>
<span class="cm">- some names that were not given on Wikipedia are made up</span>
<span class="cm">- most views do not actually use (all of) the Band properties</span>
<span class="cm">- LeftX and RightX are stronger than X, not weaker</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">regular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ zâˆ˜xâˆ˜zâˆ˜yâˆ˜z â‰ zâˆ˜xâˆ˜yâˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ zâˆ˜xâˆ˜zâˆ˜y â‰ zâˆ˜xâˆ˜y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,z} âŠ¦ zâˆ˜xâˆ˜z â‰ zâˆ˜x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ xâˆ˜zâˆ˜yâˆ˜z â‰ xâˆ˜yâˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{y,z} âŠ¦ zâˆ˜yâˆ˜z â‰ yâˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T views for the three stages of regular band theories âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT leftregular1 [u]uâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2LeftRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT leftregular [u]uâˆ˜y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc5 (congT (trans3 assoc4R rightregular1 assoc) [u]zâˆ˜u) assoc4R</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2RightRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc4 (congT (trans assocR rightregular) [u] xâˆ˜u) assocR</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T normal bands âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">normal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ zâˆ˜(xâˆ˜y)âˆ˜z â‰ zâˆ˜(yâˆ˜x)âˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ zâˆ˜(xâˆ˜y) â‰ zâˆ˜(yâˆ˜x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ (xâˆ˜y)âˆ˜z â‰ (yâˆ˜x)âˆ˜z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T views for the diamond of normal band theories (with semilattices at the bottom) âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT leftnormal [u]uâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc (congT rightnormal [u]zâˆ˜u) assocR</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">RightCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT comm [u]zâˆ˜u</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT comm [u]uâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T views from regular to normal band theories âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// zxzy = zxzyzxzy = zx yz zxzy = zxy zx zy = zxy xz zy = zxy zxy = zxyâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (sym idempotent) _ idempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftRegular2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,z] trans4 assoc leftnormal assocR (congT idempotent [u]uâˆ˜x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// xzyz = xzyz xzyz = x yz zxzyz = xy zxzyz = xyz zx yz = xyz xyz = xyzâ™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (sym idempotent) _ idempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightRegular2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[y,z] trans3 rightnormal assoc (congT idempotent [u]yâˆ˜u)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T rectangular bands (the axioms here already imply idempotency)âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rectangular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ xâˆ˜yâˆ˜x â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// provable â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangularAny</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ xâˆ˜yâˆ˜z â‰ xâˆ˜z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftsingular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ xâˆ˜y â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightsingular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ xâˆ˜y â‰ y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   binary arithmetic âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Binary</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">num</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// the number 0â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">b</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// double, i.e., append the digit 0â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">db</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num âŸ¶ num</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‚€</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// double and increment, i.e., append the digit 1â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dbI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num âŸ¶ num</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‚</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num âŸ¶ num âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} n = n</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// successor and its rulesâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num âŸ¶ num</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ_zero</span><span class="p">:</span><span class="w">      </span><span class=" -MMT_ObjectExpression">b &#39; = b â‚ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ_db</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{n} n â‚€ &#39; = n â‚ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ_dbI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} n â‚ &#39; = n&#39;â‚€</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bâ‚â‚&#39; = bâ‚â‚€â‚€ </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// addition and its rulesâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num âŸ¶ num âŸ¶ num</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_zero_right</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} n + b = n               </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_zero_left</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{n} b + n = n               </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// these rules cannot be picked up by the SimplificationRuleGenerator yetâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_db_db</span><span class="p">:</span><span class="w">    </span><span class=" -MMT_ObjectExpression">{m,n} m â‚€ + n â‚€ = (m + n) â‚€   </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_db_dbI</span><span class="p">:</span><span class="w">   </span><span class=" -MMT_ObjectExpression">{m,n} m â‚€ + n â‚ = (m + n) â‚   </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_dbI_db</span><span class="p">:</span><span class="w">   </span><span class=" -MMT_ObjectExpression">{m,n} m â‚ + n â‚€ = (m + n) â‚   </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_dbI_dbI</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{m,n} m â‚ + n â‚ = ((m + n) &#39;)â‚€</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/epa</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// --------------------------- base languages --------------------------- âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Propositions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Proofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">â˜</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Terms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">term</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Types</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">of</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ tp âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â¦‚</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Kinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">kd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KindedTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kinds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kd âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">tf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tpk</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kd</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UntypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">         </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalPropositions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">typesAsObjects</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SoftTypedTerms </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">of</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">in</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">typesAsPredicates</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SoftTypedTerms </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">of</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,A] A X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// --------------------------- equality --------------------------- âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ x â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congP</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ x â‰ y âŸ¶ {P: term âŸ¶ prop} âŠ¦ P x âŸ¶ âŠ¦ P y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm A âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">refl</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x: tm A} âŠ¦ x â‰ x  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congP</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,  x,y} âŠ¦ x â‰ y âŸ¶ {P: tm A âŸ¶ prop} âŠ¦ P x âŸ¶ âŠ¦ P y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">congP</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">congT</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,x,y} âŠ¦ x â‰ y âŸ¶ {T: tm A âŸ¶ tm B} âŠ¦ T x  â‰  T y </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,x,y,p,T] p congP ([u] T x â‰ T u) refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">sym</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, x,y: tm A} âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">sym</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,p] p congP ([u]uâ‰x) refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, x,y,z: tm A} âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ x â‰ z</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">trans</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,z,p,q] q congP ([u]xâ‰u) p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// --------------------------- function types --------------------------- âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%Râ†’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">simplambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A âŸ¶ tm B) âŸ¶ tm A â†’ B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpapply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A â†’ B âŸ¶ tm A âŸ¶ tm B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpbeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A âŸ¶ tm B, X} âŠ¦ (Î» F) @ X â‰ F X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">depfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ tp) âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î </span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpfun</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] Î  [x: tm A] B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">deplambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ({x: tm A} tm B x) âŸ¶ tm Î  B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">depapply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm Î  B âŸ¶ {x: tm A} tm B x </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">depbeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F:{x:tm A} tm B x, X} âŠ¦ (Î» F) @ X â‰ F X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedEquality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term âŸ¶ term) âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">beta</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,X} âŠ¦ (Î» F) @ X â‰ F X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedSimpleFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F} ({x} âŠ¦ xâ¦‚A âŸ¶ âŠ¦ (F x)â¦‚B) âŸ¶ âŠ¦ Î» F â¦‚ A â†’ B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftDependentFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">softfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ (term âŸ¶ tp) âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î </span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedDependentFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftDependentFunctionTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F} ({x} âŠ¦ xâ¦‚A âŸ¶ âŠ¦ (F x)â¦‚(B x)) âŸ¶ âŠ¦ Î» F â¦‚ Î  A B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionsEta</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F:tm A â†’ B} âŠ¦ (Î»[x] F @ x) â‰ F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F,G:tm A â†’ B} ({x} âŠ¦ F@x â‰ G@x) âŸ¶ âŠ¦ Fâ‰G</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   A representation of homotopy type theory (HOTT) in MMT instantiated with LF-modulo.</span>
<span class="cm">     This is a Martin-LÃ¶f-style type theory with the univalence axiom.</span>
<span class="cm">     Simplification rules are used to offset artefacts produced by the representation.</span>
<span class="cm">     The representation follows the HOTT book (The Univalent Foundations Program, Institute for Advanced Study, Princeton, April 2013).âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOTT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// The levels of the universe hierarchy (essentially the natural numbers). â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">level</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">first</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">level </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">next</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">level âŸ¶ level </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// The syntactic categories: LF-types for the HOTT types and terms at each level. â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// tp L represents the types at level L. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">level âŸ¶ type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// univ L is the universe containing the types at level L. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">univ</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp (next L) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// if A:tp L, then tm A represents the terms of type A â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Equality judgments for types (at the same level) and terms (of the same type).</span>
<span class="cm">     These are registered as equality judgements by &quot;role Eq&quot;, which permits registering equality rules later. â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">tp_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L âŸ¶ tp L âŸ¶ type                  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L} tm A âŸ¶ tm A âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â‰¡</span><span class="w"> </span><span class="si">4</span><span class="w">  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The above encoding is not quite adequate</span>
<span class="cm">     (a) the cumulativity of the type hierarchy is not represented</span>
<span class="cm">     (b) the fact that every type at level L is also a term of type univ L is not captured. â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Up and up take care of (a): they move types and terms up in the hierarchy. â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">Up</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L âŸ¶ tp (next L) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Up</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">up</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L,A:tp L} tm A âŸ¶ tm (Up A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">up</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// shift and unshift take care of (b): they convert between types and terms. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">shift</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L âŸ¶ tm (univ L) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">shift</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unshift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tm (univ L) âŸ¶ tp L </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unshift</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Two equality axioms that make shift and unshift bijections.</span>
<span class="cm">     By registering them as simplification rules, the type checker becomes aware of the bijection. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">shift_unshift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L,A: tp L} tp_equal L (unshift (shift A)) A  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unshift_shift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L,A: tm univ L} (shift (unshift A)) â‰¡ A      </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// The usual rules for equality. Some rules are omitted (congruence and equality of types) â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, X:tm A} X â‰¡ X                             </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, X:tm A, Y: tm A} X â‰¡ Y âŸ¶ Y â‰¡ X            </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, X:tm A, Y: tm A, Z: tm A} X â‰¡ Y âŸ¶ Y â‰¡ Z âŸ¶ X â‰¡ Z  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The development of HOTT type theory is now straightforward.</span>
<span class="cm">     The following follows A.2 in the HOTT book.</span>
<span class="cm">     Only the constructors and rules needed to state the univalence axiom are given.â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Pi</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L} (tm A âŸ¶ tp L) âŸ¶ tp L                                 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î </span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A âŸ¶ tp L} ({x:tm A} tm (B x)) âŸ¶ tm Î  [x] B x   </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A âŸ¶ tp L} tm (Î  [x: tm A] B x) âŸ¶ {x} tm (B x)  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">arrow</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L âŸ¶ tp L âŸ¶ tp L </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] Î  [x: tm A] B  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‡’</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">id</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L} tm A â‡’ A  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A] Î» [x] x  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">id</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tp L, C: tp L} tm A â‡’ B âŸ¶ tm B â‡’ C âŸ¶ tm A â‡’ C  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B,C] [f,g] Î» [x:tm A] g @ (f @ x)  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Registering beta as a simplification rule has the effect that computation in HOTT is automated by MMT. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">beta</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tm A âŸ¶ tp L, F: {x: tm A} tm (B x), X: tm A} (Î» F) @ X â‰¡ (F X) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w">  </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A âŸ¶ tp L, F: tm (Î  [x: tm A] B x)} F â‰¡ Î» [x: tm A] F @ x  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="vc">Sigma</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L} (tm A âŸ¶ tp L) âŸ¶ tp L                                    </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î£</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pair</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A âŸ¶ tp L} {x:tm A} tm (B x) âŸ¶ tm Î£ [x] B x        </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pair</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi1</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A âŸ¶ tp L} tm (Î£ [x: tm A] B x) âŸ¶ tm A             </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">1</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi2</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A âŸ¶ tp L} {u:tm (Î£ [x: tm A] B x)} tm (B (pi1 u)) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">2</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prod</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L âŸ¶ tp L âŸ¶ tp L </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] Î£ [x: tm A] B  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">Ã—</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">conv_pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tm A âŸ¶ tp L, u: tm Î£ [x] B x} u â‰¡ pair (pi1 u) (pi2 u) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">            </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// conv_pi1 and conv_pi2 are registered as simplification rules in the same way as beta. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">conv_pi1</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tm A âŸ¶ tp L, X: tm A, Y: tm (B X)} pi1 (pair L A B X Y) â‰¡ X  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">            </span><span class="cm">//  We have to give the implicit arguments of pair here to aid type reconstruction. </span>
<span class="cm">                (A better solution might be Twelf&#39;s abstraction behavior that adds the {B} binder.)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">            </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that conv_pi2 only type-checks because conv_pi1 is used as a simplification rule. â™</span><span class="w">  </span>
<span class="w">  </span><span class="vc">conv_pi2</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tm A âŸ¶ tp L, X: tm A, Y: tm (B X)} pi2 (pair L A B X Y) â‰¡ Y  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">            </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// We omit the type constructors +, empty, unit, and nat. â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">ident</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L} tm A âŸ¶ tm A âŸ¶ tp L  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">7</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idrefl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, x:tm A, y: tm A} x â‰¡ y âŸ¶ tm x = y  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">idrefl</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">         </span><span class="cm">// The assumption x â‰¡ y is omitted in the HOTT book - derivable from congruence?</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idelim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L}</span>
<span class=" -MMT_ObjectExpression">           {C: {x: tm A, y: tm A, p: tm x = y} tp L}</span>
<span class=" -MMT_ObjectExpression">           {c: {z: tm A} tm (C z z (idrefl (refl z)))}</span>
<span class=" -MMT_ObjectExpression">           {a: tm A} {b: tm A} {p: tm a = b}</span>
<span class=" -MMT_ObjectExpression">           tm (C a b p) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">idelim</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idcomp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L}</span>
<span class=" -MMT_ObjectExpression">           {C: {x: tm A, y: tm A, p: tm x = y} tp L} </span>
<span class=" -MMT_ObjectExpression">           {c: {z: tm A} tm (C z z (idrefl (refl z)))}</span>
<span class=" -MMT_ObjectExpression">           {a: tm A}</span>
<span class=" -MMT_ObjectExpression">           tm (idelim C c a a (idrefl (refl a))) = (c a) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// An abbreviation for the identity type of two types (which requires converting the types to terms first). â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tident</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tp L} tp (next L)  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] (shift A) = (shift B) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">==</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Now the definitions of homotopy that lead to the univalence axiom. â™</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="cm">// Definition 2.4.1 â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">homotopy</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B} tm A â‡’ B âŸ¶ tm A â‡’ B âŸ¶ tp L</span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B,f,g] Î  [x: tm A] f @ x = g @ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">              </span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">âˆ¼</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">              </span>
<span class="w">  </span><span class="cm">// 2.4.10â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">isequiv</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tp L} tm A â‡’ B âŸ¶ tp L </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B,f] (Î£ [g: tm B â‡’ A] f âˆ˜ g âˆ¼ id B) Ã— (Î£ [h: tm B â‡’ A] h âˆ˜ f âˆ¼ id A) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">#</span><span class="w"> </span><span class="ss">isequiv</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">              </span>
<span class="w">  </span><span class="cm">// 2.4.11â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivalence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L âŸ¶ tp L âŸ¶ tp L  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] Î£ [f: tm A â‡’ B] isequiv f  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">              </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰ƒ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// We will need the reflexivity of homotopy below. â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that without beta as a simplification rule, this proof would have to use a complex subterm</span>
<span class="cm">     instead of (refl x).â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">â‰ƒ_refl_aux</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L} tm (id A) âˆ˜ (id A) âˆ¼ (id A)  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A] Î» [x: tm A] idrefl (refl x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">â‰ƒ_refl</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L} tm A â‰ƒ A  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A] pair (id A) (pair  </span>
<span class=" -MMT_ObjectExpression">                   (pair (id A) (â‰ƒ_refl_aux L A))</span>
<span class=" -MMT_ObjectExpression">                   (pair (id A) (â‰ƒ_refl_aux L A))</span>
<span class=" -MMT_ObjectExpression">                 )</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Lemma 2.10.1 â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// This only type-checks because unshift_shift is used as a simplification rule. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idtoeqv</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tp L} tm A == B â‡’ (Up (A â‰ƒ B)) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] Î» [P] idelim</span>
<span class=" -MMT_ObjectExpression">                  ([a: tm univ L, b: tm univ L, p: tm a = b] Up ((unshift a) â‰ƒ (unshift b)))</span>
<span class=" -MMT_ObjectExpression">                  ([z: tm univ L] up (â‰ƒ_refl L (unshift z)))</span>
<span class=" -MMT_ObjectExpression">                  (shift A) (shift B) P</span>
<span class=" -MMT_ObjectExpression">                  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Axiom 2.10.3 (univalence) â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Intuitively, this says (A == B) â‰ƒ (A â‰ƒ B) â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">univalence</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L,A: tp L, B} tm (isequiv (idtoeqv L A B)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// This is a consequence of univalence; proof to be added. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">â‰ƒ_cong</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, M, P: tp L âŸ¶ tp M, A: tp L, B: tp L} tm (A â‰ƒ B) âŸ¶ tm ((P A) â‰ƒ (P B)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InductivelyDefinedTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LFXI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatExample </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">list_decls</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> a : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ list âŸ¶ list </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">reflect</span><span class="w"> </span><span class="nc">list1</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">â˜?InductivelyDefinedTypes/list_decls(a:type) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive</span><span class="w"> </span><span class="nc">list1_unreflected</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ list âŸ¶ list </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">concat</span><span class="p">(</span><span class="nv">a:type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">list1(a: type) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list1/list aâŸ¶ list1/list a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[l] l </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: a, f: list, l: list1/list a} list1/list a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, f, l] (list1/cons a x (f l)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="vc">single</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a : type} a âŸ¶ list1/list a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, x] list1/cons a x (list1/nil a) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">reverse</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">list1(a:type) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list1/list a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list1/nil a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: a, xs: list} list </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, xs] concat/list a xs (single a x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">length</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">list1(a:type) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nats/n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nats/z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: a, l:list} list </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, l] nats/s l </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// length: {a : type} list1/list a âŸ¶ nat/n â˜ = [a, l] (list1/induct/list a ([tp:type] nat/n) ([tp:type] nat/z) ([tp:type, x:tp, xs:nat/n] nat/s xs)) l â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">record</span><span class="w"> </span><span class="nc">pair</span><span class="p">(</span><span class="nv">A: type, B: type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">B </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_type</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b] pair/Type a b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">record_term</span><span class="w"> </span><span class="nc">pairs</span><span class="p">(</span><span class="nv">A: type, B: type, x: A, y: B</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">pair(A, B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">pair_term</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, b: type} a âŸ¶ b âŸ¶ a * b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, x, y] pairs/Make a b x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">vector</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">vec</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: nat/n} type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">empty</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec nat/z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: nat/n} vec n âŸ¶ a âŸ¶ vec (nat/s n) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="cm">// ind_vec: {a: type, vecP: {a:type}{n: nat/n} type, emptyP: {a: type} (vecP a) nat/z, addP: {a: type}{n: nat/n}(vecP a) n âŸ¶ (a âŸ¶ (vecP a) (nat/s n)), n: nat/n} (vector/vec a) n âŸ¶ (vecP a) n â˜ = [a, vecP, emptyP, addP, n, l] ([ys] (vector/induct/vec a vecP emptyP addP n l) ys) â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">zip</span><span class="p">(</span><span class="nv">a: type, b: type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">vector(a) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">vec</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: nat/n} type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] vector/vec b n  âŸ¶ vector/vec (a*b) n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">empty</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec nat/z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[l] vector/empty (a*b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: nat/n} vec n âŸ¶ a âŸ¶ vec (nat/s n) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n, xs, x] vector/induct/vec b ([t, p] vector/vec (a*t) p) ([t] vector/empty (a*t)) ([t, p, ys, y] vector/add (a*t) p ys (pair_term a t x y)) (nat/s n) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">list2</span><span class="p">()</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} list a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} a âŸ¶ list a âŸ¶ list a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">length2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} list a âŸ¶ nat/n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">length2_nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} DED (length2 a (nil a) EQ nat/z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">length2_cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type, hd: a, tl: list a} DED length2 a (cons a hd tl) EQ nat/s (length2 a tl) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">list3</span><span class="p">(</span><span class="nv">a : type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{hd: a, tl:list} list  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ·</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">head</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{l:list, P:DED (l NEQ nil)} a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">head_cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{hd: a, tl: list, P: DED (cons hd tl NEQ nil)} DED ((head (cons hd tl) P) EQ hd) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="vc">cons_nonempty</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type, hd:a, tl:list3/list a} DED (hd âˆ· tl) NEQ list3/nil a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, hd, tl] list3/no_conf_cons_nil a hd tl </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// seems to be an universe issue</span>
<span class="cm">	head_cons: {a : type, hd: a, tl:list3/list a} DED (list3/head a (list3/cons a hd tl) (list3/no_conf_cons_nil a hd tl)) EQ hd â˜ = [a, hd, tl] list3/head_cons a hd tl (list3/no_conf_cons_nil a hd tl) â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">FM</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">fm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">gen</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ fm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">fm </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">comp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">fm âŸ¶ fm âŸ¶ fm </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: fm, y: fm, z: fm} DED comp (comp x y) z EQ comp x (comp y z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit_r</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: fm} DED comp x unit EQ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit_l</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: fm} DED comp unit x EQ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Hofstadter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?InductivelyDefinedTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">hofstadter</span><span class="p">()</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">F</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">M</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n âŸ¶ F </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">m</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n âŸ¶ M </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">fToNat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">F âŸ¶ nat/n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">mToNat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">M âŸ¶ nat/n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="vc">minus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n âŸ¶ nat/n âŸ¶ nat/n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T A nice example demonstrating why this feature doesn&#39;t allow for mutually inductive definitions over a (non-mutually) inductively-defined type </span>
<span class="cm">		 This shouldn&#39;t be (and isn&#39;t) accepted by the feature, as the definition f_h refers to hofstadter/f (self or forward-reverences) are not (and can&#39;t be) expanded â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// inductive_definition hofstadter_mf_sequences() : hofstadter() â˜ =</span>
<span class="cm">	// 	F: type â˜ = nat/n  â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	M: type â˜ = nat/n  â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	fToNat: nat/n âŸ¶ nat/n â˜ = [u] u â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	mToNat: nat/n âŸ¶ nat/n â˜ = [u] u â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	f_h: nat/n âŸ¶ nat/n*nat/n â˜ = [u] (nat/induct/n (nat/n * nat/n) (pair_term nat/n nat/n (nat/s nat/z) (nat/s nat/z)) ([x] </span>
<span class="cm">	// 		(pair_term nat/n nat/n (pair/a nat/n nat/n x) ((nat/s (pair/a nat/n nat/n x)) - (hofstadter/mToNat (hofstadter/m (pair/b nat/n nat/n x))))))) u â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	f: nat/n âŸ¶ nat/n â˜ = [u] (nat/induct/n nat/n (nat/s nat/z) ([v] (pair/b nat/n nat/n (f_h v)))) u â™</span><span class="w"></span>
<span class="w"> 	</span><span class="cm">// 	m_h: nat/n âŸ¶ nat/n*nat/n â˜ = [u] (nat/induct/n (nat/n * nat/n) (pair_term nat/n nat/n nat/z nat/z) ([x] </span>
<span class="cm">	// 		(pair_term nat/n nat/n (pair/a nat/n nat/n x) ((nat/s (pair/a nat/n nat/n x)) - (f (pair/b nat/n nat/n x)))))) u â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	m: nat/n âŸ¶ nat/n â˜ = [u] (nat/induct/n nat/n nat/z ([v] (pair/b nat/n nat/n (m_h v)))) u â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ur</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFXI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?DHOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜lfx:?LFHierarchy</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveTypes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveDefinitions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveMatch</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveProofDefinitions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Reflections</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Records</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecordDefinitions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ur</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">NatManually</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">induct_n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{N:type,Z:N,S:NâŸ¶N} n âŸ¶ N </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">induct_z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{N:type,Z:N,S:NâŸ¶N} DED (induct_n N Z S) z EQ Z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">induct_s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{N:type,Z:N,S:NâŸ¶N,X:n} DED (induct_n N Z S) (s X) EQ S ((induct_n N Z S) X) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">induct_s</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">p_n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">p_z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">p_n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">p_s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">p_n âŸ¶ p_n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f][x] s (f x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">p_induct_n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ p_n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">induct_n p_n p_z p_s </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">p_induct_z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED (induct_n p_n p_z p_s z) EQ p_z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">induct_z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">p_induct_s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X:n} DED (induct_n p_n p_z p_s (s X)) EQ p_s (induct_n p_n p_z p_s X) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X] induct_s X </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">N_n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] DED p_induct_n x z EQ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">N_z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">N_n z</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">p_induct_z CONG [f:p_n] f z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">N_s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X:n,hX: N_n X} N_n (s X) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X:n][hX:N_n X] ((induct_s X) CONG [f] f z) TRANS (hX CONG s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LFXI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">nat_decls_long</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">reflect</span><span class="w"> </span><span class="nc">nat_long</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">NatExample/nat_decls_long() </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">plusn_long</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat_long() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_long/n âŸ¶ nat_long/n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] nat_long/s (u x)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">unital_type</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">nat_decls</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatExample/unital_type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="kd">reflect</span><span class="w"> </span><span class="nc">nat</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">NatExample/nat_decls() </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">plusn</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n âŸ¶ nat/n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] nat/s (u x)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n âŸ¶ nat/n âŸ¶ nat/n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plusn/n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">z_left_neutral</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] DED (nat/z + m) EQ m </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plusn/z/Applied nat/z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:nat/n} n x âŸ¶ n (nat/s x) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, px] plusn/z/Applied (nat/s x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">z_right_neutral</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] DED m EQ (m + nat/z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">SYM (plusn/z/Applied nat/z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:nat/n} n x âŸ¶ n (nat/s x) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, px] (px CONG nat/s) TRANS (SYM (plusn/s/Applied x nat/z)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">suc_comm</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">	 	</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a:nat/n, b:nat/n] DED (nat/s a) + b EQ a + (nat/s b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 	</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n} n nat/z b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] ((plusn/s/Applied nat/z b) TRANS ((plusn/z/Applied b) CONG nat/s)) TRANS (SYM (plusn/z/Applied (nat/s b))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 	</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b: nat/n} n a b âŸ¶ n (nat/s a) b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a: nat/n, b: nat/n, pa: n a b] ((plusn/s/Applied (nat/s a) b) TRANS (pa CONG nat/s)) TRANS (SYM (plusn/s/Applied a (nat/s b))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">plus_comm</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a:nat/n, b:nat/n] DED a + b EQ b + a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b: nat/n} n nat/z b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] (z_left_neutral/n b) TRANS (z_right_neutral/n b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b: nat/n, pa: n a b} n (nat/s a) b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, pa] ((plusn/s/Applied a b) TRANS (pa CONG nat/s))</span>
<span class=" -MMT_ObjectExpression">			 TRANS ((SYM (plusn/s/Applied b a)) TRANS (suc_comm/n b a)) </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">plus_assoc</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n, a:nat/n, c:nat/n} type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, a, c] DED a + (b + c) EQ (a + b) + c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c} n nat/z a c </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, c]  (z_left_neutral/n c CONG ([x] a + x)) TRANS (z_right_neutral/n a CONG ([x] x + c)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b, a, c, pb: n b a c} n (nat/s b) a c </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, a, c, pb] ((((plusn/s/Applied b c) CONG ([x] a + x)) TRANS (SYM (suc_comm/n a (b+c)))) TRANS (plusn/s/Applied a (b+c)))</span>
<span class=" -MMT_ObjectExpression">			TRANS ((pb CONG nat/s) TRANS (SYM ((((SYM (suc_comm/n a b)) TRANS (plusn/s/Applied a b)) CONG ([x] x + c)) TRANS (plusn/s/Applied (a+b) c)))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">times</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n âŸ¶ nat/n) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] nat/z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] (x + (u x))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="vc">timesn</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n âŸ¶ nat/n âŸ¶ nat/n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b] times/n a b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">times_z</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n} type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] DED a * nat/z EQ nat/z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n nat/z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times/z/Applied nat/z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, pa: n a} n (nat/s a) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, pa] (times/s/Applied a nat/z) TRANS (plusn/z/Applied (a * nat/z)) TRANS pa  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">times_right</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n, a:nat/n} type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, a] DED b + b * a EQ b * (nat/s a) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: nat/n} n nat/z a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] ((plusn/z/Applied (nat/z * a)) TRANS (times/z/Applied a)) TRANS SYM (times/z/Applied (nat/s a)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n, a:nat/n, pb: n b a} n (nat/s b) a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, a, pb] </span>
<span class=" -MMT_ObjectExpression">						(((plusn/s/Applied b ((nat/s b)*a)) TRANS ((times/s/Applied b a) CONG ([x] nat/s (b + x))))</span>
<span class=" -MMT_ObjectExpression">			TRANS (((plus_assoc/n a b (b*a)) CONG nat/s) TRANS ((plus_comm/n b a) CONG ([x] nat/s (x + (b*a))))))</span>
<span class=" -MMT_ObjectExpression">			TRANS (((SYM (plusn/s/Applied (a+b) (b*a))) TRANS ((SYM (plusn/s/Applied a b)) CONG ([x] x + (b*a))))</span>
<span class=" -MMT_ObjectExpression">			TRANS ((SYM (plus_assoc/n b (nat/s a) (b*a))) TRANS ((pb  CONG ([x] (nat/s a) + x)) TRANS (SYM (times/s/Applied b (nat/s a))))))  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">distrib_left</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b:nat/n, c:nat/n} type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c] DED (a + b) * c EQ a*c + b*c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n, c:nat/n} n nat/z b c </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, c] ((plusn/z/Applied b) CONG ([x] x * c)) TRANS (SYM ((times/z/Applied c) CONG ([x] x+ (b*c)) TRANS (plusn/z/Applied (b*c)))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c, pa] ((((plusn/s/Applied a b) CONG ([x] x * c)) TRANS (times/s/Applied (a+b) c)) TRANS (pa CONG ([x] c + x))) TRANS ((plus_assoc/n (a*c) c (b*c)) TRANS (SYM ((times/s/Applied a c) CONG ([x] x + b*c)))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">times_comm</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b] DED a * b EQ b * a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] times_z/n x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	  </span><span class="vc">s</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, pa:n a b] ((times/s/Applied a b) TRANS (pa CONG ([x] b + x))) TRANS (times_right/n b a) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="vc">left_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b:nat/n, c:nat/n} DED (a + b) * c EQ a*c + b*c </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c] distrib_left/n a b c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">right_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b:nat/n, c:nat/n} DED a * (b + c) EQ a*b + a*c </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c] ((times_comm/n a (b+c)) TRANS (distrib_left/n b c a)) TRANS (((times_comm/n b a) CONG ([x] x + (c*a))) TRANS (times_comm/n c a CONG ([x] (a*b) + x))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">times_assoc</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c] DED a * (b * c) EQ (a * b) * c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, c] (times/z/Applied (b*c)) TRANS (SYM (((times/z/Applied b) CONG ([x] x * c)) TRANS (times/z/Applied c))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c, pa] ((times/s/Applied a (b*c)) TRANS (pa CONG ([x] (b*c) + x))) TRANS (SYM (((times/s/Applied a b) CONG ([x] x * c)) TRANS (distrib_left/n b (a*b) c)))  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">predec</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u] u) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">monus</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n âŸ¶ nat/n) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n âŸ¶ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] predec/n (u x)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InductiveTests</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?InductivelyDefinedTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">lst</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] list1/list a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">cns</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a âŸ¶ lst a âŸ¶ lst a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, hd, tl] list1/cons a hd tl </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">contraposition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, b: type, x_a: a, x_b: b, y_a: a, y_b: b} (DED x_a NEQ y_a âŸ¶ DED x_b NEQ y_b) âŸ¶ (DED x_b EQ y_b âŸ¶ DED x_a EQ y_a) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">contra</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">trans_equal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, w: a, x: a, y: a, z: a} DED w EQ x âŸ¶ DED z EQ y âŸ¶ DED x EQ y âŸ¶ DED w EQ z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trans_eq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class="si">8</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">cns_functionhood</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, hd_0: a, tl_0: lst a, hd_1, tl_1} DED (hd_0 EQ hd_1) âŸ¶ DED tl_0 EQ tl_1 âŸ¶ DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">cns_funct</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="cm">//cons_inj_0: {a:type, hd_0:a, tl_0: lst a, hd_1:a, tl_1: lst a} DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) âŸ¶ DED hd_0 EQ hd_1 â˜ = [a, hd_0, tl_0, hd_1,tl_1] contra hd_0 (cns a hd_0 tl_0) hd_1 (cns a hd_1 tl_1) (list1/injective_cons_0 a hd_0 tl_0 hd_1 tl_1) â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">//cons_inj_1: {a:type, hd_0:a, tl_0: lst a, hd_1:a, tl_1: lst a} DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) âŸ¶ DED tl_0 EQ tl_1 â˜ = [a, hd_0, tl_0, hd_1,tl_1] contra tl_0 (cns a hd_0 tl_0) tl_1 (cns a hd_1 tl_1) (list1/injective_cons_1 a hd_0 tl_0 hd_1 tl_1) â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">//consArgs: {a: type} type â˜ = [a] a * (lst a) â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">//consP: {a: type} consArgs a âŸ¶ lst a â˜ = [a, args] cns a (pair/a a (lst a) args) (pair/b a (lst a) args) â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// This should work:â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// test: {a: type, hd_0: a, tl_0: lst a, hd_1:a, tl_1: lst a} DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) âŸ¶ DED hd_0 EQ hd_1 â˜ = [a, hd_0, tl_0, hd_1, tl_1] (cons_inj_0 a hd_0 tl_0 hd_1 tl_1) â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// inj_cons: {a: type, hd_0: a, tl_0: lst a, hd_1:a, tl_1: lst a} DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) âŸ¶ DED pair/make a (lst a) hd_0 tl_0 EQ pair/make a (lst a) hd_1 tl_1 â˜ </span>
<span class="cm">	= [a, hd_0, tl_0, hd_1, tl_1, P] pair/equiv a (lst a) hd_0 tl_0 hd_1 tl_1 (cons_inj_0 a hd_0 tl_0 hd_1 tl_1 P) (cons_inj_1 a hd_0 tl_0 hd_1 tl_1 P) â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// This is correct, but not accepted by the typechecker</span>
<span class="cm">	// For the typechecker to see this a (typelevel) definition expansion of consP is required â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// inj_consP_weak: {a: type, args_0: consArgs a, args_1: consArgs a} DED (consP a args_0) EQ (consP a args_1) âŸ¶ </span>
<span class="cm">		DED pair/make a (lst a) (pair/a a (lst a) args_0) (pair/b a (lst a) args_0) EQ pair/make a (lst a) (pair/a a (lst a) args_1) (pair/b a (lst a) args_1) </span>
<span class="cm">	â˜ = [a, args_0, args_1, P] (inj_cons a (pair/a a (lst a) args_0) (pair/b a (lst a) args_0) (pair/b a (lst a) args_1) (pair/b a (lst a) args_1)) P â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// inj_consP: {a: type, args_0: consArgs a, args_1: consArgs a, P: DED (consP a args_0) EQ (consP a args_1)} DED args_0 EQ args_1 â˜ = [a, args_0, args_1, P] </span>
<span class="cm">		trans_equal (a*(lst a)) args_0 (pair/make a (lst a) (pair/a a (lst a) args_0) (pair/b a (lst a) args_0)) (pair/make a (lst a) (pair/a a (lst a) args_1) (pair/b a (lst a) args_1)) args_1</span>
<span class="cm">	 (pair/repr a (lst a) (pair/a a (lst a) args_0) (pair/b a (lst a) args_0) args_0)</span>
<span class="cm">	 (pair/repr a (lst a) (pair/a a (lst a) args_1) (pair/b a (lst a) args_1) args_1)</span>
<span class="cm">	 (inj_consP_weak a args_0 args_1 P) â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] list3/list a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">//inj_cons_1: {a:type, hd_0:a, tl_0: list a, hd_1:a, tl_1: list a} DED hd_0 NEQ hd_1 âŸ¶ DED (hd_0 âˆ· tl_0) NEQ (hd_1 âˆ· tl_1) â˜ = [a, hd_0, tl_0, hd_1, tl_1] list3/injective_cons_0 a hd_0  tl_0 hd_1 tl_1 â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">//inj_cons_2: {a:type, hd_0:a, tl_0: list a, hd_1:a, tl_1: list a} DED tl_0 NEQ tl_1 âŸ¶ DED (hd_0 âˆ· tl_0) NEQ (hd_1 âˆ· tl_1) â˜ = [a, hd_0, tl_0, hd_1, tl_1] list3/injective_cons_1 a hd_0  tl_0 hd_1 tl_1 â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">//weak_inj_cons_1: {a:type, hd_0:a, hd_1:a, tl:list3/list a} DED hd_0 NEQ hd_1 âŸ¶ DED (hd_0 âˆ· tl) NEQ (hd_1 âˆ· tl) â˜ = [a, hd_0, hd_1, tl] list3/injective_cons_0 a hd_0 tl hd_1 tl â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">//weak_inj_cons_2: {a:type, hd:a, tl_0:list3/list a, tl_1:list3/list a} DED tl_0 NEQ tl_1 âŸ¶ DED (hd âˆ· tl_0) NEQ (hd âˆ· tl_1) â˜ = [a, hd, tl_0, tl_1] list3/injective_cons_1 a hd tl_0 hd tl_1 â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// theory UniversalPropertyFreeMonoid : ?InductivelyDefinedTypes =</span>
<span class="cm">// 	inductive unitType() â˜ =</span>
<span class="cm">// 		tp: type â™</span>
<span class="cm">// 		tm: unitType â™</span>
<span class="cm">// 	âš</span><span class="w"></span>
<span class="cm">// 	unit: type â˜ = unitType/tp â™</span>
<span class="cm">// 	plus_assoc: {x: nat/n, y: nat/n, z: nat/n} DED nat/plus/n (nat/plus/n x y) z EQ nat/plus/n x (nat/plus/n y z) â™</span>
<span class="cm">// 	zero_plus: {x: nat/n} DED nat/plus/n nat/z x EQ nat/z â™</span>
<span class="cm">// 	plus_zero: {x: nat/n} DED nat/z EQ nat/plus/n x nat/z â™</span>

<span class="cm">// 	inductive_definition Nat(): freeMonoid(unit) â˜ =</span>
<span class="cm">// 		fm: type â˜ = nat/n â™</span>
<span class="cm">// 		gen: a âŸ¶ fm â˜ = unitType/induct/tm nat/n (nat/s nat/z) â™</span>
<span class="cm">// 		unit: fm â˜ = nat/z â™</span>
<span class="cm">// 		comp: fm âŸ¶ fm âŸ¶ fm â˜ = [a, b] nat/plus/n a b â™</span>
<span class="cm">// 		assoc: {x: fm, y: fm, z: fm} DED comp (comp x y) z EQ comp x (comp y z) â˜ = [x, y, z] plus_assoc x y z â™</span>
<span class="cm">// 		unit_r: {x: fm} DED comp x unit EQ x â˜ = [x] zero_plus x â™</span>
<span class="cm">// 		unit_l: {x: fm} DED comp unit x EQ x â˜ = [x] plus_zero x â™</span>
<span class="cm">// 	âš</span><span class="w"></span>
<span class="cm">// âš</span><span class="w"></span>

<span class="cm">/T The following definition of surreal numbers won&#39;t typecheck (as expected), but is a nice pathological example â™</span>
<span class="cm">// theory SurrealNumbers : ?LFXI =</span>
<span class="cm">	linear_order: {A: type} A âŸ¶ type â™</span>
<span class="cm">//	ordBddAboveSet: {A: type, ord: linear_order A} A âŸ¶ kind â™</span>
<span class="cm">//	ordBddBelowSet: {A: type, ord: linear_order A} A âŸ¶ kind â™</span>
<span class="cm">	</span>
<span class="cm">//	inductive surreal() â˜ =</span>
<span class="cm">//		sur: type â™</span>
<span class="cm">//		ord: linear_order sur â™</span>
<span class="cm">//		makeSurreal: {a: sur} (ordBddAboveSet sur ord a) (ordBddBelowSet sur ord a) sur â™</span>
<span class="cm">//	</span>
<span class="cm">// âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   theory ObjectLevelInstances : http://cds.omdoc.org/urtheories?LF =</span>
<span class="cm">  tp    : typeâ™</span>
<span class="cm">  tm    : typeâ™</span>
<span class="cm">  equal : tm âŸ¶ tm âŸ¶ tm  â˜# 1 = 2â™</span>
<span class="cm">  of    : tm âŸ¶ tp âŸ¶ typeâ˜# 1 # 2â™</span>

<span class="cm">  const : tp âŸ¶ THYâ˜ = [a] {|</span>
<span class="cm">    c  : tm,</span>
<span class="cm">    of : c # a</span>
<span class="cm">  |}â™</span>
<span class="cm">  </span>
<span class="cm">  nat  : tpâ™</span>
<span class="cm">  zero : const natâ™</span>
<span class="cm">  </span>
<span class="cm">  // alsozero : const nat â˜= [|c : zero/c, of : zero/of|]â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">//  theory MetaLevelInstances : http://cds.omdoc.org/urtheories?LF =</span>
<span class="cm">  tp    : typeâ™</span>
<span class="cm">  tm    : typeâ™</span>
<span class="cm">  equal : tm âŸ¶ tm âŸ¶ tm  â˜# 1 = 2â™</span>
<span class="cm">  of    : tm âŸ¶ tp âŸ¶ typeâ˜# 1 # 2â™</span>

<span class="cm">  theory const &gt; {|a: tp|}â˜ =</span>
<span class="cm">    c  : tmâ™</span>
<span class="cm">    of : c # aâ™</span>
<span class="cm">  âš</span><span class="w"></span>

<span class="cm">//  nat : tpâ™</span>
<span class="cm">  // structure zero : const natâ™</span>
<span class="cm">  </span>
<span class="cm">  // alsozero : const nat â˜= [|c : zero/c, of : zero/of|]â™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">int</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pred</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat       </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pred</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">uminus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat       </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat âŸ¶ nat </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntRules</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Int </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">times_mono</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X:nat,Y:nat,Z:nat} âŠ¦ O â‰¤ Z âŸ¶ âŠ¦ X â‰¤ Y âŸ¶ âŠ¦ X * Z â‰¤ Y * Z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_invmono</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ O â‰¤ Z âŸ¶ âŠ¦ X * Z â‰¤ Y * Z âŸ¶ âŠ¦ X â‰¤ Y  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">succ_invert</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} âŠ¦ pred (X&#39;) = X</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_invert_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ (X + Y) - Y = X</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_invert_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ (X + Y) - X = Y</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} a âŸ¶ a âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">reflexive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:a} x = x </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">List</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">nil</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} list a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">nil</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} a âŸ¶ list a âŸ¶ list a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">%R,</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">embed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} a âŸ¶ list a </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x] x , (nil a)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// the simplification rule generator does not allow fold to have implicit arguments yetâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b:type} list a âŸ¶ b âŸ¶ (a âŸ¶ b âŸ¶ b) âŸ¶ b</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold_nil</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type,b,n:b,c: a âŸ¶ b âŸ¶ b} (fold a b (nil a) n c) = n</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold_cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,x,l,n,c:a âŸ¶ b âŸ¶ b} (fold a b (x,l) n c) = (c x (fold a b l n c))</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">concat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} list a âŸ¶ list a âŸ¶ list a</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,l,m] fold a (list a) l m [x,xs] x,xs </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?List</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">f</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ a</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(c,c|)+(c,c|) = c,c,c,c|</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">real</span><span class="w"> </span><span class="l l-URI">scala://real.omdoc.org/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜real:?Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜real:?StandardNat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// this only type-checks because âŠ¦ 1+1 = 2 unifies with âŠ¦ true â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ 1+1 = 2</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">trueI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">IntLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntRules</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// this should include NatRules, but the last test only works with the rule IntRules?succ_invert/Solveâ™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜real:?Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜real:?StandardInt</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ 1-3 = -2 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">trueI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Vectors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatLiterals</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">a</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">c</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">a_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ a âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">vec</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">vec</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec 0 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} vec n âŸ¶ a âŸ¶ vec n&#39; </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">vec_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} vec n âŸ¶ vec n âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">==</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">append</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} vec m âŸ¶ vec n âŸ¶ vec (m + n) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// this only type-checks because vec n+0 and vec n are recognized as equal â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">appendempty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, v: vec n} v @ âˆ… == v</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// this only type-checks because vec m + (n&#39;) and vec (m + n)&#39; are recognized as being equal â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">appendcons</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n, x, v: vec m, w: vec n} v @ (w,x) == (v @ w, x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">last</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} vec n&#39; âŸ¶ a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">last</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lastcons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, x, v: vec n} last (v,x) = x </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// this only type-checks because vec 3 and vec 0&#39;&#39;&#39; are recognized as equal â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec 3 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âˆ…,c,c,c</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// this only type-checks because vec 6 and vec (3+3) are recognized as equal â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec 6 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">test1 @ test1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// this only type-checks because vec n&#39; unifies with vec 3â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">last test1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   intuitionistic first-order logic with natural deduction rules and a few example proofs âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">term</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="p">##</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="p">##</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLNatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLNatDed  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ({x} âŠ¦ (A x)) âŸ¶ âŠ¦ âˆ€ A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ (âˆ€ A) âŸ¶ {x} âŠ¦ (A x)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} {c} âŠ¦ (A c) âŸ¶ âŠ¦ âˆƒ [x] (A x) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">existsI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,C} âŠ¦ (âˆƒ [x] A x) âŸ¶ ({x} âŠ¦ (A x) âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQNatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLNatDed  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ x â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ x â‰ y âŸ¶ {T: term âŸ¶ term} âŠ¦ (T x) â‰ (T y) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congF</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ x â‰ y âŸ¶ {F: term âŸ¶ prop} âŠ¦ (F x) âŸ¶ âŠ¦ (F y)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">congF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ x â‰ z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trans3</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} âŠ¦ w â‰ x âŸ¶ âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ w â‰ z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z,p,q,r] trans (trans p q) r</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans4</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} âŠ¦ v â‰ w âŸ¶âŠ¦ w â‰ x âŸ¶ âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ v â‰ z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z,p,q,r,s] trans3 (trans p q) r s</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   higher-order logicâš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Bool</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Bool âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â†’</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A âŸ¶ tm B) âŸ¶ tm A â†’ B </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A â†’ B âŸ¶ tm A âŸ¶ tm B </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">equalConstant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A â†’ (A â†’ bool)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y:tm A] (equalConstant A) @ x @ y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, X: tm A} âŠ¦ X = X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,X,Y:tm A} âŠ¦ X = Y âŸ¶ {F: tm A âŸ¶ tm B} âŠ¦ F X = F Y</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">  </span><span class="vc">beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A âŸ¶ tm B, X} âŠ¦ (Î» F) @ X = F X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(Î»[x:Bool]x) = Î»[x]x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(Î»[x]x) = Î»[x]true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î»[x]x=false</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,p: tm A âŸ¶ Bool] (Î» p) = Î»[x]true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">proof</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">proof</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fix</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">fix</span><span class="w"> </span><span class="si">L1T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assume</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">assume</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">hence</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">hence</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">by</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">use</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">use</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">localref</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">`</span><span class="w"> </span><span class="si">L1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">//  test : {p: term âŸ¶ o} âŠ¦ âˆ€ [x] p x â‡’ p xâ˜</span>
<span class="cm">       = [p] proof (fix x assume p x; hence p x)â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/linear</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://examples.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// Linear logic</span>
<span class="cm">   Syntax: intuitionistic linear logic</span>
<span class="cm">   Proof theory: resource semantics based on Frank Pfenning&#39;s lecture notes</span>
<span class="cm">   (http://www.cs.cmu.edu/~fp/courses/15816-s10/schedule.html, Lecture 23-24) resource semantics</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Syntax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">o</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ—</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ o âŸ¶ o </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ—</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">&amp;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ o âŸ¶ o </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&amp;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ¤</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ•</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ o âŸ¶ o </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ•</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ¸</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ o âŸ¶ o </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ¸</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">80</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">!</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ o      </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">!</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">110</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">â‡’</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ o âŸ¶ o </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">80</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] !x âŠ¸ y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// We use untyped first-order logic with equality to define the sematnics.</span>
<span class="cm">   The values of the first-order universe are the worlds, and propositions may hold at different worlds.âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Worlds</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// worlds contain resources â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">world</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// composition of worlds, corresponds to multiset union of resources â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world âŸ¶ world âŸ¶ world </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// empty world with no resources â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Îµ</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// * is a monoidâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">neutL</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âŠ¦ Îµ*P â‰ P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">neutR</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âŠ¦ P*Îµ â‰ P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">assoc</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q,R} âŠ¦ (P*Q)*R â‰ P*(Q*R)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// A @ P: A can be produced by using all resources available in world Pâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">at</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ world âŸ¶ prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">At</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ world âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,w] âŠ¦ at p w</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// a formula is valid if it holds in the empty worldâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">valid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] A @ Îµ</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">valid</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">   </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// Apart from the monoid/multiset structure, there is no way to introduce worlds.</span>
<span class="cm">   The set of worlds is the freely-generated T over the bound world variables.</span>
<span class="cm">   Here T is the theory imposed on worlds, T is an extension of the monoid theory.</span>

<span class="cm">   Different extensions allow modeling different structural rules.</span>
<span class="cm">   The following gives three extensions, but only Exchange is used later on.âš</span><span class="w"></span>

<span class="cm">// Exchange corresponds to commutativity.âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Exchange</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">comm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q} âŠ¦ P*Q â‰ Q*P</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// We add two special type-checking rules that mechanize the monoid+commutativity axiom.</span>
<span class="cm">      Their implementations are given in the folder scala (sibling of source).â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// A simplification rule for *-terms: it normalizes bracketing of *, drops Îµ, and reorders the argumentsâ™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NormalizeWorlds</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p,q,r} âŠ¦ r*(p*q)*Îµ*r â‰ r*(r*(q*p)) </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,q,r] refl</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// An equality-checking rule for equations involving *: it normalizes both sides and solves meta-variables of type world.</span>
<span class="cm">      For example, it can reduce v*w=v*w&#39; to w=w&#39;.</span>
<span class="cm">      Situations like this came up in several of the examples below.</span>
<span class="cm">      This rule is admissible for solving meta-variables but not derivable from the monoid+commutativity axioms.</span>
<span class="cm">      Effectively, it works in the freely-generated commutative monoid.</span>
<span class="cm">      Because it is only admissible, it breaks modularity: e.g., it cannot be easily combined with a corresponding rule for idempotence.â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EquateWorlds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// Contraction corresponds to idempotence.âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Contraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âŠ¦ P*P â‰ P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// Weakening corresponds to the empty world being the least element.âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Weakening</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// ordering with monotonicityâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">weaker</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world âŸ¶ world âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">80</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">â‰¤_refl</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âŠ¦ P â‰¤ P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">â‰¤_antisym</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q} âŠ¦ P â‰¤ Q âŸ¶ âŠ¦ Q â‰¤ P âŸ¶ âŠ¦ Pâ‰Q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">â‰¤_trans</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q,R} âŠ¦ Pâ‰¤Q âŸ¶ âŠ¦ Qâ‰¤R âŸ¶ âŠ¦ Pâ‰¤R </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">â‰¤_monotone</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d} âŠ¦ a â‰¤ b âŸ¶ âŠ¦ c â‰¤ d âŸ¶ âŠ¦ a*c â‰¤ b*d</span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">   </span><span class="cm">// least world (without this, the order is trivial, i.e., there is no weakening)â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">â‰¤_least</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} âŠ¦ Îµ â‰¤ P</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// TODO: This should be a subtyping rule so that it does not occur in proofs.â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">weaken</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,v,w} A @ v âŸ¶ âŠ¦vâ‰¤w âŸ¶ A @ w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">divisibility</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q} âŠ¦ P â‰¤ P*Q </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,Q] congF neutR ([u]uâ‰¤P*Q) (â‰¤_monotone â‰¤_refl â‰¤_least)</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// Now proofs of the linear sequent A1, ..., An |- A are represented as terms of type</span>
<span class="cm">   (A1 âŠ— ... âŠ— An) âŠ¸ A  @  Îµ, where @ is the binary holds-at relation between propositions and worlds.âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ResourceSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Exchange</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">âŠ—_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a,b} A @ a âŸ¶ B @ b âŸ¶ A âŠ— B @ a*b</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ—_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,v} A âŠ— B @ u âŸ¶ ({a}{b} A @ a âŸ¶ B @ b âŸ¶ C @ a*b*v) âŸ¶ C @ u*v</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ—_L</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">1_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">1 @ Îµ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">1_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{C,u,v} 1 @ u âŸ¶ C @ v âŸ¶ C @ u*v</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">&amp;_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,w} A @ w âŸ¶ B @ w âŸ¶ A &amp; B @ w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">&amp;_Ll</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,v} A &amp; B @ u âŸ¶ ({a} A @ a âŸ¶ C @ a*v) âŸ¶ C @ u*v</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">&amp;_Lr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,v} A &amp; B @ u âŸ¶ ({b} B @ b âŸ¶ C @ b*v) âŸ¶ C @ u*v</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">âŠ¤_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w} âŠ¤ @ w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">âŠ•_Rl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,w} A @ w âŸ¶ A âŠ• B @ w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ•_Rr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,w} B @ w âŸ¶ A âŠ• B @ w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ•_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,v} A âŠ• B @ u âŸ¶ ({a} A @ a âŸ¶ C @ a*v) âŸ¶ ({b} B @ b âŸ¶ C @ b*v) âŸ¶ C @ u*v</span><span class=" -MMT_DD">â™</span><span class="w">  </span>

<span class="w">   </span><span class="vc">0_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{C,u,v} 0 @ u âŸ¶ C @ u*v</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">âŠ¸_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,w} ({a} A @ a âŸ¶ B @ a*w) âŸ¶ A âŠ¸ B @ w</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ¸_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,a,v} A âŠ¸ B @ u âŸ¶ A @ a âŸ¶ ({b} B @ b âŸ¶ C @ b*v) âŸ¶ C @ u*a*v</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// alternatively</span>
<span class="cm">   âŠ¸_E  : A âŠ¸ B @ P âŸ¶ A @ Q âŸ¶ B @ P*Q</span>
<span class="cm">   âŠ¸_L : A âŠ¸ B @ H âŸ¶ A @ P âŸ¶ ({b} B @ b âŸ¶ C @ b*Q) âŸ¶ C @ H*P*Q</span>
<span class="cm">      = [p][q][f] f (H*P) (âŠ¸E p q)</span>
<span class="cm">   â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">!_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A @ Îµ âŸ¶ ! A @ Îµ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">!_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,C,u,v} ! A @ u âŸ¶ (A @ Îµ âŸ¶ C @ v) âŸ¶ C @ u*v</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// In the remainder, we prove some derivable rules to exercise the calculus.â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">âŠ—_commute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} valid AâŠ—B âŠ¸ BâŠ—A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] âŠ¸_R [ab,h] âŠ—_L h [a,b,p,q] âŠ—_R q p</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// needs to solve abc * X = abc and ab * Y * X = ab * c, solution: X = epsilon, Y = câ™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">âŠ—_assoc1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} valid (AâŠ—B)âŠ—C âŠ¸ AâŠ—(BâŠ—C)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] âŠ¸_R [abc,h] âŠ—_L h </span>
<span class=" -MMT_ObjectExpression">              [ab,c,pq,r] âŠ—_L pq</span>
<span class=" -MMT_ObjectExpression">                 ([a,b,p,q] âŠ—_R p (âŠ—_R q r))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span>
<span class="w">   </span><span class="vc">âŠ—_assoc2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} valid AâŠ—(BâŠ—C) âŠ¸ (AâŠ—B)âŠ—C</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] âŠ¸_R [abc,h] âŠ—_L h </span>
<span class=" -MMT_ObjectExpression">              [a,bc,p,qr] âŠ—_L qr</span>
<span class=" -MMT_ObjectExpression">                 ([b,c,q,r] âŠ—_R (âŠ—_R p q) r)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">âŠ—_neutral1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid AâŠ—1 âŠ¸ A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] âŠ¸_R [ao,h] âŠ—_L h [a,b,p,q] 1_L q p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ—_neutral2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid A âŠ¸ AâŠ—1</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] âŠ¸_R [a,h] âŠ—_R h 1_R</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span>
<span class="w">   </span><span class="vc">âŠ•_commute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} valid AâŠ•B âŠ¸ BâŠ•A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] âŠ¸_R [ab,h] âŠ•_L h ([a,p] âŠ•_Rr p) ([b,q] âŠ•_Rl q)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">âŠ•_neutral1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid AâŠ•0 âŠ¸ A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] âŠ¸_R [az,h] âŠ•_L h ([a,p] p) ([z,q] 0_L q)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">âŠ•_neutral2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid A âŠ¸ AâŠ•0</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] âŠ¸_R [a,h] âŠ•_Rl h</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">      </span>
<span class="w">   </span><span class="vc">!_over_âŠ•</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} valid (!AâŠ•!B) âŠ¸ !(AâŠ•B)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] âŠ¸_R [ab,h] âŠ•_L h ([a,p] !_L p ([pE] !_R (âŠ•_Rl pE)))</span>
<span class=" -MMT_ObjectExpression">                                     ([b,q] !_L q ([qE] !_R (âŠ•_Rr qE)))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">!_over_&amp;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} valid !(A&amp;B) âŠ¸ (!A&amp;!B)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="cm">// TODO: This proof unexpectedly does not type-check, eventually failing at a=Îµ and b=Îµ.</span>
<span class="cm">             Further investigation is needed to determine if the proof is in fact wrong or</span>
<span class="cm">             if the type-checker is led astray by the EquateWorlds rule.</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">          </span><span class="cm">//  = [A,B] âŠ¸_R [ab,h] &amp;_R (!_L h [pqE] &amp;_Ll pqE ([a,p] !_R p))</span>
<span class="cm">                                   (!_L h [pqE] &amp;_Lr pqE ([b,q] !_R q))â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">!_idempotent1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid !!A âŠ¸ !A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] âŠ¸_R [a,h] !_L h [k] !_L k [l] !_R l</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">!_idempotent2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid !A âŠ¸ !!A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] âŠ¸_R [a,h] !_L h [k] !_R (!_R k)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">!_weaken</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid !A âŠ¸ A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] âŠ¸_R [a,h] !_L h [k] k</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// @_title Propositional Logic in MMTâ™</span>
<span class="cm">// @_author Florian Rabeâ™</span>

<span class="cm">/T   </span>
<span class="cm">Intuitionistic propositional logic with natural deduction rules and a few example proofs âš</span><span class="w"></span>

<span class="cm">/T We use LF as the meta-theory for all theories in this file.âš</span><span class="w"></span>
<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T    </span>
<span class="cm">We start with the syntax of propositional logic.âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="sd"># :types The Basic Concepts</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T the type of propositions â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Given [F:prop], the type $âŠ¦ F$ holds the proofs of $F$.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type         </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd">## Abbreviations</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The type $contra$ abbreviates the judgment of inconsistency.</span>
<span class="cm">     If we can give an element of the type, then every proposition has a proof.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">contra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} âŠ¦ a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â†¯</span><span class="w">            </span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">  </span><span class="sd"># Constructors</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The constructors provide the expressions of the types above.â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">true</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop                                   </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop                                   </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ§</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ¨</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop         </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Equivalence is taken as a non-primitive here and defined such that for [F:prop,G:prop] we define $Fâ‡”G$ as $(F â‡’ G) âˆ§ (G â‡’ F)$.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡”</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] (x â‡’ y) âˆ§ (y â‡’ x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   Now we describe the proof theory.âš</span><span class="w">        </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T We use natural âŠ¦uction proof rules that construct expressions of type $âŠ¦ F$ for some [F:prop].</span>
<span class="cm">  {For example, assume two propositions [F: prop, G: prop].</span>
<span class="cm">    {If [p:âŠ¦ F, q: âŠ¦ G], then $andI p q$ is a proof of $Fâˆ§G$.}</span>
<span class="cm">    {If [p:âŠ¦ Fâˆ§G], then $andEl p$ is a proof of $F$.}</span>
<span class="cm">  }</span>
<span class="cm">  â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ false âŸ¶ â†¯</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âŸ¶ âŠ¦ B âŸ¶ âŠ¦ A âˆ§ B   </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âˆ§ B âŸ¶ âŠ¦ A           </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âˆ§ B âŸ¶ âŠ¦ B           </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">orIl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âŸ¶ âŠ¦ A âˆ¨ B           </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIr</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ B âŸ¶ âŠ¦ A âˆ¨ B           </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} âŠ¦ A âˆ¨ B âŸ¶ (âŠ¦ A âŸ¶ âŠ¦ C) âŸ¶ (âŠ¦ B âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">impI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (âŠ¦ A âŸ¶ âŠ¦ B) âŸ¶ âŠ¦ A â‡’ B </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A â‡’ B âŸ¶ âŠ¦ A âŸ¶ âŠ¦ B   </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">notI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (âŠ¦ A âŸ¶ â†¯) âŸ¶ âŠ¦ Â¬ A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">notI</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ Â¬ A âŸ¶ âŠ¦ A âŸ¶ â†¯  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">notE</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">equivI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (âŠ¦ A âŸ¶ âŠ¦ B) âŸ¶ (âŠ¦ B âŸ¶ âŠ¦ A) âŸ¶ âŠ¦ A â‡” B  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,q] andI (impI [x] p x) (impI [x] q x)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="vc">equivEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A â‡” B âŸ¶ âŠ¦ A âŸ¶ âŠ¦ B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,a] impE (andEl p) a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A â‡” B âŸ¶ âŠ¦ B âŸ¶ âŠ¦ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,b] impE (andEr p) b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span>
<span class="w">  </span><span class="vc">imp2I</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} (âŠ¦ A âŸ¶ (âŠ¦ B âŸ¶ âŠ¦ C)) âŸ¶ âŠ¦ A â‡’ (B â‡’ C) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] [f] impI [p] (impI ([q] f p q))            </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">imp2E</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} âŠ¦ A â‡’ (B â‡’ C) âŸ¶ âŠ¦ A âŸ¶ âŠ¦ B âŸ¶ âŠ¦ C    </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] [p,q,r] impE (impE p q) r                  </span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">  </span><span class="vc">example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ A â‡’ (A âˆ§ A)  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A]impI [p]andI p p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DeclarativeProofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">cut</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦A âŸ¶ (âŠ¦A âŸ¶ âŠ¦B) âŸ¶ âŠ¦B</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,q] q p</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PROVE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">BY</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">have</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦A âŸ¶ âŠ¦A</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,p] p</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">HAVE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">BY</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Declarative_PL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLNatDed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DeclarativeProofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_trueI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">trueI</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">TRIVIAL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_falseE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">falseE</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">EXFALSO</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_andE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} âŠ¦ Aâˆ§B âŸ¶ (âŠ¦A âŸ¶ âŠ¦B âŸ¶ âŠ¦C) âŸ¶ âŠ¦C</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C,p,q] q (andEl p) (andEr p)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">FROM</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">OBTAIN</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w">   </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_orE</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">orE</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SPLIT</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">CASE</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">CASE</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10050</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_impI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">impI </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SUPPOSE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">500</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">example</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} âŠ¦ Aâˆ§B â‡’ ((Bâ‡’C)âˆ¨C â‡’ C) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C]</span>
<span class=" -MMT_ObjectExpression">    SUPPOSE (Aâˆ§B) [ab]â–ª</span>
<span class=" -MMT_ObjectExpression">    SUPPOSE ((Bâ‡’C)âˆ¨C) [bc]â–ª</span>
<span class=" -MMT_ObjectExpression">    PROVE B BY (</span>
<span class=" -MMT_ObjectExpression">      FROM ab OBTAIN [a,b]â–ª</span>
<span class=" -MMT_ObjectExpression">      HAVE B BY b</span>
<span class=" -MMT_ObjectExpression">    )[b]â–ª</span>
<span class=" -MMT_ObjectExpression">    SPLIT bc</span>
<span class=" -MMT_ObjectExpression">      CASE [r] HAVE C BY â‰ªâŠ¦Câ‰«</span>
<span class=" -MMT_ObjectExpression">      CASE [r] HAVE C BY r</span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">example2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} âŠ¦ Aâˆ§B â‡’ ((Bâ‡’C)âˆ¨C â‡’ C)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] impI[p]impI[q]orE q ([r] impE r (andEr p)) ([r]r)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ProofIrrelevance</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T a rule that makes all terms of type ded F equalâ™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TermIrrelevanceRule ded</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ProverTest</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">d</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">k</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">r</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ b</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ b âŸ¶ c</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">t</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ b âŸ¶ c âŸ¶ d</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">q</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">d âŸ¶ d</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ a âŸ¶ d </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â‰ªa âŸ¶ a âŸ¶ d â‰«</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLProofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLNatDed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ProofIrrelevance</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Not all of the automated proofs work at the moment. â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">test</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} âŠ¦ (a âˆ§ b) â‡’ (b âˆ§ a)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">_</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} âŠ¦ (a âˆ¨ b) â‡’ (b âˆ¨ a)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">_</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">interactive_example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ A â‡’ (A âˆ§ A)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â‰ª{A:prop}âŠ¦Aâ‡’Aâˆ§Aâ‰« </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLProofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLNatDed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f} âŠ¦ (forall [x] forall [y] f x y) â‡’ (forall [y] forall [x] f x y) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  </span><span class="cm">// = _</span><span class=" -MMT_OD">â˜</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f} âŠ¦ (exists [x] exists [y] f x y) â‡’ (exists [y] exists [x] f x y) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  </span><span class="cm">// = _</span><span class=" -MMT_OD">â˜</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// like fol.mmt but for sorted first-order logic âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedTerms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (tm S âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w">                           </span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (tm S âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLEQ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} tm S âŸ¶ tm S âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLNatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLNatDed  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A} ({x: tm S} âŠ¦ (A x)) âŸ¶ âŠ¦ âˆ€ A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A} âŠ¦ (âˆ€ A) âŸ¶ {x: tm S} âŠ¦ (A x)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A} {c} âŠ¦ (A c) âŸ¶ âŠ¦ âˆƒ [x: tm S] (A x) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">existsI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A,C} âŠ¦ (âˆƒ [x: tm S] A x) âŸ¶ ({x} âŠ¦ (A x) âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Declarative_SFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLNatDed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DeclarativeProofs</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_forallI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">forallI</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ASSUME</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">decl_existsI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">existsI</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">TAKE</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLEQNatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLNatDed  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,x: tm S} âŠ¦ x â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, T, x,y} âŠ¦ x â‰ y âŸ¶ {F: tm S âŸ¶ tm T} âŠ¦ (F x) â‰ (F y) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congF</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, x,y: tm S} âŠ¦ x â‰ y âŸ¶ {F: tm S âŸ¶ prop} âŠ¦ (F x) âŸ¶ âŠ¦ (F y)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">congF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, x,y: tm S} âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, x,y,z: tm S} âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ x â‰ z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trans3</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, w,x,y,z: tm S} âŠ¦ w â‰ x âŸ¶ âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ w â‰ z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S, w,x,y,z,p,q,r] trans (trans p q) r</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans4</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, v,w,x,y,z: tm S} âŠ¦ v â‰ w âŸ¶âŠ¦ w â‰ x âŸ¶ âŠ¦ x â‰ y âŸ¶ âŠ¦ y â‰ z âŸ¶ âŠ¦ v â‰ z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S, v,w,x,y,z,p,q,r,s] trans3 (trans p q) r s</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Magma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ term </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semigroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ (xâˆ˜y)âˆ˜z â‰ xâˆ˜(yâˆ˜z)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assocR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¦ xâˆ˜(yâˆ˜z) â‰ (xâˆ˜y)âˆ˜z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] sym assoc</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">assoc4</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{w,x,y,z} âŠ¦ ((wâˆ˜x)âˆ˜y)âˆ˜z â‰ wâˆ˜(xâˆ˜(yâˆ˜z))</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[w,x,y,z] trans3 (congT assoc [u]uâˆ˜z) assoc (congT assoc [u]wâˆ˜u)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} âŠ¦ wâˆ˜(xâˆ˜(yâˆ˜z)) â‰ ((wâˆ˜x)âˆ˜y)âˆ˜z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z] sym assoc4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} âŠ¦ (((vâˆ˜w)âˆ˜x)âˆ˜y)âˆ˜z â‰ vâˆ˜(wâˆ˜(xâˆ˜(yâˆ˜z)))</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z] trans4 (congT assoc4 [u]uâˆ˜z) assoc</span>
<span class=" -MMT_ObjectExpression">                              (congT assoc [u]vâˆ˜u) (congT assoc [u]vâˆ˜(wâˆ˜u))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ xâˆ˜y â‰ yâˆ˜x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Neutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">e</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term </span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="vc">neutLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ xâˆ˜e â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ xâˆ˜e â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Idempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ xâˆ˜x â‰ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Neutral</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Band</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Idempotent</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Multi-adjunctive meta-language (MAM), following the paper &quot;On the Expressive Power of user-defined effects&quot;.</span>
<span class="cm">   Formalized during Florian Rabe&#39;s visit to Matija Pretnar in June 2019âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MAM</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="sd"># Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">vtp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ctp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">eff âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">vprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp âŸ¶ vtp âŸ¶ vtp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Ã—</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sum</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp âŸ¶ vtp âŸ¶ vtp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Thunk</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} ctp e âŸ¶ vtp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Ret</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} vtp âŸ¶ ctp e</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">F</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} vtp âŸ¶ ctp e âŸ¶ ctp e</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â†’</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} ctp e âŸ¶ ctp e âŸ¶ ctp e</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&amp;</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd"># Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">vtm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">vtm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ctm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} ctp e âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">ctm</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">eff</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">unitterm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtm unit</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">O</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} vtm A âŸ¶ vtm B âŸ¶ vtm A Ã— B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pcase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,e,C: ctp e} vtm AÃ—B âŸ¶ (vtm A âŸ¶ vtm B âŸ¶ ctm C) âŸ¶ ctm C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inj1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} vtm A âŸ¶ vtm A + B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inj2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} vtm B âŸ¶ vtm A + B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">scase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,e,C: ctp e} vtm A+B âŸ¶ (vtm A âŸ¶ ctm C) âŸ¶ (vtm B âŸ¶ ctm C) âŸ¶ ctm C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">thunk</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: ctp e} ctm C âŸ¶ vtm U C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">T{</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">force</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: ctp e} vtm U C âŸ¶ ctm C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">!</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ret</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e} vtm A âŸ¶ ctm F e A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">bind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, C: ctp e} ctm F e A âŸ¶ (vtm A âŸ¶ ctm C) âŸ¶ ctm C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,e,C: ctp e} (vtm A âŸ¶ ctm C) âŸ¶ ctm A â†’ C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,e,C: ctp e} ctm A â†’ C âŸ¶ vtm A âŸ¶ ctm C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">cpair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e,C,D: ctp e} ctm C âŸ¶ ctm D âŸ¶ ctm C &amp; D</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">,,</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prj1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e,C,D:ctp e} ctm C &amp; D âŸ¶ ctm C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prj2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e,C,D:ctp e} ctm C &amp; D âŸ¶ ctm D</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EFF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MAM</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Opeff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">opeff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Op âŸ¶ vtp âŸ¶ vtp âŸ¶ Opeff</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‡’</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">opcons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Opeff âŸ¶ eff âŸ¶ eff</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">handler</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp âŸ¶ eff âŸ¶ {e:eff} ctp e âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŸ¹</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="vc">rethandler</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,e,C: ctp e} (vtm A âŸ¶ ctm C) âŸ¶ A âˆ… âŸ¹ C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">hret</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ophandler</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{o,A1,A2,B,e,f,C: ctp f}</span>
<span class=" -MMT_ObjectExpression">               B e âŸ¹ C âŸ¶</span>
<span class=" -MMT_ObjectExpression">               (vtm A1 âŸ¶ vtm U (A2 â†’ C) âŸ¶ ctm C) âŸ¶</span>
<span class=" -MMT_ObjectExpression">               B ((o A1 â‡’ A2) âŠ e) âŸ¹ C</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">               </span><span class="p">#</span><span class="w"> </span><span class="ss">hop</span><span class="w"> </span><span class="si">8</span><span class="w"> </span><span class="si">9</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">subsumed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Opeff âŸ¶ eff âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{o, A, B, e} (o A â‡’ B) âˆˆ e âŸ¶ vtm A âŸ¶ ctm F e B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">op</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">handle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, f, C: ctp f} ctm F e A âŸ¶ A e âŸ¹ C âŸ¶ ctm C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">handle</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monads</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MAM</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Monad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} (vtp âŸ¶ ctp e) âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">monad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: vtp âŸ¶ ctp e}</span>
<span class=" -MMT_ObjectExpression">              ({a:vtp} vtm a âŸ¶ ctm C a) âŸ¶</span>
<span class=" -MMT_ObjectExpression">              ({a,b} vtm U (C a) âŸ¶ vtm U (a â†’ C b) âŸ¶ ctm C b) âŸ¶</span>
<span class=" -MMT_ObjectExpression">              Monad e C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">where</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">moncons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e,C} Monad e C âŸ¶ eff</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰º</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, C, M: Monad e C}</span>
<span class=" -MMT_ObjectExpression">         ctm (C A) âŸ¶</span>
<span class=" -MMT_ObjectExpression">         ctm F (e â‰º M) A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î¼</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">reify</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,e,C,M: Monad e C} ctm F (e â‰º M) A âŸ¶ ctm (C A)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">reify</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DelimitedContinuations</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MAM</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dccons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} ctp e âŸ¶ eff</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">shift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, C: ctp e} (vtm U (A â†’ C) âŸ¶ ctm C) âŸ¶</span>
<span class=" -MMT_ObjectExpression">                           ctm F (dccons e C) A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">S</span><span class="si">0</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="vc">reset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, C: ctp e} ctm F e A âŸ¶ (vtm A âŸ¶ ctm C) âŸ¶ ctm C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ContinuationMonad</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monads</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cont</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: ctp e} vtp âŸ¶ ctp e</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[e,C,a] (U (a â†’ C)) â†’ C</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">cont</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">contmon</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: ctp e} Monad e [a] cont C a</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[e,C] where ([a,x] Î»[c] c! @ x) ;</span>
<span class=" -MMT_ObjectExpression">               [a,b,m,f] Î»[c] m! @ T{Î»[y] f! @ y @ c}</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">contmon</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">delMon</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DelimitedContinuations</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?ContinuationMonad</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MAM</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dccons</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[e,C] e â‰º contmon C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">shift</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,e,C,p] Î¼ Î» p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T The next declarations has a typing error:</span>
<span class="cm">     We have p: ctm F e A, but we need</span>
<span class="cm">     ctm F (e â‰º contmon C) A.</span>
<span class="cm">     (Here â‰ªTâ‰« denotes a missing term of type T.)</span>
<span class="cm">  â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">reset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,e,C,p: ctm F e A,r]</span>
<span class=" -MMT_ObjectExpression">    (reify (contmon C) â‰ªctm F (e â‰º contmon C) Aâ‰«) @ T{Î» r}</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/naproche-sad</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// NaprocheSad is based on the Sad system, which uses the ForTheL language. </span>
<span class="cm">   See http://nevidal.org/sad.en.html, in particular for the full grammar.</span>
<span class="cm">   This is a preliminary formalization made live while listening to a talk by Peter Koepke, the main developer.</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NaprocheSad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">set</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// sets may be undefinedâ™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// binary connectives assume the (negation of the) first argument to show definedness of the second oneâ™</span><span class="w"></span>

<span class="w">  </span><span class="vc">equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">elementof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ prop</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">notion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_a</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ notion âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">is</span><span class="w"> </span><span class="ss">a</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">Elem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">notion âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Elem</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// unclear â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">function</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ notion</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â†’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Dom</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} Elem a â†’ b âŸ¶ set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} Elem a â†’ b âŸ¶ set</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// unclear:â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// special expressions: no N, every N for notions Nâ™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// syntax of linguistic predicates:</span>
<span class="cm">     is, e.g., x is less than y</span>
<span class="cm">     is a: x is an element of y</span>
<span class="cm">     does: x converges to y</span>
<span class="cm">     has:  x has unit yâ™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// declarations:</span>
<span class="cm">     * signature extension: function, predicate, notion</span>
<span class="cm">     * definition: function, predicate, notion</span>
<span class="cm">     * axiom</span>
<span class="cm">     * theorem</span>
<span class="cm">     Every declaration has an internal structure of low-level declarations: assumptions, affirmations, selection (exists-elimination), case distinction (or-elimination), local definition.</span>
<span class="cm">     Every theorem has exactly one affirmation, which occurs at the end.â™</span><span class="w"> </span>
<span class="w">     </span>
<span class="w">  </span><span class="cm">// declarations are elaborated into untyped first-order logic (signature declarations are implicit)â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// ontological correctness: all terms are defined (part of verification)â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// after elaboration, verification generates proof oblibations for ontological correctness and  proof steps (one task per low-level declaration)â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// A proof step may change the proof goal:</span>
<span class="cm">     * if a proof of Aâˆ§B is expected and a proof of A is provided, the proof goal changes to B</span>
<span class="cm">     * also for proofs of negation-inverted implication</span>
<span class="cm">     * also for case distinction (old thesis is relativized by disjunction of cases)</span>
<span class="cm">     * also for user-defined symbols like subset (unclear how the system knows about that)</span>
<span class="cm"> â™</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="cm">// combination of internal and external reasoning and the generated proof obligations (back and forth)</span>
<span class="cm">    * external provers do not see all ZFC axioms, e.g., only relevant instantiations of extensionality</span>
<span class="cm">     â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">nat</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat             </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">O</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat      </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">one</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat             </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">zero&#39;           </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">I</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat âŸ¶ nat </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat âŸ¶ nat </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatRules</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Nat </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} âŠ¦ X = X  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ X = Y âŸ¶ âŠ¦ Y = X </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ X = Y âŸ¶ âŠ¦ Y = Z âŸ¶ âŠ¦ X = Z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eq_leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ X = Y âŸ¶ âŠ¦ Y â‰¤ Z âŸ¶ âŠ¦ X â‰¤ Z  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ X â‰¤ Y âŸ¶ âŠ¦ Y = Z âŸ¶ âŠ¦ X â‰¤ Z  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_comm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ X + Y = Y + X  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ (X + Y) + Z = X + (Y + Z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut_Ex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} âŠ¦ X + O = X </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} âŠ¦ O + X = X</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X] trans plus_comm (plus_neut_Ex X)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} âŠ¦ X + O = X </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X] plus_neut_Ex X </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ X + Y&#39; = (X+Y)&#39;</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ X&#39; + Y = (X+Y)&#39;</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">times_comm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ X * Y = Y * X  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ (X * Y) * Z = X * (Y * Z)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_neut</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} âŠ¦ X * I = X</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">times_zero</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} âŠ¦ X * O = O</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ X * Y&#39; = (X*Y) + X</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ X&#39; * Y = (X*Y) + X</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">distrib</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ X * (Y + Z) = X * Y + X * Z</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">leq_refl</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} âŠ¦ Xâ‰¤X  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_trans</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ Xâ‰¤Y âŸ¶ âŠ¦ Yâ‰¤Z âŸ¶ âŠ¦ Xâ‰¤Z    </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ Xâ‰¤Y âŸ¶ âŠ¦ Yâ‰¤X âŸ¶ âŠ¦ X=Y      </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_mono</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ Xâ‰¤Y âŸ¶ âŠ¦ X+Z â‰¤ Y+Z  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_mono_L</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ Xâ‰¤Y âŸ¶ âŠ¦ Z+X â‰¤ Z+Y  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">                </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,Z,p] leq_eq (eq_leq plus_comm (plus_mono p)) plus_comm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_invmono</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ X+Zâ‰¤Y+Z âŸ¶ âŠ¦ Xâ‰¤Y  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">NatOnly</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">least</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} âŠ¦ O â‰¤ X </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">plus_larger_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ Xâ‰¤X+Y  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X][Y] eq_leq (sym plus_neut) (plus_mono_L least)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">plus_larger_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ Yâ‰¤X+Y  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X][Y] leq_eq plus_larger_L plus_comm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">times_mono</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ X â‰¤ Y âŸ¶ âŠ¦ X * Z â‰¤ Y * Z  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">times_invmono</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} âŠ¦ X * Z â‰¤ Y * Z âŸ¶ âŠ¦ X â‰¤ Y  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NatMinus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules/NatOnly</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="cm">// A partial subtraction operation that takes a proof of definedness as a 3rd argument. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} âŠ¦ Yâ‰¤X âŸ¶ nat  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">!</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w">  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus_pi</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,P,Q} âŠ¦ X-Y!P = X-Y!Q                  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">minus_intro_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} {p: âŠ¦ X+Y=Z} âŠ¦ Z-Y!(leq_eq plus_larger_R p) = X  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus_intro_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} {p: âŠ¦ X+Y=Z} âŠ¦ Z-X!(leq_eq plus_larger_L p) = Y  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">                </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,Z] [p] trans minus_pi (minus_intro_L (trans plus_comm p))</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus_elim</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z,P} âŠ¦ Z-Y!P = X  âŸ¶  âŠ¦ X+Y = Z                      </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span>
<span class="w">  </span><span class="cm">// minus_inverse : {X} âŠ¦ X-X!leq_refl = O  â˜</span>
<span class="cm">                = [X] trans minus_pi (minus_intro_R (plus_neut_Ex X)) â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// minus_neut    : {X} âŠ¦ X-O!least = X â˜</span>
<span class="cm">                = [X] trans minus_pi (minus_intro_L (plus_neut_Ex X))  â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// also provable: associativity +- (maybe X-(Y+Z)=(X-Y)-Z must be axiom) and distributivity *- â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLPatterns</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LFS</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">pattern</span><span class="w"> </span><span class="nc">fun</span><span class="p">(</span><span class="nv">n:NAT</span><span class="p">)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term^n âŸ¶ term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLPatterns</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">real</span><span class="w"> </span><span class="l l-URI">scala://real.omdoc.org/</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   A first test case for writing imperative programs as MMT theories. âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ProgLang</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?CF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜real:?Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜real:?StandardNat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">print</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} a âŸ¶ None</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">print</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/cf?Print</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Counter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ProgLang</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">counter</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ None</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] counter = counter + n</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">  </span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Program</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ProgLang</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">main</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">print 1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// This one is still experimental.â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// main2 =</span>
<span class="cm">    var c = new examples?Counter in</span>
<span class="cm">    c.add 3;</span>
<span class="cm">    print c.add</span>
<span class="cm">  â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/programs</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Machine</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">loc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">command</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">obj âŸ¶ loc âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">get</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">update</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">delete</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">chan</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">stdio</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">out</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">execute</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">command âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/programs</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Syntax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Unit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">prog</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat âŸ¶ prog Nat</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">succ</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">one</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">succ zero</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a âŸ¶ prog a âŸ¶ prog Bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool âŸ¶ prog Bool           </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat âŸ¶ prog Nat âŸ¶ prog Nat  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat âŸ¶ prog Nat âŸ¶ prog Nat  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">seq</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a âŸ¶ prog b âŸ¶ prog b          </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog Bool âŸ¶ prog a âŸ¶ prog a âŸ¶ prog a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool âŸ¶ prog Unit âŸ¶ prog Unit</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b,c] if b then c else unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">while</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool âŸ¶ prog Unit âŸ¶ prog Unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">print</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a âŸ¶ prog Unit</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">print</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">read</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">val</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a âŸ¶ (prog a âŸ¶ prog b) âŸ¶ prog b</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">val</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">Var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a âŸ¶ (Var a âŸ¶ prog b) âŸ¶ prog b</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">var</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">varref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ prog a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ prog a âŸ¶ prog Unit</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â†</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">main</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">val (read Nat) [x]</span>
<span class=" -MMT_ObjectExpression">         var zero [y]</span>
<span class=" -MMT_ObjectExpression">         while (Â¬ x = y&#39;) (</span>
<span class=" -MMT_ObjectExpression">           print x;</span>
<span class=" -MMT_ObjectExpression">           y â† succ y&#39;</span>
<span class=" -MMT_ObjectExpression">         )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">Machine</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">loc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">command</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">obj âŸ¶ loc âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">get</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">update</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">delete</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">chan</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">stdio</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">out</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan âŸ¶ obj âŸ¶ command</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">execute</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">command âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OperationalSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Machine</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">objectify</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a âŸ¶ obj  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">objectify</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">varloc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ loc âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a âŸ¶ prog a âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŸ¿</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">eval_seq</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, p:prog a, q: prog b, x,y} pâŸ¿x âŸ¶ qâŸ¿y âŸ¶ p;q âŸ¿ y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_if_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c, t,e: prog a, x} câŸ¿true âŸ¶ tâŸ¿x âŸ¶ if c then t else e âŸ¿ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval_if_false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c, t,e: prog a, x} câŸ¿false âŸ¶ eâŸ¿x âŸ¶ if c then t else e âŸ¿ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_while_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c, b, x, y} câŸ¿true âŸ¶ bâŸ¿x âŸ¶ while c b âŸ¿ y âŸ¶ while c b âŸ¿ y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval_while_false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c, b} câŸ¿false âŸ¶ while c b âŸ¿ unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_var</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, p: prog a, cont: Var a âŸ¶ prog b, l, x, y}</span>
<span class=" -MMT_ObjectExpression">                pâŸ¿x âŸ¶ execute (add (objectify x) l) âŸ¶ ({v} v@l âŸ¶ cont v âŸ¿ y)</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ (var p cont)âŸ¿y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">             </span>
<span class="w">  </span><span class="vc">eval_varref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v:Var a,l,x}</span>
<span class=" -MMT_ObjectExpression">                v@l âŸ¶ execute (get l (objectify x))</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ v&#39; âŸ¿ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">              </span>
<span class="w">  </span><span class="vc">eval_assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, v: Var a,p,l,x}</span>
<span class=" -MMT_ObjectExpression">                pâŸ¿x âŸ¶ v@l âŸ¶ execute (update l (objectify x))</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ vâ†p âŸ¿ unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_print</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, p: prog a, x}</span>
<span class=" -MMT_ObjectExpression">                pâŸ¿x âŸ¶ execute (out stdio (objectify x))</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ (print p) âŸ¿ unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_read</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, x: prog a}</span>
<span class=" -MMT_ObjectExpression">                execute (in stdio (objectify x))</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ (read a) âŸ¿ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/programs</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OperationalSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Machine</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">objectify</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a âŸ¶ obj  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">objectify</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">varloc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ loc âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a âŸ¶ prog a âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŸ¿</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">eval_seq</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, p:prog a, q: prog b, x,y} pâŸ¿x âŸ¶ qâŸ¿y âŸ¶ p;q âŸ¿ y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_if_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c, t,e: prog a, x} câŸ¿true âŸ¶ tâŸ¿x âŸ¶ if c then t else e âŸ¿ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval_if_false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c, t,e: prog a, x} câŸ¿false âŸ¶ eâŸ¿x âŸ¶ if c then t else e âŸ¿ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_while_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c, b, x, y} câŸ¿true âŸ¶ bâŸ¿x âŸ¶ while c b âŸ¿ y âŸ¶ while c b âŸ¿ y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval_while_false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c, b} câŸ¿false âŸ¶ while c b âŸ¿ unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_var</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, p: prog a, cont: Var a âŸ¶ prog b, l, x, y}</span>
<span class=" -MMT_ObjectExpression">                pâŸ¿x âŸ¶ execute (add (objectify x) l) âŸ¶ ({v} v@l âŸ¶ cont v âŸ¿ y)</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ (var p cont)âŸ¿y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">             </span>
<span class="w">  </span><span class="vc">eval_varref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v:Var a,l,x}</span>
<span class=" -MMT_ObjectExpression">                v@l âŸ¶ execute (get l (objectify x))</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ v&#39; âŸ¿ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">              </span>
<span class="w">  </span><span class="vc">eval_assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, v: Var a,p,l,x}</span>
<span class=" -MMT_ObjectExpression">                pâŸ¿x âŸ¶ v@l âŸ¶ execute (update l (objectify x))</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ vâ†p âŸ¿ unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_print</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, p: prog a, x}</span>
<span class=" -MMT_ObjectExpression">                pâŸ¿x âŸ¶ execute (out stdio (objectify x))</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ (print p) âŸ¿ unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_read</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, x: prog a}</span>
<span class=" -MMT_ObjectExpression">                execute (in stdio (objectify x))</span>
<span class=" -MMT_ObjectExpression">              âŸ¶ (read a) âŸ¿ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/programs</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Syntax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Unit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">prog</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat âŸ¶ prog Nat</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">succ</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">one</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">succ zero</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a âŸ¶ prog a âŸ¶ prog Bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool âŸ¶ prog Bool           </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat âŸ¶ prog Nat âŸ¶ prog Nat  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat âŸ¶ prog Nat âŸ¶ prog Nat  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">seq</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a âŸ¶ prog b âŸ¶ prog b          </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog Bool âŸ¶ prog a âŸ¶ prog a âŸ¶ prog a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool âŸ¶ prog Unit âŸ¶ prog Unit</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b,c] if b then c else unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">while</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool âŸ¶ prog Unit âŸ¶ prog Unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">print</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a âŸ¶ prog Unit</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">print</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">read</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">val</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a âŸ¶ (prog a âŸ¶ prog b) âŸ¶ prog b</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">val</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">Var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a âŸ¶ (Var a âŸ¶ prog b) âŸ¶ prog b</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">var</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">varref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ prog a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ prog a âŸ¶ prog Unit</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â†</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">main</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">val (read Nat) [x]</span>
<span class=" -MMT_ObjectExpression">         var zero [y]</span>
<span class=" -MMT_ObjectExpression">         while (Â¬ x = y&#39;) (</span>
<span class=" -MMT_ObjectExpression">           print x;</span>
<span class=" -MMT_ObjectExpression">           y â† succ y&#39;</span>
<span class=" -MMT_ObjectExpression">         )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/physics</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Quantities</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">examples?Real</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// the type of dimensions, e.g., time, length â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">dim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">scalar</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_dim</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim âŸ¶ dim âŸ¶ dim             </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">inv_dim</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim âŸ¶ dim                   </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â»</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">div_dim</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim âŸ¶ dim âŸ¶ dim </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,e] d*eâ» </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">square_dim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim âŸ¶ dim</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d] d*d        </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Â²</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">cube_dim</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim âŸ¶ dim</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d] d*d*d      </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Â³</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">eq_dim</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim âŸ¶ dim âŸ¶ type               </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">assoc</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim,e:dim,f:dim} d*(e*f)=(d*e)*f</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">comm</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim,e:dim} d*e=e*d</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_scalar_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} d*scalar = d        </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_scalar_left</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} scalar*d = d        </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_inv_right</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim} d*dâ» = scalar   </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_inv_left</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim} dâ»*d = scalar   </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">inv_mult</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim,e:dim} (d*e)â» = dâ»*eâ»   </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">inv_inv</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} dâ»â» = d                    </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>

<span class="w">   </span><span class="cm">// the type of quantities of a certain dimension, e.g., 10 s, 100 m â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">quantity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">eq_quant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} $d âŸ¶ $d âŸ¶ type               </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">==</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// the type of units of a dimension, e.g., second, meter</span>
<span class="cm">      units are functions that map real numbers to quantities â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d] real âŸ¶ $d</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// takes a real number and a unit and makes the quantity</span>
<span class="cm">      e.g., 10&#39;meterâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">makeQuantity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} real âŸ¶ unit d âŸ¶ $ d</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,r,u] u r</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// addition and subtraction quantities â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">add_quant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} $d âŸ¶ $d âŸ¶ $d  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">++</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">sub_quant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} $d âŸ¶ $d âŸ¶ $d  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">--</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">add_quant_same_unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,u: unit d, p, q} p&#39;u ++ q&#39;u == (p + q)&#39;u</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">sub_quant_same_unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,u: unit d, p, q} p&#39;u -- q&#39;u == (p - q)&#39;u</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// multiplication and division of dimensions, quantities, and units (should be imported from elsewhere) â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_quant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,e} $d âŸ¶ $e âŸ¶ $(d * e)  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">**</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">div_quant</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,e} $d âŸ¶ $e âŸ¶ $(d / e)  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">//</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_unit</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,e} unit d âŸ¶ unit e âŸ¶ unit(d * e)  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">**</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,e,u,v] [r] (r&#39;u) ** (r&#39;v)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">div_unit</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,e} unit d âŸ¶ unit e âŸ¶ unit(d / e)  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">//</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,e,u,v] [r] (r&#39;u) // (r&#39;v)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">mult_scalar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} real âŸ¶ $ d âŸ¶ $ d</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">multiples_of</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} $ d âŸ¶ unit d </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,q] [r] r @ q</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">multiples_of</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Dimensions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Quantities</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">length</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">time</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">mass</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">temperature</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">area</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">length Â²</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">volume</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">length Â³</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">velocity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">length / time</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">acceleration</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">length * timeâ»Â²</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">force</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mass * acceleration</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">pressure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">force * lengthâ»Â²</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Prefixes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Dimensions</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// TODO â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">milli</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} unit d âŸ¶ unit d</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [d,u] [r] (r / 1000) &#39; u</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">milli</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">centi</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} unit d âŸ¶ unit d</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [d,u] [r] (r / 100) &#39; u</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">centi</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">deci</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} unit d âŸ¶ unit d</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [d,u] [r] (r / 10) &#39; u</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">deci</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Units</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Dimensions</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">meter</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ length</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">second</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ time</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">gramm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ mass</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">meters</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit length</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of meter</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">seconds</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit time</span><span class=" -MMT_OD">â˜</span><span class="w">   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of second</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">gramms</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit mass</span><span class=" -MMT_OD">â˜</span><span class="w">   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of gramm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">kelvin</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$temperature</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">kelvins</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit temperature</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of kelvin</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DerivedUnits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Prefixes</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Units</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">litre</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ volume</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = (1 &#39; deci meters) ** (1 &#39; deci meters) ** (1 &#39; deci meters)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">litres</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit volume</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of litre</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CookingUnit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DerivedUnits</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">tablespoon</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ volume</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">teaspoon</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ volume</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">cup</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ volume</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">tablespoons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit volume</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (15 &#39; milli litres)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">teaspoons</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit volume</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (5 &#39; milli litres)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">cups</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit volume</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (250 &#39; milli litres)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TimeUnits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Units</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">minutes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit time</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (60 &#39; seconds)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">hours</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit time</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (60 &#39; minutes)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TemperatureUnits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Units</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">celsius</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit temperature</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">//  = [r] (r+273+(15/100)) &#39; kelvins </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Â°C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">fahrenheit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit temperature</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">//  = [r] (r-32)*5/9 Â°C  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Â°F</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfrules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info/</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">stdlit</span><span class="w"> </span><span class="l l-URI">scala://uom.api.mmt.kwarc.info/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   a quick, minimal definition of fractional numbers for use in quantities.mmt âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">real</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real âŸ¶ real âŸ¶ real</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real âŸ¶ real âŸ¶ real </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real âŸ¶ real âŸ¶ real</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">div</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real âŸ¶ real âŸ¶ real</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Realize real stdlit?StandardRat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://hku.hk/PL</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T The SEDEL type theory (simple type theory with distributive intersection types).</span>
<span class="cm">   Formalized with Bruno Oliveira&#39;s students during Florian Rabe&#39;s March 2019 visit at Hongkong University.</span>
<span class="cm">   </span>
<span class="cm">   See also https://i.cs.hku.hk/~bruno/papers/nested.pdf and https://i.cs.hku.hk/~bruno/papers/traits.pdf</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">// define some namespace prefixesâš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Subtyping</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfrules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info/</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">stdlit</span><span class="w"> </span><span class="l l-URI">scala://uom.api.mmt.kwarc.info/</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SEDEL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">lfx:?LFSubtyped</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="sd"># Syntactic Categories</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T types and terms of simple type theoryâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="sd"># Judgments</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd">## Equality of terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm A âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰¡</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X: tm A} X â‰¡ A X</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="cm">// admissible rule (admissibility proof by logical relation)â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,X,Y: tm A, F: tm A âŸ¶ tm B} X â‰¡ A Y âŸ¶ (F X) â‰¡ B (F Y)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Subtyping</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sbt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">spt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] B &lt; A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T proof irrelevance for subtyping proofsâ™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?TermIrrelevanceRule sbt</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">st_refl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A &lt; A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_trans</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} A &lt; B âŸ¶ B &lt; C âŸ¶ A &lt; C</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T embed SEDEL subtyping into LF subtypingâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_shallow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A &lt; B âŸ¶ tm A &lt;* tm B</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Relationship between Equality and Subtyping</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T equality depends on the type at which terms are compared.</span>
<span class="cm">     Equality is preserved when going to larger types.</span>
<span class="cm">     But not necessarily the other way round, e.g., all terms are equal at unit type.â™</span><span class="w"> </span>
<span class="w">  </span><span class="cm">// TODO: this should type-checkâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// equal_st : {A,B,s:tm A, t: tm A} A &lt; B âŸ¶ s â‰¡ A t âŸ¶ s â‰¡ B tâ™</span><span class="w">  </span>
<span class="w">  </span>
<span class="w">  </span><span class="sd"># Syntax</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Function Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â†’</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_st</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,D} A &gt; C âŸ¶ B &lt; D âŸ¶ A â†’ B &lt; C â†’ D</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A âŸ¶ tm B) âŸ¶ tm (A â†’ B)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm (A â†’ B) âŸ¶ tm A âŸ¶ tm B </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, F: tm A âŸ¶ tm B, a} (Î» [x] F x) @ a â‰¡ B (F a)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">beta</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong_apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm (A â†’ B), G, X, Y}</span>
<span class=" -MMT_ObjectExpression">                 (F â‰¡ (A â†’ B) G) âŸ¶ X â‰¡ A Y âŸ¶ (F @ X) â‰¡ B (G@Y)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong_lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A âŸ¶ tm B,G} ({x} (F x) â‰¡ B (G x)) âŸ¶ (Î» F) â‰¡ (A â†’ B) (Î» G)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Top type</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The top type can be seen as the common supertype of all types, the unit type, and the neutral element of intersection.â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">top</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¤</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm âŠ¤</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_top</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A &lt; âŠ¤</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eq_top</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: tm âŠ¤} x â‰¡ âŠ¤ unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Bottom type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">bottom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¥</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_bottom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¥ &lt; A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd">## Intersection types</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&amp;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_st_left</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A &amp; B &lt; A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_st_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A &amp; B &lt; B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_glb</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} C &lt; A âŸ¶ C &lt; B âŸ¶ C &lt; A &amp; B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">disjoint</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?TermIrrelevanceRule disjoint</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">disjointIntro</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ({C} C &gt; A âŸ¶ C &gt; B âŸ¶ C &gt; âŠ¤) âŸ¶ A * B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">disjointElim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A * B âŸ¶ {C} C &gt; A âŸ¶ C &gt; B âŸ¶ C &gt; âŠ¤</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// TODO: these definitions should type-checkâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_left</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A &amp; B âŸ¶ tm A</span><span class=" -MMT_OD">â˜</span><span class="cm">// = [A,B,x] x</span><span class=" -MMT_OD">â˜</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A &amp; B âŸ¶ tm B</span><span class=" -MMT_OD">â˜</span><span class="cm">// = [A,B,x] x</span><span class=" -MMT_OD">â˜</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_in</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} {a:tm A} {b: tm B} A * B âŸ¶ tm A &amp; B</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,,</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">%I5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// TODO: this must solve the proof term (which is in the context) as an implicit argumentâ™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// cong_inter_in : {A,B} A * B âŸ¶ {a1,a2: tm A, b1,b2: tm B}</span>
<span class="cm">                  a1 â‰¡ A a2 âŸ¶ b1 â‰¡ B b2 âŸ¶ (a1 ,,h b1) â‰¡ (A &amp; B) (a2 ,, b2)â™</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Distributivity is natural but makes it harder to devise algorithms for subtyping.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} (A â†’ B) &amp; (A â†’ C) &lt; A â†’ (B &amp; C)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_distrib_0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¤ &lt; (A â†’ âŠ¤)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">top_arrow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¤ &lt; (âŠ¤ â†’ âŠ¤)</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">st_distrib_0 âŠ¤</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd">## Literals</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">nat</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm nat âŸ¶ tm nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T import lexing and computation rules for literalsâ™</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Realize (tm nat) stdlit?StandardNat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Realize zero stdlit?Arithmetic/Zero</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Realize succ stdlit?Arithmetic/Succ</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="sd"># Testing</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">identity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A â†’ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] Î» [x] x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">id</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compose</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} tm A â†’ B âŸ¶ tm B â†’ C âŸ¶ tm A â†’ C</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C,f,g] Î»[x] g @ (f @ x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="vc">test</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(id nat) @ (succ 1) â‰¡ nat 2</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">beta ([x] x) 2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="w">  </span>
<span class="w">  </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FlexaryConnectives</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LFS</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">flexand</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} prop^n âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â‹€</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexandI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n} âŸ¨&#39; âŠ¦ a..i | i:n &#39;âŸ© âŸ¶ âŠ¦ â‹€ a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexandE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n} âŠ¦ â‹€ a âŸ¶ {i} DED (succ i) LEQ n âŸ¶ âŠ¦ a..i</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">flexor</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} prop^n âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â‹</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexorI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n} {i} DED (succ i) LEQ n âŸ¶ âŠ¦ a..i âŸ¶ âŠ¦ â‹ a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexorE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n} {C} âŠ¦ â‹ a âŸ¶ âŸ¨&#39; âŠ¦ a..i âŸ¶ âŠ¦ C |i:n &#39;âŸ© âŸ¶ âŠ¦ C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fleximp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} prop^n âŸ¶ prop âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‡’*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fleximpI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n, b} (âŸ¨&#39; âŠ¦ a..i|i:n &#39;âŸ© âŸ¶ âŠ¦ b) âŸ¶ âŠ¦ a â‡’* b</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fleximpE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n, b} âŠ¦ a â‡’* b âŸ¶ âŸ¨&#39; âŠ¦ a..i|i:n &#39;âŸ© âŸ¶ âŠ¦ b</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FlexaryQuantifiers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LFS</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">flexforall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} (term^n âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€*</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexforallI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, F: term^n âŸ¶ prop} ({x:term^n} âŠ¦ F x) âŸ¶ âŠ¦ âˆ€* [x] F x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexforallE</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, F: term^n âŸ¶ prop} {x:term^n} âŠ¦ (âˆ€* [x] F x) âŸ¶ âŠ¦ F x</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">flexexists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} (term^n âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ*</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexexistsI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, F: term^n âŸ¶ prop} {x:term^n} âŠ¦ F x âŸ¶ âŠ¦ âˆƒ* [x] F x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexexistsE</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, F: term^n âŸ¶ prop,C} ({x:term^n} âŠ¦ (âˆƒ* [x] F x) âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   a simple language for set theory</span>
<span class="cm">     This primarily exemplifies advanced notations for parsing and presentation. âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">set</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">75</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  </span><span class="cm">// No printable characters are reserved. Here = is used as a delimiter. </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type     </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ded</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Elem A yields a for elements of the set A.</span>
<span class="cm">     Its notation is chosen such that variable attributions can be parsed and presented as x â€âˆˆ A instead of x : Elem A.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Elem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ type       </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Elem</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">70</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The following declaration lifts equal to the types Elem A.</span>
<span class="cm">     For parsing (#) it needs a different notation (==); for presentation (##) we can reuse =.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">elemequal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} Elem A âŸ¶ Elem A âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">==</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">                                          </span><span class="cm">//  This notation for presentation is 2-dimensional: _ yields a subscript and %I marks an implicit (hidable) argument. </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                                          </span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// A universal quantifier over all elements of a given set.</span>
<span class="cm">     Using Elem A, the relativization can be expressed in the type system.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (Elem A âŸ¶ prop) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="cm">//  The notation uses V2T for an attributed variable (x â€âˆˆ A) and -3 for the scope.</span>
<span class="cm">             Thus, forall is a binder as far as the MMT notation system is concerned.</span>
<span class="cm">             The type system considers it as a higher-order constant of LF. The LF plugin for MMT configures the conversion between the two. </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">empty</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set       </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="cm">// Several set operators use {}-based notations and are binders.</span>
<span class="cm">     MMT can handle that.</span>
<span class="cm">     However, we have to use ; instead of : for replacement because the delimiter scheme { : } is already used for the Pi symbol of LF.</span>
<span class="cm">     Because the notations are left- and right-closed, we can give them very low precedences, which has the effect that they act like brackets.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (Elem A âŸ¶ prop) âŸ¶ set      </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100004</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">repl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} (Elem A âŸ¶ Elem B) âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="ss">-</span><span class="si">4</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">V3T</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100006</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">union</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set          </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆª</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set          </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ©</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// The big operators for union and intersection are binders with 2-dimensional notations.</span>
<span class="cm">     In the __ produces underscripts.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (Elem A âŸ¶ set) âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â‹ƒ</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class="w">  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">â‹ƒ</span><span class="w"> </span><span class="ss">__</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">biginter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (Elem A âŸ¶ set) âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â‹‚</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class="w">  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">â‹‚</span><span class="w"> </span><span class="ss">__</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fun</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_OD">â˜</span><span class="w">  </span><span class="cm">//  ^ produces superscripts. </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lam</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} (Elem A âŸ¶ Elem B) âŸ¶ Elem (fun A B)       </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">app</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} Elem (fun A B) âŸ¶ Elem A âŸ¶ Elem B         </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">prod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Ã—</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} Elem A âŸ¶ Elem B âŸ¶ Elem (A Ã— B)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="cm">//  We can use () in notations as well. But the precedence has to below the precedence of the built-in notation for bracketed expressions. </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">       </span><span class="p">#</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000001</span><span class=" -MMT_OD">â˜</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// The two projection use, e.g., ._1 for parsing and subscripts for presentation. %D1 yields 1 as a delimiter (instead of an argument marker). â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi1</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} Elem (A Ã— B) âŸ¶ Elem A</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">._</span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="ss">%D</span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi2</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} Elem (A Ã— B) âŸ¶ Elem B</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">._</span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">201</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="ss">%D</span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">cardinality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100000</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Some example expressions that use the notations. â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{F: Elem A âŸ¶ set} ded A âˆ© â‹ƒ x âˆˆ A. (F x) = â‹ƒ x. A âˆ© (F x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pairs</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ded {x âˆˆ A Ã— A | x._1 == x._2} = {(x,x) ; x âˆˆ A} </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sizes</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (ded |{fâˆˆAâ‡’A|âˆ€xâˆˆA.f@x==x}|=|âˆ…â‡’âˆ…|)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   polymorphic equality (essentially identity types) âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a âŸ¶ a âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:a} x = x   </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,x,y} x = y âŸ¶ {f: a âŸ¶ b} (f x) = (f y)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cast</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, A: a âŸ¶ type, x:a, y:a} x = y âŸ¶ A x âŸ¶ A y</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">sym</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:a,y} x = y âŸ¶ y = x</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x,y][p] cast a ([u] u = x) x y p (refl x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:a,y,z} x = y âŸ¶ y = z âŸ¶ x = z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x,y,z,p,q] cast a ([u] x = u) y z q p</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   polymorphic lists âš</span><span class="w"></span>
<span class="w"> </span><span class="kd">theory</span><span class="w"> </span><span class="nc">Lists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">list</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">nil</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} list a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">nil</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} a âŸ¶ list a âŸ¶ list a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">75</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">append</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} list a âŸ¶ list a âŸ¶ list a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">75</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">append_nil</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, m: list a} nil + m = m</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">append_cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, x: a, l: list a, m: list a} (x, l) + m = x , (l + m)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DepSumChurch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A âŸ¶ tm A âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">Sigma</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A âŸ¶ tp) âŸ¶ tp                                      </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î£</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pair</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A âŸ¶ tp} {x} tm (B x) âŸ¶ tm Î£ [x] B x             </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pair</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi1</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A âŸ¶ tp} tm (Î£ [x] B x) âŸ¶ tm A                   </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi2</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A âŸ¶ tp} {u:tm (Î£ [x] B x)} tm (B (pi1 u))       </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prod</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ tp </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] Î£ [x: tm A] B  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Ã—</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">conv_pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A âŸ¶ tp, u: tm Î£ [x] B x} u = pair (pi1 u) (pi2 u)     </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">conv_pi1</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A âŸ¶ tp, X, Y: tm (B X)} pi1 (pair A B X Y) = X        </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that conv_pi2 only type-checks because conv_pi1 is used as a simplification rule. â™</span><span class="w">  </span>
<span class="w">  </span><span class="vc">conv_pi2</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A âŸ¶ tp, X, Y: tm (B X)} pi2 (pair A B X Y) = Y        </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DepSumLF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">Sigma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A âŸ¶ type) âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î£</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A âŸ¶ type, a : A } B a âŸ¶ Î£ B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pair</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">pi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A âŸ¶ type} Î£ B âŸ¶ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">pi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A âŸ¶ type} {p : Î£ B} B (pi1 p) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">conv_pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, B: A âŸ¶ type, u: Î£ B} DED u EQ (pair (pi1 u) (pi2 u)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">conv_pi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A âŸ¶ type}{a : A, b: B a} DED (pi1 (pair A B a b)) EQ a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that conv_pi2 only type-checks because conv_pi1 is used as a simplification rule. â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">conv_pi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A âŸ¶ type}{a : A, b: B a} DED (pi2 (pair A B a b)) EQ b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="cm">/T   This file contains the general structure of the MMT tutorial given at CICM 2016.âš</span><span class="w"></span>


<span class="cm">/T   A namespace declaration defines the root URI of the following content.âš</span><span class="w"></span>
<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/tutorial</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">document</span><span class="w"> </span><span class="nn">SFOL</span><span class="w"> </span>

<span class="cm">/T   A theory defines a language. It may optionally use a meta-theory, which is given by its URI.âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   We can already use our logic as the meta-theory of a theory.</span>
<span class="cm">     To refer to FOL, we use its URI, which is of the form NAMESPACE?THEORYNAME.</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">/T   A Semigroup consists of ...âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span>
<span class="cm">/T   Now we define the proof theory of LF using natural âŠ¢uction proof rules.</span>
<span class="cm">     It is practical to do this in a separate theory that includes the syntax above.</span>
<span class="cm">âš</span><span class="w">        </span>
<span class="w">     </span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   The rules declared so far only yield intuitionistic first-order logic. To get to classical logic,</span>
<span class="cm">we can use the modular approach and extend NatDed by the law of excluded middle: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?ClassicalSFOL</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"></span>

<span class="kd">document</span><span class="w"> </span><span class="nn">AlgebraicHierarchy</span><span class="w"> </span>

<span class="cm">/T   Exemplary, we can now built the usual hierarchy of algebraic theories in a modualar way, starting again with</span>
<span class="cm">	semigroups: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   Monoids just extend Semigroups: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   A Monoid happens to be a preorder - a fact, that we can express using Views. A view is a morphism</span>
<span class="cm">		between two theories, that maps each declaration of the domain to a valid expression</span>
<span class="cm">		over the symbols in the codomain such, that typing judgments are preserved. âš</span><span class="w"></span>
<span class="w">		</span>
<span class="cm">/T   First, a theory of preorders: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?PreOrder</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   To show that monoids are preorders, we have to map each axiom of a preorder to a provable</span>
<span class="cm">			statement in the theory of monoids, i.e. we need a view preorder âŸ¶ monoid, like so: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?MonoidAsPreorder</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   Next, on to groups: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Group</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   For Rings we will need abelian groups in particular, so let&#39;s create a theory for &quot;abelian&quot;: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Abelian</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   ...and one for abelian groups: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?AbelianGroup</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   Now for Rings. Obviously, if we want to implement a theory of rings modularly, we</span>
<span class="cm">			want to make use of the fact, that a ring is an additive abelian group with a multiplicative monoid.</span>
<span class="cm">			Both theories already exist, but we need them with respect to two different operations - includes</span>
<span class="cm">			will not get us there. Instead, we will use MMT structures. Structures behave like includes,</span>
<span class="cm">			except that they allow us to slightly modify the imported declarations; in particular we are allowed</span>
<span class="cm">			to provide new definitions and notations for the imported symbols: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Ring</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"></span>

<span class="kd">document</span><span class="w"> </span><span class="nn">LiteralsAndRules</span><span class="w"> </span>
<span class="cm">/T   Next, we will look at different ways to implement RULES by writing a theory for </span>
<span class="cm">			natural numbers âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   And of course, natural numbers form a monoid, which we can express with a view: âš</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?NatAsMonoid</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="cm">//   Comments begin with // and end with the delimiter of the current level.</span>
<span class="cm">     </span>
<span class="cm">     Comments starting with /T count as content themselves and are, e.g., preserved in the HTML  rendering of a file.</span>
<span class="cm">     Therefore, all comments in this file start with /Tâš</span><span class="w"></span>


<span class="cm">/T   This file contains a definition of first-order logic in MMT as used in the MMT tutorial given at CICM 2016.âš</span><span class="w"></span>


<span class="cm">/T   A namespace declaration defines the root URI of the following content.âš</span><span class="w"></span>
<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/tutorial</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   A theory defines a language. It may optionally use a meta-theory, which is given by its URI.âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The simplest declaration in an MMT theory introduces a named symbol.</span>
<span class="cm">     Every declaration can have multiple attributes following the name.</span>
<span class="cm">     Each attribute is introduced by a special keywork:</span>
<span class="cm">       the type      - introduced by &#39;:&#39;.</span>
<span class="cm">       the definiens - introduced by &#39;=&#39;</span>
<span class="cm">       the notation  - introduced by &#39;#&#39;</span>
<span class="cm">     If multiple attributes are present, they must be ended with the object delimiter. </span>
<span class="cm">  â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The following declaration introduces the type of FOL propositions.</span>
<span class="cm">     Its type is the object &#39;type&#39;, which is defined by LF.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T All symbols occuring in an MMT object are cross-linked to their declaration.</span>
<span class="cm">     Try hovering or control-clicking on &#39;type&#39; aboveâ™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The following declarations introduce the constructors of propositional logic and their notations.â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T âŸ¶ is used for simple functions. It is part of the notations defined by LF.</span>
<span class="cm">     It is right-associative. By double-clicking on âŸ¶, you can see its arguments.â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">true</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop                                 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop                                 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ§</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ¨</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop         </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T Note that multiple attributes (here: type and notation) must be separated by â˜.</span>
<span class="cm">     Among other things, that allows using :, =, and # as ordinary characters anywhere else.â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Notations consist of numbers refering to argument positions and arbitrary Unicode strings defining delimiters.</span>
<span class="cm">     Optionally, a notation may end in &#39;prec NUMBER&#39; to define a precedence. Higher precedences bind stronger.</span>
<span class="cm">     For example, &#39;1 âˆ§ 2 prec 15&#39; makes conjunction an infix operator with precedence 15.</span>
<span class="cm">  â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T As an example for a defined symbol, let us consider the equivalence connective.</span>
<span class="cm">     We define it in terms of conjunction and implication.</span>
<span class="cm">     The definiens uses [x:prop,y:prop], which is the notation defined for lambda-abstraction in LF.</span>
<span class="cm">     The types of the bound variables are infered by MMT - try hovering over them to see the types.</span>
<span class="cm">  â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ prop âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡”</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] (x â‡’ y) âˆ§ (y â‡’ x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T Here three attributes (type, notation, and definition) are present. The order does not matter.â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Now for the first-order aspects.</span>
<span class="cm">     We opt for sorted (also called typed) first-order logic, e.g., there may be multiple sorts that we can quantify over separately.â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The following declarations introduce the LF-type of sorts and the LF type of terms of a given sort.â™</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">sort</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">term</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The point of the latter is as follows: If, e.g., &#39;s:sort&#39; is a sort, then &#39;tm s&#39; is the type of all terms of sort sâ™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The following declaration introduces a symbol for sorted equality.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s: sort} tm s âŸ¶ tm s âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T Here {s: sort} is the Pi-binder of LF for dependent function spaces.</span>
<span class="cm">       Thus, equal takes a sort as its first argument and then 2 terms of that sort.â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T In the notation for equal, the first argument - the sort - is not mentioned.</span>
<span class="cm">     That makes the sort an implicit argument that is infered by MMT.</span>
<span class="cm">  â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The types of the quantifiers use LF&#39;s higher-order abstract syntax:</span>
<span class="cm">     &#39;tm s âŸ¶ prop&#39; can be used as the type of proposition with a free variables of type &#39;tm s&#39;.</span>
<span class="cm">     The sort is an implicit argument again, and the type of sort is infered by MMT.</span>
<span class="cm">  â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} (tm s âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} (tm s âŸ¶ prop) âŸ¶ prop</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Finally, we need to be able to talk about the truth of propositions.</span>
<span class="cm">     For that, we introduce a Curry-Howard style judgment: The LF-type &#39;âŠ¢ P&#39; is the type of proofs of the proposition &#39;P&#39;.</span>
<span class="cm">  â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">proof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¢</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">        </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T It&#39;s practical to give âŠ¢ a very low precedence to avoid brackets later on.â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The &#39;role Judgment&#39; is an attribute introduced by the LF plugin (which tells MMT to be loaded automatically whenever LF is used).</span>
<span class="cm">     By annotation the symbol &#39;proof&#39; in this way, the plugin can add some LF-specific language support, in particular, it can generate appropriate default notations.</span>
<span class="cm">  â™</span><span class="w"></span>
<span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span>
<span class="cm">/T   Now we define the proof theory of LF using natural deduction proof rules.</span>
<span class="cm">     It is practical to do this in a separate theory that includes the syntax above.</span>
<span class="cm">âš</span><span class="w">        </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T &#39;include THEORY&#39; includes another theory.</span>
<span class="cm">     When refering to a theory, we do not actually have to give the absolute URI.</span>
<span class="cm">     Below the relative URI &#39;?FOL&#39; is resolved relative to the current namespace and yields http://cds.omdoc.org/examples/tutorial?FOL.</span>
<span class="cm">  â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Some FOL proof rules talk about contradictioins.</span>
<span class="cm">     A FOL theory is contradictory if we can derive any formula. That can be captured by the LF type &#39;{a: prop} âŠ¢ a&#39;. If this type is non-empty, a theory is inconsistent.</span>
<span class="cm">     We introduce an abbreviation for it:â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">contra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} âŠ¢ a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â†¯</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¢ true</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¢ false âŸ¶ â†¯</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">andI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¢ A âŸ¶ âŠ¢ B âŸ¶ âŠ¢ A âˆ§ B   </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¢ A âˆ§ B âŸ¶ âŠ¢ A         </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¢ A âˆ§ B âŸ¶ âŠ¢ B         </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">orIl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¢ A âŸ¶ âŠ¢ A âˆ¨ B         </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIr</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¢ B âŸ¶ âŠ¢ A âˆ¨ B         </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} âŠ¢ A âˆ¨ B âŸ¶ (âŠ¢ A âŸ¶ âŠ¢ C) âŸ¶ (âŠ¢ B âŸ¶ âŠ¢ C) âŸ¶ âŠ¢ C</span>
<span class=" -MMT_ObjectExpression">                                      </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">impI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (âŠ¢ A âŸ¶ âŠ¢ B) âŸ¶ âŠ¢ A â‡’ B </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">impE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¢ A â‡’ B âŸ¶ âŠ¢ A âŸ¶ âŠ¢ B   </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">notI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (âŠ¢ A âŸ¶ â†¯) âŸ¶ âŠ¢ Â¬ A</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">notI</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">notE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¢ Â¬ A âŸ¶ âŠ¢ A âŸ¶ â†¯  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">notE</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Because equivalence is defined, we can derive its rules.</span>
<span class="cm">     As usual for Curry-Howard style representations, a derived rule is simply a rule with a definiens.</span>
<span class="cm">  â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">equivI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (âŠ¢ A âŸ¶ âŠ¢ B) âŸ¶ (âŠ¢ B âŸ¶ âŠ¢ A) âŸ¶ âŠ¢ A â‡” B  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,q] andI (impI [x] p x) (impI [x] q x)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="vc">equivEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¢ A â‡” B âŸ¶ âŠ¢ A âŸ¶ âŠ¢ B</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,a] impE (andEl p) a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¢ A â‡” B âŸ¶ âŠ¢ B âŸ¶ âŠ¢ A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,b] impE (andEr p) b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">          </span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s, A: tm s âŸ¶ prop} ({x} âŠ¢ (A x)) âŸ¶ âŠ¢ âˆ€ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">allI</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s, A: tm s âŸ¶ prop} âŠ¢ (âˆ€ A) âŸ¶ {x} âŠ¢ (A x) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">allE</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s, A: tm s âŸ¶ prop} {c} âŠ¢ (A c) âŸ¶ âŠ¢ âˆƒ [x] (A x) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">exI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s, A: tm s âŸ¶ prop, C} âŠ¢ (âˆƒ A) âŸ¶ ({x} âŠ¢ (A x) âŸ¶ âŠ¢ C) âŸ¶ âŠ¢ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">exE</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The rules for equality consist of the equivalence rules at every sort ...â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x: tm s} âŠ¢ x = x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x: tm s,y} âŠ¢ x = y âŸ¶ âŠ¢ y = x</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">sym</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x: tm s,y,z} âŠ¢ x = y âŸ¶ âŠ¢ y = z âŸ¶ âŠ¢ x = z</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trans</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T ... and congruence rules for substituting a subterm x with y in any term T or formula F.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congTerm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t, T: tm s âŸ¶ tm t}{x,y} âŠ¢ x = y âŸ¶ âŠ¢ (T x) = (T y)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">congTerm</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">congForm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,   F: tm s âŸ¶ prop}{x,y} âŠ¢ x = y âŸ¶ âŠ¢ (F x) âŸ¶ âŠ¢ (F y)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">congForm</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   The rules declared so far only yield intuitionistic first-order logic. To get to classical logic,</span>
<span class="cm">we can use the modular approach and extend NatDed by the law of excluded middle: âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ClassicalSFOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatDed </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">TND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¢ A âˆ¨ Â¬ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">TND</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/tutorial</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   A Semigroup consists of ...âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Semigroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T ... a sort for the universe ...â™</span><span class="w">   </span>
<span class="w">   </span><span class="vc">u</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T ... a binary function on the universe, written as infix âˆ˜ ...â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm u âŸ¶ tm u âŸ¶ tm u</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T ...such that âˆ˜ is associative.â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¢  âˆ€[x]âˆ€[y]âˆ€[z] (x âˆ˜ y) âˆ˜ z = x âˆ˜ (y âˆ˜ z)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T We prove a few abbreviations that come in handy when doing proofs:â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">assocLeftToRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¢ (x âˆ˜ y) âˆ˜ z = x âˆ˜ (y âˆ˜ z)</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] allE (allE (allE assoc x) y) z</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">assocLR</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="si">%I3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">assocRightToLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¢ x âˆ˜ (y âˆ˜ z) = (x âˆ˜ y) âˆ˜ z</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] sym assocLR</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">assocRL</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="si">%I3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="cm">// metadata can be attributed both to a theory ... â™</span><span class="w"></span>
<span class="w">  </span><span class="k">@_description</span><span class="w"> </span><span class="s">s</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// ... and to constants ... â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm u </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">@_description</span><span class="w"> </span><span class="s"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// ... any symbol can be used as a metadata key, several @_XXX keys are predefinedâ™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">unit_axiom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¢ âˆ€[x] x âˆ˜ e = x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">@_description</span><span class="w"> </span><span class="s"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	                                   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">PreOrder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">o</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm o âŸ¶ tm o âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">reflexivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¢ x â‰¤ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">transitivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¢ x â‰¤ y âŸ¶ âŠ¢ y â‰¤ z âŸ¶ âŠ¢ x â‰¤ z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// We prove the ternary case of transitivity by chaining transitivity twice.â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">transitivity3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} âŠ¢ w â‰¤ x âŸ¶ âŠ¢ x â‰¤ y âŸ¶ âŠ¢ y â‰¤ z âŸ¶ âŠ¢ w â‰¤ z</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z,p,q,r] transitivity (transitivity p q) r</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">view</span><span class="w"> </span><span class="nc">MonoidAsPreorder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PreOrder</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Assignments in views are of the form NAME = EXPRESSION. First, the universes: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">o</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">u </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Now for the order itself, which is defined by a â‰¤ b â‡” âˆƒx aâˆ˜x=b. Thus: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">order</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] (âˆƒ[z] x âˆ˜ z = y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T The target statement for reflexivity translates as ${x} âŠ¢ âˆƒ[z] x âˆ˜ z = x$, which</span>
<span class="cm">		we now need to prove for monoids: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">reflexivity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] exI e (allE unit_axiom x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T The target statement for transitivity is ${x,y,z} âŠ¢ (âˆƒ[a] x âˆ˜ a = y) âŸ¶ âŠ¢ (âˆƒ[b] y âˆ˜ b = z) âŸ¶ âŠ¢ âˆƒ[c] x âˆ˜ c = z$ where the proof has to extract witness a with proof pa from p and b and qb from q and then supply the witness c as aâˆ˜b along with its proof:â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">transitivity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z,p,q] exE p [a,pa] exE q [b,qb] exI (a âˆ˜ b) trans assocRL trans (congTerm ([k]kâˆ˜b) pa) qb</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Abelian</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¢ âˆ€[x] âˆ€[y] x âˆ˜ y = y âˆ˜ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Group</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm u âŸ¶ tm u </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â»Â¹</span><span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="cm">/T jsuperminus jsuper1	â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">inverse_axiom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¢ âˆ€[x] x âˆ˜ (x â»Â¹ ) = e </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AbelianGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Abelian </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Ring</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T We will add two structures, one for addition and one for multiplication. â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Addition forms an abelian group, hence we will use that theory for our structure. â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T In the structure, we first give the universe u a new ALIAS R. This way, we don&#39;t</span>
<span class="cm">		have to refer to the universe of our Ring with add/u all the time. â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Afterwards, we provide new notations for the other symbols. Note, that none of the symbols</span>
<span class="cm">			we &quot;modify&quot; are declared directly in the theory we&#39;re including (i.e. AbelianGroup).</span>
<span class="cm">			Structures can modify along includes without problems. â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?AbelianGroup </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">u</span><span class="w"> </span><span class="p">@</span><span class="no"> R </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">comp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">O</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">inverse</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T We can now add a DEFINITION to Multiplication/u, making it equal to R=Addition/u. </span>
<span class="cm">		That way, both + and â‹… are defined on the SAME</span>
<span class="cm">		universe (i.e. R), while being two separate operations nonetheless (as opposed to when</span>
<span class="cm">		using plain includes): â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Monoid </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">u</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">R </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">comp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">45</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">I</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Alternatively we could have defined mult/u directly as add/u</span>
<span class="cm">		</span>
<span class="cm">	/T Finally, we can use the symbols in our structures jointly in distributivity: â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¢ âˆ€[a]âˆ€[b]âˆ€[c] a â‹… (b + c) = a â‹… b + a â‹… c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/tutorial</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://tutorial.examples.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T We start with a sort for the natural numbers and an abbreviation â„• for the terms</span>
<span class="cm">		of that sort - i.e. the type of actual numbers, which we will populate with literals: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">â„•</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Nat </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T The literals are provided by a RealizedType rule written in Scala in </span>
<span class="cm">		scala_realizations/info/kwarc/mmt/examples/tutorial/Literals.scala</span>
<span class="cm">	  These rules are special constants declared by the &quot;rule&quot; keyword followed by the classname: â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NatLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T The MMT build system includes a target for building these Scala files - the command is &quot;build MMT/examples scala-bin&quot; â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T The rule NatLiterals introduces MMT literals for all natural numbers as well as a lexing rule for them.</span>
<span class="cm">	   To see whether it works, let&#39;s define the constant &quot;zero&quot; as the literal 0: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">zero</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T In addition to RealizedType rules, there are also RealizedOperator rules, which allow us</span>
<span class="cm">		to associate a function on literals declared in MMT with a corresponding implementation </span>
<span class="cm">		in Scala. We can use this to implement the successor function: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">S</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Succ </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Succ is implemented in such a way that it can be inverted, which MMT will use for unification, when working with terms that contain both literals and variables: â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T MMT will now simplify every instance of S being applied to literals to the actual</span>
<span class="cm">		computation result. We can test this, by proving that the successor</span>
<span class="cm">		of 17 is 18 by reflexivity of equality alone: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">succ_test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¢ S 17 = 18 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl 18 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Now for the same thing with addition: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Plus </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T We can again test, whether this works by proving an equality with refl: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¢ 5 + 5 = 10 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl 10 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T We use Scala to implement computations on literals.</span>
<span class="cm">	   Additionally, we need symbolic rewrite rules for working with other expressions.</span>
<span class="cm">	   The LF plugin includes a ChangeListener that automatically generates rewrite rules from certain constants.</span>
<span class="cm">	   To do so, we add the role Simplify to the constants.</span>
<span class="cm">	   We must have previously added roles Judgment and Eq to âŠ¢ and =, respectively.â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_def1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¢ x + zero = x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">plus_def</span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_def1b</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¢ zero + x = x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_def2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¢ S x + y = S (x + y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_def2b</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¢ x + S y = S (x + y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T The generate rules will make MMT rewrite the left to the right side of the equality during type-checking. â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T We also add associativity (omitting the proof), which we need in the view below.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} âŠ¢ (x + y) + z = x + (y + z) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">plus_assoc</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">view</span><span class="w"> </span><span class="nc">NatAsMonoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">u</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Nat </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">comp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">unit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">zero </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">assoc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">allI ([x] allI ([y] allI (plus_assoc x y))) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">unit_axiom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">allI ([x] plus_def1 x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://cf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="kd">constant</span><span class="w"> </span><span class="vc">instance</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">instance</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">new</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">new</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NewInstance</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">field</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span>
<span class="w">   </span><span class="vc">sequence</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">var</span><span class="w"> </span><span class="si">V1</span><span class="ss">;</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="ss">;</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Sequence</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">None</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">none</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">None</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">   </span><span class="vc">assign</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Assignment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AssignmentTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">meta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Dedukti</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">rewriteType</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">---&gt;</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">rewriteTerm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} a âŸ¶ a âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">--&gt;</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">                                   </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://quotation.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   higher-order logic with quotation and evaluation, mostly following Bill Farmer&#39;s work âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">HOLQE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="sd"># Higher-order logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">   </span><span class="sd">## Types</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T the LF-type representing HOL types â™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">tp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T function types â™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ tp âŸ¶ tp</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T Normally we represent object language variables using LF variables, in which case the following is redundant.</span>
<span class="cm">      But Farmer&#39;s language follows the traditional style of assuming an infinite supply of variables at every type.</span>
<span class="cm">      It is critical to capture this in the representation because he allows quoting terms with free variables.â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the type of variables at a given HOL typeâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">Var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the constructor for concrete variables %x:a at a given HOL type where x is any identifier that is parsed as a closed term</span>
<span class="cm">      Most of the time, we do not need this because we can use LF-variables v:Var a as meta-variables that range over HOL variables at type a.â™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">var</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%</span><span class="w"> </span><span class="si">L1T</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the typing rule (%x:a):Var a for concrete variables cannot be expressed in LF, so we implement an MMT ruleâ™</span><span class="w"> </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ConcreteVariable</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="sd">## Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T the LF-type representing HOL terms of a given HOL type â™</span><span class="w">  </span>
<span class="w">   </span><span class="vc">tm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T all variables are terms of their respective type â™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">tvar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ tm a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">tvar</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">â˜</span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T Î»-abstraction (contrary to typical LF-encodings, we bind explicit variables that have to be injected into terms using tvar â™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">lam</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b} (Var a âŸ¶ tm b) âŸ¶ tm a â‡’ b</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T application â™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">app</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b} tm a â‡’ b âŸ¶ tm a âŸ¶ tm b</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T undefined terms (not needed here, but probably needed later on when evaluating quotations of ill-typed termsâ™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">undefined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¥</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T booleans, connectives, and proofsâ™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">bool</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a âŸ¶ tm a âŸ¶ tm bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">ded</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="sd"># Quotation</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T We add HOL types that reify HOL conceptsâ™</span><span class="w"> </span>

<span class="w">   </span><span class="sd">## Quoting Terms</span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">   </span><span class="cm">/T We add a type holding quotations of HOL terms. All terms may be quoted, including ill-typed ones.</span>
<span class="cm">      Effectively, this amounts to having a type that represents the untype Î»-calculus inside a typed Î»-calculus.â™</span><span class="w"> </span>

<span class="w">   </span><span class="sd">### Syntax</span><span class=" -MMT_DD">â™</span><span class="w">    </span>
<span class="w">      </span>
<span class="w">   </span><span class="cm">/T the type of quoted termsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">qtp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Îµ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T quoted variablesâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">qvar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ tm Îµ</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">qvar</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_OD">â˜</span><span class="p">##</span><span class="w"> </span><span class="ss">qvar</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T quoted Î»-abstractionsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">qlam</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ tm Îµ âŸ¶ tm Îµ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">qlam</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">150</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T quoted applicationsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">qapp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Îµ âŸ¶ tm Îµ âŸ¶ tm Îµ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">qapp</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T quoted quotationsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">qquote</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Îµ âŸ¶ tm Îµ</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T Finally, we add a meta-level operation that turns a term into the corresponding quotation.</span>
<span class="cm">      We may think of it as having type ${a}tm a âŸ¶ tm Îµ$ except. However, quotation may not be subject to congruence and therefore cannot have an LF type.â™</span><span class="w">   </span>
<span class="w">   </span><span class="vc">quote</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŒœ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŒ</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the rule that eliminates occurrences of quote by constructing the corresponding term of type $tm Îµ$</span>
<span class="cm">      HOL variables in the argument are quoted using $qvar$, LF variables remain, which gives rise to quasi-quotation.â™</span><span class="w"> </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="sd">### Semantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T the predicate expressing that a term is the quotation of a term of a given types.â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Îµ âŸ¶ tp âŸ¶ tm bool</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T typing rule for quoted variablesâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype_var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v: Var a} âŠ¦ qvar v $ a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T typing rule for quoted Î»-abstractionsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype_lam</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,v:Var a,E} âŠ¦ E $ b âŸ¶ âŠ¦ qlam v.E $ a â‡’ b</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T typing rule for quoted applicationsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype_app</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,F,E} âŠ¦ F $ a â‡’ b âŸ¶ âŠ¦ E $ a âŸ¶ âŠ¦ qapp F E $ a â‡’ b</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T typing rule for quoted quotationsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype_quote</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{E,a} âŠ¦ E $ a âŸ¶ âŠ¦ qquote E $ Îµ</span><span class=" -MMT_DD">â™</span><span class="w">   </span>

<span class="w">   </span><span class="sd">## Quoting Substitutions</span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">   </span><span class="cm">/T Expanding on Farmer&#39;s work, we also add a type holding HOL substitutions.</span>
<span class="cm">      Effectively, this amounts to a language with explicit substitutions.</span>
<span class="cm">      Because all variables are always in scope, every substitution maps all variables to terms.â™</span><span class="w"> </span>

<span class="w">   </span><span class="sd">### Syntax</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T the type of substitutionsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">stp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sub</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the identity substitutionsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">idsub</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm sub</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the substitution that modifies a given substitution in one placeâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">update</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm sub âŸ¶ Var a âŸ¶ tm a âŸ¶ tm sub </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â†¦</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T abbreviation for the substitution that maps one variableâ™</span><span class="w">   </span>
<span class="w">   </span><span class="vc">singlesub</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a âŸ¶ tm a âŸ¶ tm sub </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â†¦</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">51</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,v,t] idsub + v â†¦ t</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T Finally, we add a meta-level operation that turns a substitution into the corresponding quotation.â™</span><span class="w">   </span>
<span class="w">   </span><span class="vc">subs</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">`</span><span class="w"> </span><span class="si">L1T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">Â´</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the rule that eliminates occurrences of subs by constructing the corresponding term of type $tm sub$â™</span><span class="w"> </span>
<span class="w">   </span><span class="cm">// rule rules?QuoteSubsâ™</span><span class="w"></span>

<span class="w">   </span><span class="sd">### Semantics</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T an auxiliary predicate to reason about inequality of variablesâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">diff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} Var a âŸ¶ Var b âŸ¶ tm bool </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â‰ </span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// notation parsing errors not reported correctly? â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T the function that retrieves the map of a variable by a substitutionâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">lookup</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm sub âŸ¶ Var a âŸ¶ tm a </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the lookup rule for the identity substitutionâ™</span><span class="w">   </span>
<span class="w">   </span><span class="vc">subst_id</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v: Var a} âŠ¦ v&#39;idsub = (tvar v)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the lookup rule for an update to the needed variablesâ™</span><span class="w">   </span>
<span class="w">   </span><span class="vc">subst_update_same</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,a, v: Var a, E} âŠ¦ v&#39;(s+vâ†¦E) = E</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the lookup rule for an update to some other variableâ™</span><span class="w">   </span>
<span class="w">   </span><span class="vc">subst_update_diff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,a,b, v: Var a, w: Var b, E} âŠ¦ v â‰  w âŸ¶ âŠ¦ v&#39;(s+wâ†¦E) = v&#39;s</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="sd"># Evaluation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T Evaluation internalizes the model-theoretical semantics: evaluation takes a term and a substitution (which provides the assignment to the free variables) and returns its interpretation in the model.</span>
<span class="cm">   </span>
<span class="cm">   Evaluation is only defined for quotations of well-typed terms. Because the type of a quotation is not stored in the quotation,</span>
<span class="cm">   * evaluation takes a HOL-type as an additional argument,</span>
<span class="cm">   * evaluation rules take typing assumptions.â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T the evaluation operatorâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm Îµ âŸ¶ tm sub âŸ¶ tm a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¦</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŸ§</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">âŸ¦</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŸ§</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the evaluation rule for variables: apply the assignmentâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval_var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, v: Var a, s} âŠ¦ (âŸ¦qvar v $ aâŸ§s) = v&#39;s</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the evaluation rule for Î»-abstractions qlam v.E: build the function that maps x to the evaluation of E under the assignment of v to xâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval_fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b, v: Var a, E, s} âŠ¦ E $ b âŸ¶ âŠ¦ (âŸ¦qlam v.E $ a â‡’ bâŸ§s) = Î»[x](âŸ¦E $ bâŸ§ s + v â†¦ tvar x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the evaluation rule for applications: straightforwardâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval_app</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, F, X, s} âŠ¦ F $ a â‡’ b  âŸ¶  âŠ¦ X $ a  âŸ¶  âŠ¦ (âŸ¦qapp F X $ bâŸ§s) = (âŸ¦F $ a â‡’ bâŸ§s) @ âŸ¦X $ aâŸ§s</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the evaluation rule for quotations: evaluation cancels quotationâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval_quote</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X, s} âŠ¦ X $ Îµ  âŸ¶  âŠ¦ (âŸ¦qquote X $ ÎµâŸ§s) = X</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">/T Now we formalize two challenge problems posed by Farmerâš</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ExcludedMiddle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?HOLQE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool âŸ¶ tm bool</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool âŸ¶ tm bool âŸ¶ tm bool</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ¨</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">em</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f,s} âŠ¦ f $ bool âŸ¶ âŠ¦ (âŸ¦f$boolâŸ§s) âˆ¨ Â¬ âŸ¦f$boolâŸ§s </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PolyDiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?HOLQE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T real numbers and derivativesâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">derivative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm R â‡’ R âŸ¶ tm R â‡’ R</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T a transformer that computes the derivative of a polynomial and its meaning formulaâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ispolyin</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Îµ âŸ¶ Var R âŸ¶ tm bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">polyderiv</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Îµ âŸ¶ Var R âŸ¶ tm Îµ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">meaning</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v, p} âŠ¦ ispolyin p v âŸ¶ âŠ¦ derivative (Î»[x] âŸ¦p $ RâŸ§v â†¦ tvar x) = (Î»[x] âŸ¦polyderiv p v $ RâŸ§v â†¦ tvar x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://intersection.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   A representation of intersection types in MMT, following &quot;Towards a Logical Framework with Intersection and Union Types&quot; by Stolze, Liquori, Honsell, Scagnetto.âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Intersection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T intersection typeâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">inter</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ©</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T elements of an intersection typeâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">pair</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¨</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŸ©</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T projections from an intersection typeâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">project1</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">proj</span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">project2</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">proj</span><span class="si">2</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InterTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PairTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection1Term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection2Term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InterTyping</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InterEqual</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">IntersectionTest</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Intersection</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T auto-application â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">((a âŸ¶ b) âˆ© a) âŸ¶ b</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] (proj1 x) (proj2 x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T This is a negative test: it should fail with an error that $(a âŸ¶ b)âˆ©(a âŸ¶ b)$ is not equal to $(a âŸ¶ b)âˆ©a$.â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// test2 = test testâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Isabelle</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://cds.omdoc.org/mmt?Errorsâš</span>
<span class="l l-URI">   include ?PLF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">proof_text</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">meta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Typed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">equality</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equality</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w">  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">oftype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9997</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">definedas</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">:=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9998</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Def</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">withnotation</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9998</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Notation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Kinded</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Typed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">kind</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedConstants</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UniverseType</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypeInhabitable</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KindedConstants</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UniverseKind</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?KindInhabitable</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TermsTypesKinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜meta:?Errors</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ModExp</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜meta:?mmt</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Typed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kinded</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedConstants</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?KindedConstants</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnivTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypeAttributionTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?DropTypeAttribution</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LambdaPi</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kinded</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">Pi</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">lambda</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">apply</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">%w</span><span class="si">â€¦</span><span class="w">        </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">arrow</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">âŸ¶</span><span class="si">â€¦</span><span class="w">         </span><span class="k">prec</span><span class="w">  </span><span class="mi">-9990</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LambdaPi</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiType</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ApplyTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LambdaTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Beta</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Extensionality</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiCongruence</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LambdaCongruence</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// rule rules?NormalizeCurryingâ™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlattenCurrying</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Solve</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SolveType</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TheoryTypeWithLF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiIntroduction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ForwardPiElimination</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?BackwardPiElimination</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiIrrelevanceRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LFHOAS</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermsTypesKinds</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LambdaPi</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFRules</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ShallowPolymorphism</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Typed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ShallowPolymorphism</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PolymorphicApplyTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ShallowPolymorphism</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFModulo</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} A âŸ¶ A âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9000</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">                                                                              </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T LLF_P as introduced by Honsell, Liquori, Maksimovi, Scagnetto in</span>
<span class="cm">A logical framework for modeling external evidence, side conditions, and proof irrelevance using monadsâš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://externals.lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfrules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Locks</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">// Lp p a b &lt;T&gt; is the type \mathcal{L}^p_{a,b}[T] from the paper.â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">locktype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Lp</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// Lm p a b &lt;t&gt; is the term \mathcal{L}^p_{a,b}[t] from the paper.â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">lockterm</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Lm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// U &lt;t&gt; for t:Lp p a b &lt;T&gt; is the term \mathcal{U}^p_{a,b}[t] from the paper.</span>
<span class="cm">      U is unary here because p, a, and b can be inferred from t.â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">unlock</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w">                                           </span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// Convenience operator to bundle p, a, b into a single object.</span>
<span class="cm">   key # K 1 2 3â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// The typing rules.â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InferLockType</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InferLockTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InferUnlock</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypingLock</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EqualityLock</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnlockLock</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LLFP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Locks</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CallByValueExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LLFP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T following Section 5.1 of the paper: call-by-value reduction â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T untyped Î» calculus â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">term</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">app</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ term </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">lam</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term âŸ¶ term) âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T natural numbers â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">S</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T free variables using natural numbersâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">free</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ term</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T equality judgment and its rules â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term âŸ¶ term âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M} M â‰ M</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">symm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N} M â‰ N âŸ¶ N â‰ M</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N,P} M â‰ N âŸ¶ N â‰ P âŸ¶ M â‰ P</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">eq_app</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N,X,Y} M â‰ N âŸ¶ X â‰ Y âŸ¶ M@X â‰ N@Y</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eq_app</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T We declare a single constant Val for the side condition and one rule that implements it.</span>
<span class="cm">      The condition Val N term checks if N:term is an abstraction or a free variable â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">Val</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ValRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T reduction rules using Val conditionâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">betav</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N} Lp Val N term &lt;(Î» M)@N â‰ (M N)&gt;</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">betav</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">csiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N}({x} Lp Val x term &lt;(M x) â‰ (N x)&gt;) âŸ¶ (Î» M) â‰ (Î» N)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">csiv</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T example from the end of the section â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">t1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î»[x] &#39;z @ ((Î»[y] y) @ x)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">t2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î»[x] &#39;z @ x</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">goal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">t1 â‰ t2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T The following check succeeds without ever calling the ValRule because the unlock is under a lock.â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">check</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">goal </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">csiv [x] Lm Val x term &lt;</span>
<span class=" -MMT_ObjectExpression">       eq_app (refl &#39;z) U&lt;betav ([y] y) x&gt;</span>
<span class=" -MMT_ObjectExpression">     &gt;</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T The following example does not guard the unlock but still succeeds because &#39;n is indeed a value.â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">check2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] eq_app (refl &#39;z) U&lt;betav ([y] y) &#39;n&gt;</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T The following negative example fails because x is any term and thus not necessarily a value.â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// fail   = [x] eq_app (refl &#39;z) U&lt;betav ([y] y) x&gt;â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T An alternative formulation that uses polymorphpic LF to define most of the typing rules in the logical framework.</span>
<span class="cm">   That corresponds to the Coq implementation of LLF_P by Honsell et al.âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LLFP2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">PROP</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">DED</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">PROP âŸ¶ type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?TermIrrelevanceRule DED</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Lock</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p: PROP} (DED p âŸ¶ type) âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">L</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lock</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p: PROP} {a: DED p âŸ¶ type} ({p} a p) âŸ¶ L p a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">l</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unlock</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p, a: DED p âŸ¶ type} L p a âŸ¶ {w:DED p} a w</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LinearLogic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LLFP2</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">o</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">ded</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">linear</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} (ded a âŸ¶ ded b) âŸ¶ PROP</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">linear</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lolli</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o âŸ¶ o âŸ¶ o</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ¸</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lolliI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} {p:ded A âŸ¶ ded B} L (linear p) [q] ded A âŠ¸ B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://api.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Errors</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">// a missing term of a given type â™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">missing</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">â‰ª</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰«</span><span class="w">        </span><span class="k">prec</span><span class="w"> </span><span class="mi">-99500</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// a term not matching a required type â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">illtyped</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">â‰ª</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">::</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰«</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// an unknown term (e.g., an omitted proof) that uses certain subterms (e.g., the used axioms) â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">unknown</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">â‰ª</span><span class="w"> </span><span class="ss">using</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">â‰«</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100003</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// this notation clashes with unbracketed lambdas inside some other unknown, removed for now</span>
<span class="cm">   // unsolved  # â‰ª [ V1T,â€¦ ] 2 â‰« prec -100006â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// an ambiguous term with multiple options; its first argument is the number of the argument that was obtained as the result of disambiguation (starting from 0) â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">oneOf</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">â‰ª</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">â‰«</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100002</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// infers the type of missing termsâ™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/checking?HoleTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// reduces disambiguated term â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/checking?Disambiguation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// disambiguates terms formed by oneOf â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/checking?InferAmbiguous</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">mmt</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="cm">// binds unsolved meta-variables â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">unknown</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// binds free variables that are implicitly quantified at the toplevelâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">free</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// the type of all rulesâ™</span><span class="w"></span>
<span class="w">   </span><span class="kd">constant</span><span class="w"> </span><span class="vc">rule</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// the type of notationsâ™</span><span class="w"></span>
<span class="w">   </span><span class="vc">notation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// enables notation literalsâ™</span><span class="w"> </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/notations?NotationRealizedType</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/patterns?PatternFeature</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/patterns?InstanceFeature</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/parser?MMTURILexer</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// notations with round brackets must have a lower precedence than this to be recognized â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">brackets</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000005</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// left bracket with omitted partner as far to the right as consistent with round brackets â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">andrewsDot</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">â–ª</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// right bracket with omitted partner as far to the left as consistent with round brackets â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">andrewsDotRight</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â–«</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">List</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">list</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">]</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Option</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">Option</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">some</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">some</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">none</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">none</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Tuple</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">Ã—</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">   </span><span class="vc">tuple</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¨</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">âŸ©</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">proj</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Function</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">Ã—</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">âŸ¶</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">lambda</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">Î»</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">apply</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">@</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Nat</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">â„•</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">plus</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">+</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">times</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">*</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">minus</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">div</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">less</span><span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">lesseq</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¤</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">greater</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">greatereq</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¥</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Boolean</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„¬</span><span class="w"></span>
<span class="w">   </span><span class="ss">and</span><span class="w">     </span><span class="ss">#</span><span class="w"> </span><span class="si">1</span><span class="ss">âˆ§</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">or</span><span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">âˆ¨</span><span class="si">â€¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">equal</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">ifte</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">match</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">match</span><span class="w"> </span><span class="si">2</span><span class="ss">|</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">case</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">V2T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">example</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://moduleexpressions.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">operators</span><span class="w"> </span><span class="l l-URI">scala://operators.moduleexpressions.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">metaops</span><span class="w"> </span><span class="l l-URI">scala://meta.operators.moduleexpressions.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ModExp</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">constant</span><span class="w"> </span><span class="vc">theory</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">THY</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">constant</span><span class="w"> </span><span class="vc">morphism</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">MOR</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">constant</span><span class="w"> </span><span class="vc">diagram</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">DIAG</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">complextheory</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">block</span><span class="w"> </span><span class="ss">{|</span><span class="w"> </span><span class="si">L1T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">|}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000005</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">complexmorphism</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[|</span><span class="w"> </span><span class="si">L1D</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">|]</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000005</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">identity</span><span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="ss">IDENTITY</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">composition</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">COMPOSE</span><span class="w"> </span><span class="si">1</span><span class="ss">;</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// morphismapplication # %L2d!_1 APPLY 2â™</span><span class="w"></span>


<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TheoryTypeInhabitable</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MorphTypeInhabitable</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?DiagramTypeInhabitable </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TheoryTypeUniverse</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AnonymousTheoryInfer</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AnonymousDiagramInfer </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ComplexTheoryInfer</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MorphCheck</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?DiagramCheck </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MorphismApplicationTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MorphismApplicationCompute</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Combinators</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ModExp</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// Yasmine&#39;s diagram operators</span>
<span class="cm">	   =========================== â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">empty</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">EMPTY</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeEmpty </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">extends</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">EXTENDED_BY</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">%L1_L2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeExtends </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">rename1</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">âŸ¿</span><span class="w"> </span><span class="si">L2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">rename</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">RENAMING</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">operators?ComputeRename </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">combine</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">COMBINE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">4</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">translate</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">MIXIN</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">4</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule operators?ComputeMixin â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">operators?ComputeCombine </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">hom</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">HOM</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">operators?ComputeHom </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// Navid&#39;s diagram operators</span>
<span class="cm">	   =========================== â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">pushout_inclusion</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PUSHOUT</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">ALONG</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">operators?ComputePushoutAlongInclusion </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_accessor</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-3000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramAccess</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// The diag from file operator expects a filename as first argument given as a string â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Strings </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">diagram_from_file</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">DIAG</span><span class="w"> </span><span class="ss">FROM</span><span class="w"> </span><span class="ss">FILE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramFromFile </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_union</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">UNION</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramUnion </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// diagram_difference_by_diagram # 1 WITHOUT DIAG 2 prec -2000000 â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule metaops?ComputeDiagramDifferenceByDiagram â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_difference_by_label</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">WITHOUT</span><span class="w"> </span><span class="ss">LABEL</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramDifferenceByLabel </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_prefix</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PREFIX</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">BY</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputePrefixedDiagram </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_closure</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">CLOSE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">WITHIN</span><span class="w"> </span><span class="ss">DOCUMENT</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramClosure </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// Currently deactivated as Navid&#39;s Generalizer ComputationRule not finished</span>
<span class="cm">	   generalizer # GENERALIZE 1 ALONG 2 prec -2000000 â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFComb</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Combinators</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GCalculus</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">nabla</span><span class="w">  </span><span class="p">#</span><span class="w">  </span><span class="si">V1T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NablaRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://www.openmath.org/cd</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OpenMath</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">Object</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">mapsto</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">naryObject</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">binder</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">OMI</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// the lexing and checking rule for integer literals, e.g., 1 â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule info.kwarc.mmt.api.objects?OMIâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">OMF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// the lexing and checking rule for floating point literals â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule info.kwarc.mmt.api.objects?OMFâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">OMSTR</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// the lexing and checking rule for string literals, e.g., &quot;1&quot; â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule info.kwarc.mmt.api.objects?OMSTRâ™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lf</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermsTypesKinds </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">BOOL</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">TRUE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">BOOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">FALSE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">BOOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bool </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">DED</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">BOOL âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">DED</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lf?TermIrrelevanceRule (DED)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lf?PiIrrelevanceRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">TRUEI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED TRUE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   dependently-typed higher-order logic, i.e., LF with booleans and equalityâš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DHOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ded </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">EQUAL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a âŸ¶ a âŸ¶ BOOL </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">EQ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">NOTEQUAL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a âŸ¶ a âŸ¶ BOOL </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">NEQ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">CONTRA</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED FALSE</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">// if : {a:type} bool âŸ¶ a âŸ¶ a âŸ¶ aâ™</span><span class="w"></span>

<span class="w">  </span><span class="vc">REFL</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:A} DED X EQ X  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">SYM</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:A,Y} DED X EQ Y âŸ¶ DED Y EQ X</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">SYM</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">TRANS</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:A,Y,Z} DED X EQ Y âŸ¶ DED Y EQ Z âŸ¶ DED X EQ Z</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">TRANS</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">CONG</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, X, Y: A} DED X EQ Y âŸ¶ {F: A âŸ¶ B} DED (F X) EQ (F Y)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">CONG</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DHOL2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} A âŸ¶ A âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">ded</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:A} âŠ¦ X â‰ X </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: type} {F: A âŸ¶ B} {X, Y: A} âŠ¦ X â‰ Y âŸ¶ âŠ¦ (F X) â‰ (F Y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">congI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type,B:A âŸ¶ type}{F:{x:A} B x, G:{x:A} B x} ({x: A} âŠ¦ F x â‰ G x) âŸ¶ âŠ¦ F â‰ G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ext</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eqDed</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{B1,B2:bool} âŠ¦ B1 â‰ B2 âŸ¶ âŠ¦ B1 âŸ¶ âŠ¦ B2 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eqded</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eqI</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{B1,B2:bool} (âŠ¦ B1 âŸ¶ âŠ¦ B2) âŸ¶ (âŠ¦ B2 âŸ¶ âŠ¦ B1) âŸ¶ âŠ¦ (B1 â‰ B2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eqI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">symmetry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type}{a,b : A} âŠ¦ a â‰ b âŸ¶ âŠ¦ b â‰ a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][a,b][p] eqded (congI ([x] x â‰ a) p) refl </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">symm</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eqFun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type}{F,G : A âŸ¶ B} âŠ¦ F â‰ G âŸ¶ {a} âŠ¦ F a â‰ G a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][F,G][p][a] congI ([H: A âŸ¶ B] H a) p </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">eqfun</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x:bool] x) â‰ ([x:bool] x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ true </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A âŸ¶ bool) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] P â‰ ([x:A] true) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">forallI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type, P : A âŸ¶ bool}({x} âŠ¦ P x) âŸ¶ âŠ¦ âˆ€[x] P x </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P][p] ext ([x: A] eqI ([pf: âŠ¦ P x] trueI) ([pt: âŠ¦ true] p x)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type, P : A âŸ¶ bool} (âŠ¦ âˆ€[x]P x) âŸ¶ {a} âŠ¦ P a </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P][p][a] eqded (eqfun (symm p) a) trueI </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Option</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">OPTION</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">NONE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} OPTION a </span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">	</span><span class="vc">SOME</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a âŸ¶ OPTION a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">MAP</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, b: type} (a âŸ¶ b) âŸ¶ OPTION b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatSymbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermsTypesKinds </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">NAT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatArith</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatSymbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT âŸ¶ NAT      </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">one</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT             </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">succ zero           </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT âŸ¶ NAT âŸ¶ NAT </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT âŸ¶ NAT âŸ¶ NAT </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatRels</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Ded</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatArith </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">LEQ</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT âŸ¶ NAT âŸ¶ BOOL </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">LEQ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">LESS</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT âŸ¶ NAT âŸ¶ BOOL </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">LESS</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,n] (succ m) LEQ n</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">REFL</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} DED n LEQ n</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatRules</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRels </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">eq_leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X EQ Y âŸ¶ DED Y LEQ Z âŸ¶ DED X LEQ Z  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y âŸ¶ DED Y EQ Z âŸ¶ DED X LEQ Z  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_comm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED plus X Y EQ plus Y X  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED plus (plus X Y) Z EQ plus X (plus Y Z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut_Ex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED plus X zero EQ X </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED plus X zero EQ X </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X] plus_neut_Ex X </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED plus X (succ Y) EQ succ (plus X Y)</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED plus (succ X) Y EQ succ (plus X Y) </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">times_comm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED times X Y EQ times Y X  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED times (times X Y) Z EQ times X (times Y Z)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_neut</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED times X one EQ X</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">times_zero</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED times X zero EQ zero</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED times X (succ Y) EQ plus (times X Y) X</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED times (succ X) Y EQ plus (times X Y) X</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">distrib</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED times X (plus Y Z) EQ plus (times X Y) (times X Z) </span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">leq_refl</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED X LEQ X  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_trans</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y âŸ¶ DED Y LEQ Z âŸ¶ DED X LEQ Z    </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED X LEQ Y âŸ¶ DED Y LEQ X âŸ¶ DED X EQ Y      </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_mono</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y âŸ¶ DED (plus X Z) LEQ (plus Y Z)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_mono_L</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y âŸ¶ DED (plus Z X) LEQ (plus Z Y)  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">                </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,Z,p] leq_eq (eq_leq plus_comm (plus_mono p)) plus_comm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_invmono</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED (plus X Z) LEQ (plus Y Z) âŸ¶ DED X LEQ Y  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">NatOnly</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">least</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED zero LEQ X </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">plus_larger_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED X LEQ (plus X Y)  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X][Y] eq_leq (SYM plus_neut) (plus_mono_L least)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">plus_larger_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED Y LEQ (plus X Y)  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X][Y] leq_eq plus_larger_L plus_comm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">times_mono</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y âŸ¶ DED (times X Z) LEQ (times Y Z)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">times_invmono</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED (times X Z) LEQ (times Y Z) âŸ¶ DED X LEQ Y  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uom</span><span class="w"> </span><span class="l l-URI">scala://uom.api.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatLiteralsOnly</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatSymbols </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize NAT uom?StandardNat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize zero uom?Arithmetic/Zero</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">    </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NatLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatLiteralsOnly </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatArith</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize one uom?Arithmetic/One</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize succ uom?Arithmetic/Succ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatSymbols</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules/NatOnly</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatLiterals</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Products</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">PROD</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b} a âŸ¶ b âŸ¶ a PROD b</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">PAIR</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">projectLeft</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} a PROD b âŸ¶ a</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">PI</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">projectRight</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} a PROD b âŸ¶ b</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">PI</span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories/pseudo</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Brackets</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">// notations with round brackets must have a lower precedence than this to be recognized â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">brackets</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000005</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// left bracket with omitted partner as far to the right as consistent with round brackets â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">andrewsDot</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">â–ª</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EliminationForms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">roundbrackets</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">squarebrackets</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dot</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AssignmentForms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">roundbrackets</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">squarebrackets</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/qmt</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">query</span><span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">   </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">basetp</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w">     </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTQuery</span><span class="w"> </span><span class="p">=</span><span class="w">	</span>
<span class="w">	</span><span class="cm">// Precedence -16xxxxâ™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// &lt;&lt;left&gt;&gt; union|intersection|difference &lt;&lt;right&gt;&gt; â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Union</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">or</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-169000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Intersection</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">and</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-169000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Difference</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">but</span><span class="w"> </span><span class="ss">not</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-169000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">Tuple</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">(*</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">*)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Projection</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// binders â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Let</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">let</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">:=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-168000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Mapping</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">*=&gt;*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-168000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">BigUnion</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">&lt;*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*&gt;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-168000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Comprehension</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{*</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">*}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-168000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// select [from &lt;&lt;start&gt;&gt; until &lt;&lt;end&gt;&gt;]|&lt;&lt;index&gt;&gt; of &lt;&lt;query&gt;&gt;â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Slice</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">select</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">until</span><span class="w"> </span><span class="si">L2</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160004</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">SliceFrom</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">select</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160003</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">SliceUntil</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">select</span><span class="w"> </span><span class="ss">until</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160002</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Element</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">select</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160001</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// component|subobject &lt;&lt;spec&gt;&gt; of &lt;&lt;query&gt;&gt;â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Component</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">component</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">SubObject</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">subobject</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">I</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">use</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">for</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Closure</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">closure</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{*</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// related to &lt;&lt;query&gt;&gt; by &lt;&lt;relation&gt;&gt;â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Related</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">related</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">by</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// leaf case â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Literal</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">literal</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Literals</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">literals</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Paths</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">paths</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">QueryFunctionApply</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">function</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTJudgements</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// Precedence -15xxxxâ™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="cm">/T Equality of two terms â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">Equals</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*==*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-150000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T One type has a specific term â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Types</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*:*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-150000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTProp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// Precedence -14xxxxâ™</span><span class="w">	</span>

<span class="w">	</span><span class="cm">/T unary type relation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsA</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">isa</span><span class="w"> </span><span class="si">L2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T ancestor relation between paths â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">PrefixOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*&lt;&lt;*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T element relation between elements and sets â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsIn</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">contains</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T emptiness of a set â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsEmpty</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">empty</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T equality of elements â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Equal</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*=*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T negation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Not</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">*!*</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T And â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">And</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*&amp;&amp;*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Or â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Or</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*||*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Forall â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Forall</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">forall</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*.*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Exists â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">Exists</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">exists</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*.*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Holds â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Holds</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">holds</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTRelationExp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// Precedence -13xxxxâ™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T base case: an atomic binary relation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">ToObject</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">object</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T base case: the inverse of an atomic binary relation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">ToSubject</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">subject</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the transitive closure of a relation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Transitive</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">*+</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the symmetric closure of a relation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Symmetric</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">symmetric</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the union of a list of relations â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Choice</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">choice</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the composition of a list of relations â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Sequence</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sequence</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the reflexive relation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Reflexive</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">reflexive</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the reflexive relation restricted to a set of paths â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">HasType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hastype</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">*--*</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTBinaries</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// Precedence -12xxxxâ™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">DependsOn</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">dependson</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">HasMeta</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hasmeta</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Includes</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">includes</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">HasDomain</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hasdomain</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">HasCodomain</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hascodomain</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsInstanceOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isinstanceof</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">RefersTo</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refers</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Declares</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">declares</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsAliasFor</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isaliasfor</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsAlignedWith</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isalignedwith</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTUnaries</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// Precedence -12xxxxâ™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">IsDocument</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">document</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsTheory</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">theory</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsView</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">view</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsStructure</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">structure</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsConstant</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">constant</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsPattern</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pattern</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsInstance</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">instance</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsDerivedDeclaration</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">deriveddeclaration</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsConAss</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">conass</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsStrAss</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">strass</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsNotation</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">notation</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTLiterals</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// TODO: Literals â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QMT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// include the MMT base in notations</span>
<span class="cm">	include ?mmt â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// TODO: Precedence â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTQuery </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTProp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTRelationExp </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTJudgements </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTUnaries </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTBinaries </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://quotation.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   introduces a primitive type that exposes the type MMT terms of the underlying implementation</span>
<span class="cm">This can be seen as a first step towards MMT meta-programming but is used here only to represent quotations.</span>
<span class="cm">âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TermLiterals</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermsTypesKinds</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the type of MMT terms â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">termliteral</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T makes all MMT terms (inlcudings ill-typed or ill-scoped ones) literals of type $termliteral$â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TermLiteralRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   the language features of quotation</span>
<span class="cm">This allows quoting terms that are well-typed in the current context.</span>

<span class="cm">The concrete syntax uses MMT&#39;s string interpolation feature with the identifier q, i.e., q&quot;t&quot; is the quotation of the term t.</span>
<span class="cm">Quoted terms are unevaluated, i.e., q&quot;1+1&quot; != q&quot;2&quot;. </span>

<span class="cm">Within t, it is allowed to escape back into evaluated terms: q&quot;1+${s}&quot; is the quasiquotation q&quot;1+e&quot; where e is the result of evaluating s.</span>
<span class="cm">âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Quotation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// LF is not actually needed here. But due a current bug, the comments are not type-checked correctly without LF. â™</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermLiterals</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T For any [a:type], $Q a$ is the type of quotations of terms of type $a$.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Quote</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Q</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the quotation operator</span>
<span class="cm">     Because of interpolation, this is not a unary operator - instead, the evaluated subterms are replaced with free variables and bundled up in a substitution.</span>
<span class="cm">     For example, q&quot;1+${s}+2&quot; is internally represented as quote(l, x/s) where l is the term literal 1+x+2.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">quote</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T the evaluation operator: For [a:type, q: Q a], $eval q$ is the evaluation of $q$ of type $a$.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eval</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the concrete syntax for quotations (using string interpolation)â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Lexer</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the formation rule: For [a:type], $Q a$ is a type.â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteFormation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the introduction rule: In the simplest case, for [a:type, t:a], the quotation of $t$ has type $Q a$.â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteIntroduction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the elimination rule: For [a:type, q: Q a], $eval q$ has type $a$.â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteElimination</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the type checking rule: For [a:type], we check [q: Q a] by checking that $eval q$ has type $a$.â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteTyping</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the beta-style reduction rule: For [a:type,t:a] the evaluation of the quotation $t$ reduces to $t$.â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EvalQuote</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T an auxiliary rule for normalizing quotations:</span>
<span class="cm">     For example, it reduces q&quot;1+${q&quot;2&quot;}&quot; to q&quot;1+2&quot;.â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ReduceQuote</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   LF with quotationâš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Quotation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T   a simple test theory âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QuotingInterpolationExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LFQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a âŸ¶ a âŸ¶ a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">t</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a âŸ¶ Q a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[q] q</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">q1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c c&quot;</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">q2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c ${q1}&quot;</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c ${t q1}&quot;</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q4</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c ${t q&quot;f c c&quot;}&quot;</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c ${t q&quot;f c ${t q1}&quot;}&quot;</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">examples/Quotation</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExcludedMiddle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/urtheories?LFQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ type</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">disj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ bool âŸ¶ bool</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ¨</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ bool</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">em</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f} âŠ¦ (eval f) âˆ¨ Â¬ (eval f)</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PeanoInduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/urtheories?LFQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExcludedMiddle</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">nat</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">induction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f} âŠ¦ (eval f) zero âŸ¶ ({n} âŠ¦ (eval f) n âŸ¶ âŠ¦ (eval f) (succ n)) âŸ¶ ({n} âŠ¦(eval f) n)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Scala</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">hasType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Any</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Unit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">()</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Product</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">Product</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Tuple</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">Tuple</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">]</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Function</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Fun</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Lambda</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="ss">-</span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">List</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">list</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">BigInt</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Double</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Boolean</span><span class=" -MMT_DD">â™</span><span class="w">            </span>
<span class="w">  </span><span class="vc">String</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ScalaOM</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Scala</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Term</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Context</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://semiformal.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Informal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">informal</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InformalLiterals</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InformalTyping</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semiformal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Informal</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">semiformal</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SemiformalInterpolation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SemiformalTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SemiformalInterpolationExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semiformal</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">nat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat âŸ¶ nat</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat âŸ¶ nat âŸ¶ nat </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] sf&quot;the sum of all number from 1 to ${x+y}&quot;:nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] sf&quot;the product of ${x+y:nat} and ${y+x:nat}&quot;:nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://sequences.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sequences</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Typed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">rep</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-20</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NTypeTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UniverseNType</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">ellipsis</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¨&#39;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">V1T</span><span class="w"> </span><span class="ss">&#39;âŸ©</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10002</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">index</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">..</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">9998</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">flatseq</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸ¨</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">â€¦</span><span class="w"> </span><span class="ss">âŸ©</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">foldLeft</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">foldL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EllipsisInfer</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EllipsisTypeCheck</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EllipsisEqualityCheck</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EllipsisInjective</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RepTypeCheck</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RepEqualityCheck</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ExpandRep</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IndexInfer</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IndexCompute</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlatseqInjective</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SolveArity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LengthAwareApplyTerm</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LengthAwareBeta</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FoldLeftType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFS</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sequences</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlexaryPi</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlexaryLambda</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlexaryApply</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Strings</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">string</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">concat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string âŸ¶ string âŸ¶ string</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize string rules/api/uom?StandardString</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize empty rules/api/uom?StringOperations/Empty</span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize concat rules/api/uom?StringOperations/Concat</span><span class=" -MMT_DD">â™</span><span class="w">  </span>

<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/literals?StandardStringInterpolation string concat</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">StringInterpolationExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Strings</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string âŸ¶ string âŸ¶ string</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] x + y</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">q1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA&quot;</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">q2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA ${q1}&quot;</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA ${s&quot;a&quot; + s&quot;b&quot;}&quot;</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q4</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA ${f c s&quot;BB&quot;}&quot;</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA ${f c s&quot;BB ${f q1 q1}&quot;}&quot;</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://substructural.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// This theory is under development.</span>
<span class="cm">Its goal is to investigate to what extent substructural languages can be represented in MMT.</span>
<span class="cm">This was motivated by a promising initial case study on representing ordered linear logic (done with Jeff Polakow, at LFMTP 2017).âš</span><span class="w"></span>

<span class="cm">//   theory Substructural =</span>
<span class="cm">   Sarrow  # 2 - 1 -&gt; 3  prec  -9990â™</span>
<span class="cm">   Slambda # [ 1 V2T,â€¦ ] 2 prec -10000â™</span>
<span class="cm">   Sapply  # 1%wâ€¦        prec -10â™</span>

<span class="cm">   class # class 1 2  prec 1000â™</span>

<span class="cm">   unordered â™</span>
<span class="cm">   leftordered â™</span>
<span class="cm">   rightordered â™</span>
<span class="cm">   </span>
<span class="cm">   plainâ™</span>
<span class="cm">   useallâ™</span>
<span class="cm">   useonceâ™</span>
<span class="cm">   linearâ™</span>

<span class="cm">   rule rules?SArrowTermâ™</span>
<span class="cm">   rule rules?SLambdaTermâ™</span>
<span class="cm">   rule rules?SApplyTermâ™</span>
<span class="cm">   rule rules?SArrowTypingâ™</span>
<span class="cm">   rule rules?SArrowEqualityâ™</span>
<span class="cm">   rule rules?SArrowBetaâ™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   LF as meta-theory means using LF HOASâš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subtyping</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">subtype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, B: type} type                  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ†â€</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9980</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A âŠ†â€ A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} A âŠ†â€ B âŸ¶ B âŠ†â€ C âŸ¶ A âŠ†â€ C</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">covariant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, B1: A âŸ¶ type, B2: A âŸ¶ type} ({x:A} B1 x âŠ†â€ B2 x) âŸ¶ ({x:A} B1 x) âŠ†â€ ({x:A} B2 x)</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Inhabitation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// &quot;! A&quot; is a judgments for the inhabitation (= non-emptiness) of &quot;A&quot;.</span>
<span class="cm">     If &quot;A&quot; is empty, so is &quot;!A&quot;. If &quot;A&quot; is non-empty, &quot;!A&quot; is a singleton.</span>
<span class="cm">     These types are useful when using proofs as judgments as guards, i.e., in situations where only the inhabitation of a type matters, not the choice of inhabitant.</span>
<span class="cm">     Also note, that if &quot;A&quot; is a type of proofs, then &quot;! A&quot; is essentially the same type but with proof irrelevance.   </span>
<span class="cm">  â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Inh</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type                     </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">!</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_OD">â˜</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// introduction: If we have an inhabitant of &quot;A&quot;, then &quot;A&quot; is inhabited.</span>

<span class="cm">     This is similar to modal logic&#39;s necessitation rule, but we apply it even if there are unboxed assumptions in the context.</span>
<span class="cm">  â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inh</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A âŸ¶ !A </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">inh</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// The inverse operator does not exist exactly but almost: If we have &quot;!A&quot;, we can assume an &quot;x:A&quot; as long as we only use &quot;x&quot; to prove other &quot;!B&quot;-judgments.</span>
<span class="cm">  </span>
<span class="cm">  More generally, the declarations in this theory only return !-types.</span>
<span class="cm">  Thus, adding this theory does not affect the adequacy of an existing encoding.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">elim</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} !A âŸ¶ (A âŸ¶ !B) âŸ¶ !B</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The operator &quot;inh&quot; is functorial. â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that this is also the modal axiom K â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">K</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} !(A âŸ¶ B) âŸ¶ !A âŸ¶ !B</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] [p,q] elim p [r: A âŸ¶ B] elim q [s: A] inh (r s)</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Thus, we have: &quot;A âŸ¶ B&quot; is stronger than &quot;!(A âŸ¶ B)&quot; is stronger than &quot;!A âŸ¶ !B&quot; (which is equivalent to &quot;A âŸ¶ !B&quot;).</span>
<span class="cm">     Set-theoretically, all 3 are equivalent, but proving the inverse directions requires non-canonically choosing an element, which we cannot do in type theory. â™</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="cm">// We can prove that multiple inhabitation operators are redundant.â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} !!A âŸ¶ !A </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][p] elim p [a]a</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// operationalizes the rule {A, P:!A, Q:!A} P = Qâ™</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/inhabitation?ProofIrrelevance</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// an experimental theory for predicate subtypesâš</span><span class="w"></span>
<span class="cm">//   theory PredicateSubtypes : ?PLF =</span>
<span class="cm">  include ?Subtypingâ™</span>
<span class="cm">  include ?Inhabitationâ™</span>
<span class="cm">  </span>
<span class="cm">  Sub    : {A: type} (A âŸ¶ type) âŸ¶ type              â˜ # 1 | 2 prec 20â™</span>
<span class="cm">  sub    : {A, P} {x: A} !(P x) âŸ¶ A|P               â˜ # 3 by 4â™</span>

<span class="cm">  subA_A    : {A,P} A|P âŠ†â€ Aâ™</span>
<span class="cm">  subA_subA : {A,P,Q} ({x} P x âŸ¶ Q x) âŸ¶ A|P âŠ†â€ A|Qâ™</span>

<span class="cm">  // elim   : {A,P}{x: A|P} ! (P x)â™</span>
<span class="cm">  // sub x (elim x) = xâ™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories/reflection</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Terms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜/urtheories?Typed</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">formation</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|}</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">reflect</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">âŒœ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŒ</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval</span><span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">âŒ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŒŸ</span><span class="w"> </span><span class="si">2</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">elim</span><span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w">     </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFReflection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜/urtheories?LF</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lf</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">scala://LFX.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Metadata</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">constructorargument</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T We define a formal language for basic mathematical objects in LF. âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subtyping</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://gl.mathhub.info/MMT/LFX/Subtyping?LFSubtyped </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T First, some logic. âš</span><span class="w"></span>

<span class="w">                                               </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy?LFHierarchy</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://gl.mathhub.info/MMT/LFX/Records?LFRecords </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://cds.omdoc.org/urtheories?Ded </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://gl.mathhub.info/MMT/LFX/Subtyping?LFWithVariance </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">// rule rules?ApplyRule â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">/T the type of booleans, i.e., all formulas are represented as terms of LF-type $prop$ â™</span><span class="w"></span>
<span class="w">	 </span><span class="cm">// bool : type â˜ // = BOOL â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">@</span><span class="no"> bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">BOOL </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">/T one LF-type for each formula holding its proofs                 </span>
<span class="cm">	 For example, the LF type âŠ¦ 0 â‰ 1 is empty because that formula has no proofs.</span>
<span class="cm">	 Axioms are declared as constants of the corresponding type, e.g., a constant of type $âŠ¦ true$ for the axiom of truth.â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">ImplicitProof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ImplicitProof</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lf?TermIrrelevanceRule (ded) ([A : prop] ImplicitProof A) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">/T Equality on terms. The type A is left implicit and can be inferred by MMT â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:ğ’° 100} A âŸ¶ A âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = EQUAL </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">// coercion : {A : type, P : A âŸ¶ prop,a} âŠ¦ P a âŸ¶ âŸ¨ A | ([x] âŠ¦ P x) âŸ© â˜ # coerce 3 %I4â™</span><span class="w"></span>
<span class="w">	 </span><span class="cm">// coercion_theorem : {A : type,P : A âŸ¶ prop,a,p : âŠ¦ P a} âŠ¦ eq âŸ¨ A | ([x] âŠ¦ P x) âŸ© (coercion A P a p) a â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?BooleanLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">// false_is_FALSE : ded (FALSE â‰ false) â™</span><span class="w"></span>
<span class="w">	 </span><span class="cm">// true_is_TRUE : ded (TRUE â‰ true) â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">not</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Â¬</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">neq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: ğ’° 100} A âŸ¶ A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰ </span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b] Â¬ (a â‰ b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	 </span><span class="vc">and</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ bool âŸ¶ bool</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ§</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-110</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">or</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ bool âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ¨</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [A,B] Â¬ (Â¬A âˆ§ Â¬ B) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">implies</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ bool âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡’</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [A,B] B âˆ¨ Â¬A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">iff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool âŸ¶ bool âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‡”</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="cm">// = [A,B] (A â‡’ B) âˆ§ (B â‡’ A) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	 </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100} (A âŸ¶ bool) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100} (A âŸ¶ bool) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="cm">// = [A,f] Â¬ âˆ€ [x:A] Â¬ f x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">unique</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100} (A âŸ¶ bool) âŸ¶ A âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,x] âˆ€ [y:A] P y â‡’ y â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unique</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">exists_unique</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100} (A âŸ¶ bool) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ!</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] âˆƒ [x] (P x âˆ§ unique P x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	 </span><span class="cm">/T Equality on types (semantics missing) â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">tpeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰â‰</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-6</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq </span><span class=" -MMT_DD">â™</span><span class="w">	 		</span>
<span class="w">	 </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	 </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalDeduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">tru_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ true </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">fals_elimination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ false âŸ¶ âŠ¦ A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">fals_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ A âŸ¶ âŠ¦ Â¬ A âŸ¶ âŠ¦ false </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">forall_elim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100, P : A âŸ¶ bool}âŠ¦ âˆ€ P âŸ¶ {x : A}âŠ¦ P x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">forallE</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">forall_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100, P : A âŸ¶ bool, p : {x : A}âŠ¦P x}âŠ¦ âˆ€[x] P x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">forallI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	 </span><span class="vc">and_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âŸ¶ âŠ¦ B âŸ¶ âŠ¦ (A âˆ§ B) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">and_elim_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ (A âˆ§ B) âŸ¶ âŠ¦ A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">and_elim_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ (A âˆ§ B) âŸ¶ âŠ¦ B </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">not_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (âŠ¦ A âŸ¶ âŠ¦ false) âŸ¶ âŠ¦ Â¬ A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">not_elim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ Â¬ Â¬ A âŸ¶ âŠ¦ A </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	 </span><span class="vc">tnd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ A âˆ¨ Â¬A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [A: bool] not_introduction ([p : âŠ¦ (Â¬A âˆ§ Â¬Â¬A)] fals_introduction (not_elim (and_elim_right p)) (and_elim_left p)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Some more rules for convenience. â™</span><span class="w"></span>

<span class="w">        </span><span class="vc">or_introduction_right</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âŸ¶ âŠ¦ (A âˆ¨ B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orinr</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">or_introduction_left</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ B âŸ¶ âŠ¦ (A âˆ¨ B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orinl</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">implication_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (âŠ¦ A âŸ¶ âŠ¦ B) âŸ¶ âŠ¦ A â‡’ B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">impli</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">equiv_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ (A â‡’ B) âŸ¶ âŠ¦ (B â‡’ A) âŸ¶ âŠ¦ (A â‡” B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equivi</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">or_elimination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ (A âˆ¨ B) âŸ¶ (âŠ¦ A âŸ¶ âŠ¦ C) âŸ¶ (âŠ¦ B âŸ¶ âŠ¦ C) âŸ¶ âŠ¦ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orelim</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">modus_ponens</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (âŠ¦ A â‡’ B) âŸ¶ âŠ¦ A âŸ¶ âŠ¦ B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">MP</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">/T basic axioms governing Equality. Again, all the type parameters can be left implicit â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">eq_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t:ğ’° 100,A: t} âŠ¦ A â‰ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eq_refl</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">eq_cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t : ğ’° 100, s : ğ’° 100, f : t âŸ¶ s, A : t, B: t}</span>
<span class=" -MMT_ObjectExpression">	 		âŠ¦ A â‰ B âŸ¶ âŠ¦ (f A) â‰ (f B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eq_cong</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	 </span>

<span class="cm">/T Now some theories that introduce primitive types and literals for them.</span>
<span class="cm">     Because literals must modify the parser, they are supplied as rules that are implemented in a plugin.âš</span><span class="w">   </span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NatLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://cds.omdoc.org/urtheories?NatLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://cds.omdoc.org/urtheories?NatRels </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„•</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule rules?NatLiterals â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">pos_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ n : nat_lit | âŠ¦ n â‰  0 âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„•+</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PosLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">pos_are_nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* nat_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">succ_nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit âŸ¶ pos_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NatSucc </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// not needed anymore: rule rules?NatSuccInverse â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">plus_pos_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit âŸ¶ pos_lit âŸ¶ pos_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PosPlus </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit âŸ¶ nat_lit âŸ¶ nat_lit </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule rules?NatPlus â™</span><span class="w"></span>
<span class="w">   	</span><span class="vc">times_pos_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit âŸ¶ pos_lit âŸ¶ pos_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PosTimes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">times_nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit âŸ¶ nat_lit âŸ¶ nat_lit </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule rules?NatTimes â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">leq_nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit âŸ¶ nat_lit âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">LEQ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule rules?NatLeq â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">IntLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">int_lit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„¤</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntegerLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">minus_int_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit âŸ¶ int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntMinus </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_int_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit âŸ¶ int_lit âŸ¶ int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntPlus </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_int_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit âŸ¶ int_lit âŸ¶ int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntTimes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_int_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit âŸ¶ int_lit âŸ¶ bool </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntLeq </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">RealLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">real_lit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">leq_real_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit âŸ¶ bool </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealLeq </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   	</span><span class="vc">minus_real_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealMinus </span><span class=" -MMT_DD">â™</span><span class="w">   </span>
<span class="w">   	</span><span class="vc">plus_real_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit âŸ¶ real_lit </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealPlus </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   	</span><span class="vc">times_real_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit âŸ¶ real_lit </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Ã—</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealTimes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// square_is_pos : {r : â„} âŠ¦ leq_real_lit 0 (times_real_lit r r) â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">sqrt</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealSqrt </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">     </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Literals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">ints_are_real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit &lt;* real_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">nats_are_int</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit &lt;* int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">nats_are_real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit &lt;* real_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">pos_are_int</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">pos_are_real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* real_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// rule rules?NumberLiterals â™</span><span class="w"></span>

<span class="w">   </span><span class="cm">// test : âŠ¦ leq_lit 0 1 â˜ = tru_introduction â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// test2 : âŠ¦ nat_lit_succ 1 â‰ 2 â˜ = eq_refl 2 â™</span><span class="w"></span>
<span class="w">	 </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Trigonometry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">tan</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit    </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">sin</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit    </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">cos</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit    </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">atan</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit    </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">asin</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit    </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">acos</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit âŸ¶ real_lit    </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Tan </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Sin </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Cos </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Atan </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Asin </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Acos </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	 </span>
<span class="cm">/T String literals are also needed occasionally, e.g., in the LMFDB.âš</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Strings</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">string</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?StringLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">concat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string âŸ¶ string âŸ¶ string</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Now some more complex types. First lists.âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://gl.mathhub.info/MMT/LFX/Datatypes?LFLists </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InformalProofs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Strings </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   	 </span>
<span class="w">	</span><span class="vc">proofsketch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : prop} string âŸ¶ âŠ¦ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sketch</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">byproof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ A âŸ¶ âŠ¦ B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">by</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">addproofstep</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C: prop} âŠ¦ A âŸ¶ âŠ¦ B âŸ¶ âŠ¦ B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">and</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">trivial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : prop} âŠ¦ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;trivial&quot; </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trivial</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="cm">/T (Finite) sets â™</span>
<span class="cm">theory Sets : ur:?LF =</span>
<span class="cm">   include ?Logicâ™</span>
<span class="cm">   /T the type operator of sets along with its constructorsâ™</span>
<span class="cm">   set: type âŸ¶ type â™</span>
<span class="cm">   </span>
<span class="cm">   empty: {A} (list A) â˜# âˆ… 1â˜## âˆ… %I1 â™</span>
<span class="cm">   cons: {A} A âŸ¶ (list A) âŸ¶ (list A)â˜ # 2 , 3 â™ </span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">/T Multisets â™</span>

<span class="cm">/T &quot;Finite hybrid sets&quot; (mutlisets with possibly negative mutliplicities) â™</span>

<span class="cm">/T Now vectors, i.e., fixed-length lists.âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Vectors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Literals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">   </span><span class="cm">/T the type operator of vectors (fixed-length lists) over a given type â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">vector</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ğ’° 100 âŸ¶ nat_lit âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">zerovec</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t : ğ’° 100} vector t 0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">vector_prepend</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t: ğ’° 100,n : nat_lit, a : t, b : vector t n} t ^^ (succ_nat_lit n) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Matrices</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Vectors </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="cm">/T the type operator of matrices over a given typeâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">matrix</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ğ’° 100 âŸ¶ nat_lit âŸ¶ nat_lit âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T,n,m] vector (vector T m) n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OptionType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">Option</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ğ’° 100 âŸ¶ ğ’° 100 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">isDefined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} Option A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isDefined</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">OptionGet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, a : Option A} âŠ¦ isDefined a âŸ¶ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">get</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">None</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100} Option A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">None</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">None_is_not_Defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100} âŠ¦ isDefined (None A) â‰ false </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Not_None_is_Defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, a : Option A} âŠ¦ (a â‰  None A) âŸ¶ âŠ¦ isDefined a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Some</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: ğ’° 100} A âŸ¶ Option A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Some</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">Some_is_Defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100}{a:A} âŠ¦ isDefined (Some a) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">get_some</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100}{a:A} âŠ¦ get (Some a) â‰ a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DescriptionOperator</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OptionType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">that</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:ğ’° 100,P:A âŸ¶ bool} âŠ¦ (âˆƒ! P) âŸ¶  A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î¹</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">that_proof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100, P : A âŸ¶ bool, p : âŠ¦ âˆƒ! P} âŠ¦ P (that A P p) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">if_then_else_exists_proof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,a:A,b:A} âŠ¦ âˆƒ! [x:A] (P âˆ§ x â‰ a) âˆ¨ (Â¬ P âˆ§ x â‰ b) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">iteep</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">if_then_else</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100, P : bool, a : A, b : A}A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,a,b] that A ([x] (P âˆ§ x â‰ a) âˆ¨ (Â¬ P âˆ§ x â‰ b)) (iteep P a b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">if_then_else_case</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100, P : bool, a : A, b : A}A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,a,b] if P then a else b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">case</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŸ¹</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">if_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100, P : bool, a : A, b : A, p : âŠ¦ P} âŠ¦ (if P then a else b) â‰ a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [A,P,a,b,p] _ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">if_false</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ğ’° 100, P : bool, a : A, b : A, p : âŠ¦ Â¬ P } âŠ¦ (if P then a else b) â‰ b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [A,P,a,b,p] _ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ProductTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma?LFSigma</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// to have it in the meta-theory â™</span><span class="w">                       </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite?LFFinite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">InductiveTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/WTypes?Inductive</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sequences</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?Sequences </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ur:?LFS </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">forall_seq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type}{n} (A^n âŸ¶ prop) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€n</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">exists_seq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type}{n} (A^n âŸ¶ prop) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒn</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,n][P] Â¬ forall_seq A n [s : A^n] Â¬ (P s)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Finally, a theory that puts everything together (not recommended, because modularity) âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Math</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NaturalDeduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Literals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Trigonometry </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Strings </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lists </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Vectors </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Matrices </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OptionType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sequences </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Classes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">class</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">cls_element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">class âŸ¶ class âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">axiom_extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t} âŠ¦ (âˆ€[e] e âˆˆ s â‡” e âˆˆ t) â‡’ s â‰ t </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_extensionality</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?Subtyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">set</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ s : class | âŠ¦ âˆƒ [C : class] s âˆˆ C âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">set</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">emptyclass</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_emptyClassIsEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} âŠ¦ Â¬ s âˆˆ âˆ… </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_emptyClassIsEmpty</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// implicit view ZFinNBG : ?ZFBase -&gt; ?Classes =</span>
<span class="cm">    include â˜fnd:?InformalProofs â™</span>
<span class="cm">    include â˜fnd:?DescriptionOperator â™</span>
<span class="cm">    set = set â™</span>
<span class="cm">    element = [s,t] cls_element s t â™</span>
<span class="cm">    emptyset = emptyclass â™</span>
<span class="cm">    axiom_emptySetIsEmpty = [s: set] axiom_emptyClassIsEmpty s â™</span>

<span class="cm">    axiom_extensionality = [s,t] sketch &quot;from extensionality&quot; â™</span>
<span class="cm">    axiom_separation = [P,s] sketch &quot;axiomatically&quot; â™</span>
<span class="cm">    axiom_regularity = [s] sketch &quot;axiomatically&quot; â™</span>
<span class="cm">    axiom_pairing = [s,t] sketch &quot;axiomatically&quot; â™</span>
<span class="cm">    axiom_union = [s] sketch &quot;axiomatically&quot; â™</span>
<span class="cm">    axiom_powerset = [s] sketch &quot;axiomatically&quot; â™</span>
<span class="cm">    axiom_replacement = [a,f] sketch &quot;axiomatically&quot; â™</span>

<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetTypeConversions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">elem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">asSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ set </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">setAsElem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a} âŠ¦ a âˆˆ A âŸ¶ elem A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asTerm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">elemAsSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} A âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asElem</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">axiom_asElemIsElem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a : A} âŠ¦ (asElem a) âˆˆ (asSet A) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inverses1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} âŠ¦ asSet (elem s) â‰ s </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inverses2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t} âŠ¦ elem (asSet t) â‰ t </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_asTermElem1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a:A} âŠ¦ asTerm (asSet A) (asElem a) â‰ a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_asTermElem2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a,p:âŠ¦a âˆˆ A} âŠ¦ asElem (asTerm A a) â‰ a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// rule rules?SetCoercionRule â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LiftSeparation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetTypeConversions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?Subtyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">axiom_sepIsPredSub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,P : set âŸ¶ prop} âŠ¦ elem âŸª s | P âŸ« â‰ âŸ¨ x : (elem s) | âŠ¦ P (asElem x) âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_predSubIsSep</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t,P : t âŸ¶ prop} âŠ¦ asSet âŸ¨ x : t | âŠ¦ P x âŸ© â‰ âŸª asSet t | ([x] P (asTerm (asSet t) x)) âŸ« </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LiftProduct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CartesianProduct </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?KuratowskiPairs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetTypeConversions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="cm">// axiom_productType : {s,t} âŠ¦ elem (product s t) â‰ (elem s) Ã— (elem t) â˜ role Simplify â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LiftProductType </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_productSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t} âŠ¦ asSet (s Ã— t) â‰ product (asSet s) (asSet t) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_pairType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t,S,T} âŠ¦ asTerm (product S T) (pair s t) â‰ âŸ¨ (asTerm S s) , (asTerm T t) âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_pairSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,T,s : S,t : T} âŠ¦ asElem âŸ¨ s , t âŸ© â‰ pair (asElem s) (asElem t) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// theory LiftRelations : fnd:?Logic =</span>
<span class="cm">    include ?Relations â™</span>
<span class="cm">    include ?LiftProduct â™</span>


<span class="cm">    axiom_relType : {a:set,b:set} âŠ¦ elem (â„˜ (product a b)) â‰ (elem a âŸ¶ elem b âŸ¶ prop) â˜ role Simplify â™</span>
<span class="cm">    axiom_relSet : {A,B} âŠ¦ asSet (A âŸ¶ B âŸ¶ prop) â‰ â„˜ (product (asSet A) (asSet B)) â˜ role Simplify â™</span>
<span class="cm">    axiom_relType2 : {a:set,b:set,r: relation a b} âŠ¦ eq (elem a âŸ¶ elem b âŸ¶ prop) (asTerm (â„˜ (product a b)) r) ([x : elem a, y : elem b] (pair (asElem x) (asElem y)) âˆˆ r ) â˜ role Simplify â™</span>
<span class="cm">    axiom_relSet2 : {A,B,R : A âŸ¶ B âŸ¶ prop} âŠ¦ asElem R â‰ âŸª â„˜ (product (asSet A) (asSet B)) | ([x] âˆƒ[a] âˆƒ[b] x â‰ pair a b âˆ§ R (asTerm (asSet A) a) (asTerm (asSet B) b) ) âŸ« â˜ role Simplify â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LiftOmega</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetTypeConversions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Infinity </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?NatLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">axiom_lift_omega</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ elem Ï‰ â‰ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lift_Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ asSet â„• â‰ Ï‰ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lift_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ asTerm Ï‰ âˆ… â‰ 0 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lower_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ asElem 0 â‰ âˆ… </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lift_succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} âŠ¦ asTerm Ï‰ (set_succ n) â‰ succ_nat_lit (asTerm Ï‰ n) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lower_succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} âŠ¦ asElem (succ_nat_lit n) â‰ set_succ (asElem n) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="cm">// include base:?Lists â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetTypeConversions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Powerset </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?Subtyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the type operator of sets along with its constructors â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">setOf</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] âŸ¨ x : set | âŠ¦ x âˆˆ (â„˜ (asSet A)) âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fromPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A âŸ¶ prop) âŸ¶ setOf A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] âŸª â„˜ (asSet A) | ([x] P (asTerm (asSet A) x)) âŸ« </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asSet</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">asPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} setOf A âŸ¶ A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s] [x] (asElem x) âˆˆ s </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asPred</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// setCons: {A} A âŸ¶ set A âŸ¶ set A â˜ = [A] [a,P] [x] P x âˆ¨ x â‰ aâ˜ # 3 &lt;- 2 â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// setList : {A} List A âŸ¶  set A â˜ # â‰ª 2 â‰« â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// inSet : {A : type} A âŸ¶ set A âŸ¶ prop â˜ = [A][a,P] P a â˜ # 2 âˆˆ 3 â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// bsetst : {A} set A âŸ¶ (A âŸ¶ prop) âŸ¶ set A â˜ = [A][P,Q] [x] P x âˆ§ Q x â˜ # âŸª 2 | 3 âŸ« â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// fullset : {A} set A â˜ = [A] [x] true â˜ # fullset 1 â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// TODO, need a lot of congruence rules that make sure that setcons ACI â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">set</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">emptyset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">axiom_emptySetIsEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} âŠ¦ Â¬ s âˆˆ âˆ… </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">subset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t] âˆ€ [z] z âˆˆ s â‡’ z âˆˆ t </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ‘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">disjoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t] Â¬âˆƒ[e] e âˆˆ s âˆ§ e âˆˆ t </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_extensionality</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t](âˆ€[e] e âˆˆ s â‡” e âˆˆ t) â‡’ s â‰ t </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_separation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(set âŸ¶ prop) âŸ¶ set âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P][s]âˆƒ![t]âˆ€[e]e âˆˆ t â‡” (e âˆˆ s âˆ§ P e) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_regularity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s]s â‰  âˆ… â‡’ âˆƒ [e] e âˆˆ s âˆ§ (disjoint s e) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_pairing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] âˆƒ[z] x âˆˆ z âˆ§ y âˆˆ z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_pairing_unique</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] âˆƒ![z] x âˆˆ z âˆ§ y âˆˆ z âˆ§ âˆ€[w] w âˆˆ z â‡’ (w â‰ x âˆ¨ w â‰ y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_union</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] âˆƒ![y]âˆ€[z] z âˆˆ y â‡” âˆƒ[w] z âˆˆw âˆ§ w âˆˆ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_powerset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x]âˆƒ![y] âˆ€[z] z âˆˆ y â‡” z âŠ‘ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_replacement</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][f : set âŸ¶ set] âˆƒ![B]âˆ€[z] (z âˆˆ B â‡” âˆƒ[a] a âˆˆ A âˆ§ z â‰ f a) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t} âŠ¦ prop_extensionality s t </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Separation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_separation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,s} âŠ¦ prop_separation P s </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_separation</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">sep_constructor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s : set,P : set âŸ¶ prop}set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,P] that set ([x] âˆ€[e]e âˆˆ x â‡” (e âˆˆ s âˆ§ P e)) (axiom_separation P s)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸª</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŸ«</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">intersect</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t] âŸª s | ([x] x âˆˆ t) âŸ« </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ©</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regularity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_regularity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} âŠ¦ prop_regularity s </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Pairing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">axiom_pairing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ prop_pairing x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_pairing_unique</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y : set} âŠ¦ prop_pairing_unique x y </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_pairing_unique</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] sketch &quot;provable&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">uopair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] that set ([z] x âˆˆ z âˆ§ y âˆˆ z âˆ§ âˆ€[w] w âˆˆ z â‡’ (w â‰ x âˆ¨ w â‰ y)) (lemma_pairing_unique x y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] uopair s s </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KuratowskiPairs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Pairing </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] uopair (uopair x y) x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ prop_union x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_union</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] that set ([x] âˆ€[z] z âˆˆ x â‡” âˆƒ[w] z âˆˆw âˆ§ w âˆˆ s) (axiom_union s) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â‹ƒ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BinaryUnion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?KuratowskiPairs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">binaryunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] â‹ƒ (uopair a b) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆª</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Powerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_powerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ prop_powerset x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_powerset</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">powerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] that set ([y] âˆ€[z] z âˆˆ y â‡” z âŠ‘ x) (axiom_powerset x) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„˜</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CartesianProduct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Powerset </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BinaryUnion </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] sep_constructor (â„˜ (â„˜ (A âˆª B))) ([p] âˆƒ[a]âˆƒ[b] a âˆˆ A âˆ§ b âˆˆ B âˆ§ p â‰ pair a b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Relations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CartesianProduct </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?Subtyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_relation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,A,B : set] s âŠ‘ (product A B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_relation</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">relation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] âŸ¨ s : set | âŠ¦ prop_relation s A B âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Functions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_function</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f,A,B] prop_relation f A B âˆ§ âˆ€[x] x âˆˆ A â‡’ âˆƒ[y] y âˆˆ B âˆ§ (pair x y) âˆˆ f </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// TODO â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">function</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] âŸ¨ s:set | âŠ¦ prop_function s A B âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">setfunapply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} function A B âŸ¶ {a : set}âŠ¦ a âˆˆ A âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a,p] Î¹ ([x] (pair a x) âˆˆ f) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">%I5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">theorem_setfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,f : function A B, a} âŠ¦ (f @ a) âˆˆ B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a] sketch &quot;by definition&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Replacement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜fnd:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_replacement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,f} âŠ¦ prop_replacement a f </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_replacement</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">replacement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ (set âŸ¶ set) âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f] that set ([B] âˆ€[z] (z âˆˆ B â‡” âˆƒ[a] a âˆˆ A âˆ§ z â‰ f a)) (axiom_replacement A f) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Img</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Infinity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BinaryUnion </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">set_succ</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] n âˆª (singleton n) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_infinity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[N] âˆ… âˆˆ N âˆ§ âˆ€[n] n âˆˆ N â‡’ (set_succ n) âˆˆ N </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">omega</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Ï‰</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î¹ [x] prop_infinity x âˆ§ âˆ€[z] prop_infinity z â‡’ x âŠ‘ z</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ZFBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Extensionality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Regularity </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Pairing </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Powerset </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Replacement </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Infinity </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FunctionsExtended</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functions </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">prop_injective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} function A B âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] âˆ€[x] âˆ€[y] x âˆˆ A âˆ§ y âˆˆ A â‡’ (f@x â‰ f@y â‡’ x â‰ y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_injective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_surjective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} function A B âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] âˆ€[y] y âˆˆ B â‡’ âˆƒ[x] x âˆˆ A âˆ§ f@x â‰ y </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_surjective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_bijective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} function A B âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] prop_injective f âˆ§ prop_surjective f </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_bijective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FunctionsExtended </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Infinity </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">prop_finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] âˆƒ[n] n âˆˆ Ï‰ âˆ§ âˆƒ[f : function s n] prop_injective f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_infinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] Â¬ prop_finite s </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ZF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ZFBase </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Finite </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Intersection </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">setdiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] âŸª A | ([x] Â¬ x âˆˆ B) âŸ« </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">\</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a] A \ (singleton a) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">symdiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set âŸ¶ set âŸ¶ set </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] (A \ B) âˆª (B \ A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">Î”</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_choiceFunction</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f : function A (â‹ƒ A)] âˆ€[a] a âˆˆ A â‡’ (f @ a) âˆˆ a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŸ¨ f : function A (â‹ƒA) | âŠ¦ prop_choiceFunction A f âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ZFCBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ZFBase </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Choice </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ZFC</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ZFCBase </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ZF </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/Units</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Dimensions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>

<span class="w">  </span><span class="cm">/T An SI Dimension. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimension</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://mathhub.info/MitM/Foundation?IntLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T A normalized representation used for equality reasoning etc. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">NormedDimension</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ â„¤ âŸ¶ â„¤ âŸ¶ â„¤ âŸ¶ â„¤ âŸ¶ â„¤ âŸ¶ dimension </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T We want the actual dimensions as a dimension. â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T We use the SI base dimensions for this. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Length</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedDimension 1 0 0 0 0 0 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Time</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedDimension 0 1 0 0 0 0 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Mass</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 1 0 0 0 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Amount</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 1 0 0 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Temperature</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 0 1 0 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Current</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 0 0 1 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">LuminousIntensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 0 0 0 1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">DimNone</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 0 0 0 0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Now we want to make even more dimensions. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">DimTimes</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension âŸ¶ dimension âŸ¶ dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*&#39;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">DimDiv</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension âŸ¶ dimension âŸ¶ dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/&#39;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?DimEq </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DimensionsExtended</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Dimensions</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Dimensionless stuffâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Information</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Velocity, Accelleration â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Velocity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Length /&#39; Time</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Acceleration</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Velocity /&#39; Time</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Area and Volumeâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Area</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Length *&#39; Length</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Volume</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Area *&#39; Length</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Densities â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">VolumeDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone /&#39; Volume </span><span class=" -MMT_OD">â˜</span><span class="w">  </span><span class="cm">// # Density //?? </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">AreaDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone /&#39; Area</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">LineDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone /&#39; Length</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Force and Pressureâ™</span><span class="w">                   </span>
<span class="w">  </span><span class="vc">Force</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mass *&#39; Acceleration</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Pressure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Force /&#39; Area</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Electric Charge and Charge Densitiesâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricCharge</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Current *&#39; Time </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricChargeVolumeDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge *&#39; VolumeDensity </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ElectricChargeDensity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricChargeAreaDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge *&#39; AreaDensity </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ElectricChargeSurfaceDensity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricChargeLineDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge *&#39; LineDensity</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Energy and Powerâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Energy</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Force *&#39; Length </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Power</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Energy /&#39; Time</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Basic Electrostatic Unitsâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricPotential</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Energy /&#39; ElectricCharge </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Voltage</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricDisplacement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge /&#39; Area </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">ElectricCurrentDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Current *&#39; AreaDensity </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Polarization</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// # CurrentDensity </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Voltage /&#39; Length </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ElectricFieldIntensity</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Other Electrical Unitsâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalResistance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Voltage /&#39; Current </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalResistivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricalResistance *&#39; Area /&#39; Length </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalConductivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone /&#39; ElectricalResistivity </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">ElectricFlux</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Voltage *&#39; Length </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span><span class="vc">ElectricalCapacitance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge /&#39; Voltage </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalPermittivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricalCapacitance /&#39; Length </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalMobility</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Velocity /&#39; ElectricField </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">IonRecombination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Volume /&#39; Time </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Magnetism // Hoping we don&#39;t need that for now</span>
<span class="cm">  </span>
<span class="cm">  // Heat-related , cf. Thermistor exampleâ™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Heat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Energy </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// ThermalConductivity : dimension â˜ = Energy /&#39; Length /&#39; Temperature â™</span><span class="w"> </span><span class="cm">// TODO Name clash with quantities.mmt â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">ThermalHeatFlux</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Energy /&#39; Area </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">  </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/Units</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   http://mathhub.info/MMT/physics-units?QEBase âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Units</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://mathhub.info/MitM/Foundation?RealLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Dimensions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension âŸ¶ type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">QE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension âŸ¶ type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  	</span><span class="cm">/T Dimensionless Quantity Expressions are real numbers â™</span><span class="w"></span>
<span class="w">  	</span><span class="vc">NoneIsReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ QE DimNone â‰â‰ real_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NoneIsReal </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	</span>
<span class="w">	</span><span class="vc">unitappl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d : dimension} real_lit âŸ¶ unit d âŸ¶ QE d </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// test... â™</span><span class="w"></span>
<span class="w">  	  </span>
<span class="w">  	</span><span class="vc">scalar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} QE X âŸ¶ real_lit </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">scalar</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	</span><span class="vc">scalar_commutes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : dimension,r, u : unit X} âŠ¦ scalar (r of u) â‰ r </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	</span><span class="vc">unitof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} QE X âŸ¶ unit X </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unitof</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	</span><span class="vc">unitof_commutes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : dimension,r, u : unit X} âŠ¦ unitof (r of u) â‰ u </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">lift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{din : dimension, dout : dimension, f : â„ âŸ¶ â„, u : unit din âŸ¶ unit dout}QE din âŸ¶ QE dout </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unit_lift</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[din,dout,f,u] [x] (f (scalar x)) of (u (unitof x)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">UnitTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d1, d2} unit d1 âŸ¶ unit d2 âŸ¶ unit (d1 *&#39; d2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">*&#39;&#39;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">UnitDiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d1, d2} unit d1 âŸ¶ unit d2 âŸ¶ unit (d1 /&#39; d2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">/&#39;&#39;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitEq </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QEBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T A base Theory for dimensions â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Units </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DimensionsExtended</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Multiplying with numbers â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// QENMul : {x : dimension} real_lit âŸ¶ QE x âŸ¶ QE x â˜ # 2 . 3 â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Dividing by numbers â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// QENDiv : {x : dimension} QE x âŸ¶ real_lit âŸ¶ QE x â˜ # 2 /. 3 â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Multiplying quantity expressions with each other. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">QEMul</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : dimension} {y: dimension} QE x âŸ¶ QE y âŸ¶ QE (x *&#39; y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Dividing quantity expressions with each other. â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">QEDiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : dimension} {y: dimension} QE x âŸ¶ QE y âŸ¶ QE (x /&#39; y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Adding quantity expressions (maintains dimension). â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">QEAdd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : dimension} QE x âŸ¶ QE x âŸ¶ QE x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">++</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">QESubtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: dimension} QE x âŸ¶ QE x âŸ¶ QE x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">QEMinus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: dimension} QE x âŸ¶ QE x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">~</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">QEEExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">QE DimNone âŸ¶ QE DimNone </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">exp</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">QEExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">QE DimNone âŸ¶ QE DimNone âŸ¶ QE DimNone </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â†‘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">QEELog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">QE DimNone âŸ¶ QE DimNone </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ln</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">QELog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">QE DimNone âŸ¶ QE DimNone âŸ¶ QE DimNone </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">log</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QEBase</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// For now, it&#39;ll be assumed space is of Length dimension by default, </span>
<span class="cm">  but that will have to be specified later for differntiating and integrating</span>
<span class="cm">  over fields defined on space of an arbitrary variable dimensionâ™</span><span class="w"></span>

<span class="w">  </span><span class="vc">space</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">spaceDim</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Length </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d]	space âŸ¶ QE d </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">FieldAdd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d: dimension} field d  âŸ¶ field d  âŸ¶ field d </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,f1,f2] [s] (f1 s) ++ (f2 s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">FieldSubtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d: dimension} field d âŸ¶ field d  âŸ¶ field d </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.-</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,f1,f2] [s] (f1 s) - (f2 s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">FieldMul</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d1: dimension, d2: dimension} field d1 âŸ¶ field d2  âŸ¶ field (d1 *&#39; d2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">.*</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d1,d2,f1,f2] [s] (f1 s) â‹… (f2 s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">FieldDiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d1: dimension, d2: dimension} field d1 âŸ¶ field d2  âŸ¶ field (d1 /&#39; d2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">./</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d1,d2,f1,f2] [s] (f1 s) / (f2 s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">FieldMinus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d: dimension} field d  âŸ¶ field d </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">.~</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,f] [s] ~ (f s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	         </span>
<span class="w">	</span><span class="vc">FieldEExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field DimNone âŸ¶ field DimNone </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">exp.</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">					 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [s] exp (f s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">					 </span>
<span class="w">	</span><span class="vc">FieldExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field DimNone âŸ¶ field DimNone âŸ¶ field DimNone </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.â†‘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">					 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f1,f2] [s] (f1 s) â†‘ (f2 s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">					 </span>
<span class="w">	</span><span class="vc">FieldLog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field DimNone âŸ¶ field DimNone âŸ¶ field DimNone </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">log.</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">					 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f1,f2] [s] log (f1 s) (f2 s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">					 </span>
<span class="w">	</span><span class="vc">FieldELog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field DimNone âŸ¶ field DimNone </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ln.</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">					 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [s] ln (f s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">FieldEq</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d: dimension} field d âŸ¶ field d  âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.â‰</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,f1,f2] âˆ€ [s] (f1 s) â‰ (f2 s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	         </span>
<span class="w">	</span><span class="vc">FieldInteg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} field d âŸ¶ field (d *&#39; spaceDim) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ‘.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">FieldDeriv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} field d âŸ¶ field (d /&#39; spaceDim) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î”.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/Units</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SIUnits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?QEBase</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// include ?InformationBaseâ™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">NormedUnit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d,e,f,g}unit (NormedDimension a b c d e f g) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">NormedUnit</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">Meter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Length </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedUnit 1 0 0 0 0 0 0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Second</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Time</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedUnit 0 1 0 0 0 0 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Kilogram</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Mass</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">kg</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 1 0 0 0 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Mole</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Amount </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 1 0 0 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Kelvin</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Temperature</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 0 1 0 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Ampere</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Current</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 0 0 1 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Candela</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit LuminousIntensity </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 0 0 0 1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Scalar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit DimNone </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 0 0 0 0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UnitsExtended</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DimensionsExtended</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SIUnits </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">bit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Information </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Scalar </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">m2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Area </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meter *&#39;&#39; Meter </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">mÂ²</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">m3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Volume </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mÂ² *&#39;&#39; Meter </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">mÂ³</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">mps</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Velocity </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meter /&#39;&#39; Second </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">mpss</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Acceleration </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meter /&#39;&#39; (Second *&#39;&#39; Second) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">newton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Force </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kg *&#39;&#39; mpss </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">N</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">pascal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Pressure </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">N /&#39;&#39; mÂ² </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Pa</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">joule</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Energy </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">N *&#39;&#39; Meter </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IdempotentMagma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OperationProps </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">idempotent_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_idempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_idempotent op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotentMagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?IdempotentMagma/idempotent_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/bands</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Band</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜../algebra?IdempotentMagma</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜../algebra?SemiGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">band_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜../algebra?IdempotentMagma/idempotent_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜../algebra?SemiGroup/semigroup_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">band</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Band/band_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">regular_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y]âˆ€[z] </span>
<span class=" -MMT_ObjectExpression">			z âˆ˜ x âˆ˜ z âˆ˜ y âˆ˜ z â‰ z âˆ˜ x âˆ˜ y âˆ˜ z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Regular </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">leftnormal_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_leftnormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y]âˆ€[z] </span>
<span class=" -MMT_ObjectExpression">			z âˆ˜ x âˆ˜ z âˆ˜ y â‰ z âˆ˜ x âˆ˜ y </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Reg2LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular/regular_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftNormal/leftnormal_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;trivial&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Regular </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">rightnormal_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_rightnormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y]âˆ€[z] </span>
<span class=" -MMT_ObjectExpression">			y âˆ˜ z âˆ˜ x âˆ˜ z â‰ y âˆ˜ x âˆ˜ z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Reg2RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular/regular_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightNormal/rightnormal_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	    </span><span class="vc">axiom_regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;trivial&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftNormal </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RightNormal </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">normal_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_normal</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x]âˆ€[y]âˆ€[z] </span>
<span class=" -MMT_ObjectExpression">			z âˆ˜ x âˆ˜ y âˆ˜ z â‰ z âˆ˜ y âˆ˜ x âˆ˜ z </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal/leftnormal_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal/normal_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_leftnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;trivial&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	 </span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal/rightnormal_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal/normal_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 	</span><span class="vc">axiom_rightnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;trivial&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">top</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/interfaces</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OperationProps</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">prop_idempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] âˆ€[a] op a a â‰ a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_idempotent</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_associative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] âˆ€[x : U]âˆ€[y : U]âˆ€[z : U] op x (op y z) â‰ op (op x y) z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_associative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] âˆ€[x : U]âˆ€[y] op x y â‰ op y x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_commutative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_leftUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ U âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op,e] âˆ€[x] op e x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_leftUnital</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_rightUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ U âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op,e] âˆ€[x] op x e â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_rightUnital</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_leftCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] âˆ€[a] âˆ€[b] âˆ€[c] op a c â‰ op b c â‡’ a â‰ b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_leftCancellative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_rightCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] âˆ€[a] âˆ€[b] âˆ€[c] op c a â‰ op c b â‡’ a â‰ b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_rightCancellative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ (U âŸ¶ U) âŸ¶ U âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op,inv,e] âˆ€[x] op x (inv x) â‰ e </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_inverse</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_absorption</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ (U âŸ¶ U âŸ¶ U) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U][m,j] âˆ€[a] âˆ€[b] m a (j a b) â‰ a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_absorption</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U âŸ¶ U âŸ¶ U) âŸ¶ (U âŸ¶ U âŸ¶ U) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U][plus,times] âˆ€ [x] âˆ€ [y] âˆ€ [z] (times x (plus y z)) â‰ (plus (times x y) (times x z)) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_distributive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Magma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OperationProps </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?SetStructures </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">magma_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w">     </span>
<span class="w">	</span><span class="vc">magma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Magma/magma_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">baseset</span><span class="w"> 	</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">magma âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] (m.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">dom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">operation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: magma} (G.universe âŸ¶ G.universe âŸ¶ G.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] [a,b] (G.op) a b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">finite</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">magma âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SemiGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">semigroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_associative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_associative op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">semigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?SemiGroup/semigroup_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Unital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">unital_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w">	</span>
<span class="w">		</span><span class="vc">axiom_leftUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_leftUnital op e </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_rightUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_rightUnital op e </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">unital</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Unital/unital_theory  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">unitOf</span><span class="w"> 	</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: unital} dom G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] (G.unit) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QuasiGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NaturalDeduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">quasigroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">qg1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[a]âˆ€[b]âˆƒ![x] a âˆ˜ x â‰ b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">qg2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[a]âˆ€[b]âˆƒ![y] y âˆ˜ a â‰ b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	  </span><span class="vc">leftDivision</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] that U ([x] a âˆ˜ x â‰ b) (forallE (forallE qg1 a) b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	  </span><span class="vc">rightDivision</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] that U ([x] x âˆ˜ a â‰ b) (forallE (forallE qg2 a) b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">quasigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?QuasiGroup/quasigroup_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CancellativeMagma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="cm">/T MiKo: use this to make a view into quasisgroup Theory: they are cancellative â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">cancellativemagma_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_leftCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_leftCancellative op  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_rightCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_rightCancellative op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="vc">cancellativemagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?CancellativeMagma/cancellativemagma_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T MiKo: how to express the definitions? â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">magma âŸ¶ bool </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">magma âŸ¶ bool </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T Refactor: a Loop is just a unital Quasigroup âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Loop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NaturalDeduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">loop_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital/unital_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â»Â¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_inverse op (inverse) e </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">loop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Loop/loop_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">inverseElement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : unital} dom U âŸ¶ dom U âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U][n,m] n âˆ˜ m â‰ unitOf U </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">inverseExists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loop âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] âˆ€ [x : dom G] âˆƒ [y : dom G] inverseElement G x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">inverseOf</span><span class="w">	</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: loop} dom G âŸ¶ dom G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â»Â¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] [a] (G.inverse) a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SemiGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">monoid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SemiGroup/semigroup_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital/unital_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">monoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Monoid/monoid_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Group</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Loop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">group_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid/monoid_theory </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Loop/loop_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">group</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Group/group_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	                                                                           </span>
<span class="w">	</span><span class="vc">inverseOf</span><span class="w">	</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: group} dom G âŸ¶ dom G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â»Â¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] [a] (G.inverse) a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NatLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?IntLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?FiniteCardinality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">automorphisms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">cyclic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] | fullset (baseset g) |</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">parity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ â„¤ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">solvable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ â„¤ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">psolvable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ â„•+ âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">sylow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ â„•+ âŸ¶ group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AbelianGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">abeliangroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group/group_theory </span><span class=" -MMT_DD">â™</span><span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_commutative op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">abeliangroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?AbelianGroup/abeliangroup_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">GroupHomomorphism</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">groupHomomorphism_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">from</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">to</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">morph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dom A âŸ¶ dom B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_morphism</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x: dom A] âˆ€[y: dom A] (B.op) (morph x) (morph y) â‰ morph (x âˆ˜ y)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">groupHomomorphism</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?GroupHomomorphism/groupHomomorphism_theory</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">core</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="cm">/T This obviously doesn&#39;t type check yet â™</span>
<span class="cm">theory ActionOnPolynomials : fnd:?Logic = </span>
<span class="cm">	include ?SymmetricGroup</span>
<span class="cm">	include ?GroupAction</span>
<span class="cm">	</span>
<span class="cm">	/T I think this is what I would want</span>
<span class="cm">	   though it is entirely unclear to me right now</span>
<span class="cm">	   how one would encode an induced action (if at all)â™	</span>
<span class="cm">  symmetricGroupActionOnPolynomials : type = {vars : type} rightGroupActions (SymmetricGroup vars) (Polynomials vars) â™</span>
<span class="cm">  groupActionOnPolynomials : type = {vars : type} {act : rightGroupActions G vars} rightGroupActions G (Polynomials vars) â™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">core</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">hhttp://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GroupActions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../algebra?Group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subgroups </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="cm">//  include ?SymmetricGroup â™</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">RightGroupActionsTheory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group, Î© : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">act</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î© âŸ¶ G.universe âŸ¶ Î© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">act_property_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[Ï‰ : Î©] (Ï‰ ^ (G.unit)) â‰ Ï‰ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">act_property_compose</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[Ï‰ : Î©] âˆ€[g : G.universe] âˆ€[h : G.universe] ((Ï‰ ^ g) ^ h) â‰ (Ï‰ ^ ((G.op) g h)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightGroupActions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,Î©] Mod `?GroupActions/RightGroupActionsTheory , G , Î© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">asAction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group, Î© : type, act : Î© âŸ¶ G.universe âŸ¶ Î©}{p1 :  âŠ¦ âˆ€[Ï‰ : Î©] (act Ï‰ (G.unit)) â‰ Ï‰}</span>
<span class=" -MMT_ObjectExpression">  		{p2 : âŠ¦ âˆ€[Ï‰ : Î©] âˆ€[g : G.universe] âˆ€[h : G.universe] (act (act Ï‰ g) h) â‰ (act Ï‰ ((G.op) g h))} rightGroupActions G Î© </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G, Î©, act, p1, p2] [&#39; act := act, act_property_id := p1, act_property_compose := p2 &#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">rightOrbit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group, Î© : type} (rightGroupActions G Î©) âŸ¶ Î© âŸ¶ subtypeOf Î© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rorbit</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightStabiliser</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group, Î© : type} (rightGroupActions G Î©) âŸ¶ Î© âŸ¶ subgroupOf G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rstab</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">LeftGroupActionsTheory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group, Î© : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">act</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G.universe âŸ¶ Î© âŸ¶ Î© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">act_property_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[Ï‰ : Î©] ((G.unit) ^ Ï‰) â‰ Ï‰ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">act_property_compose</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[Ï‰ : Î©] âˆ€[g : G.universe] âˆ€[h : G.universe] (h ^ (g ^ Ï‰)) â‰ (((G.op) h g) ^ Ï‰) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">//  â™</span><span class="w"></span>
<span class="cm">//  theory GroupActionsByHomomorphismTheory : fnd:?Logic &gt; G : group, Î© : type â˜=</span>
<span class="cm">//    acthom : hom G (SymmetricGroup Î©) â™</span><span class="w"></span>
<span class="cm">//  âš</span><span class="w"></span>
<span class="cm">//  theory GroupActionsByHomomorphismTheory : fnd?Logic &gt; G : group, X : ??? â˜=</span>
<span class="cm">//  âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">core</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">hhttp://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subgroups</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../algebra?Group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">subgroups_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic?</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">subtypeOf (G.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span>
<span class="w">  	 </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">op_closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [x : U] âˆ€ [y : U] (G.op) x y â‰ op x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span>
<span class="w">	 </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">unit_closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (G.unit) â‰ e </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â»Â¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">inverse_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [x] x âˆ˜ x â»Â¹ â‰ e </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">inverse_closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [x : U] (G.inverse) x â‰ x â»Â¹ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">associative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : U]âˆ€[y : U]âˆ€[z : U] (x âˆ˜ (y âˆ˜ z)) â‰ ((x âˆ˜ y) âˆ˜ z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">leftunital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : U] e âˆ˜ x â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">rightunital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : U] x âˆ˜ e â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="vc">elementsOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] G.universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subsetsOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] subtypeOf (elementsOf G) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">subgroupOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [G:group] Mod `?Subgroups?subgroups_theory , G </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">index</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group} subgroupOf G âŸ¶ â„•+ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> 	 </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// theory ActionsOnSubgroups : fnd:?Logic =</span>
<span class="cm">	include ?Group â™</span>
<span class="cm">	include ?Subgroups â™</span>
<span class="cm">	include ?GroupActions â™</span>
<span class="cm">	</span>
<span class="cm">	subgroupConjugation : {G : group} rightGroupActions G (subgroupOf G) â™</span>
<span class="cm">	elementConjugation : {G : group} rightGroupActions G (elementsOf G) â™</span>
<span class="cm">	</span>
<span class="cm">	normaliser : {G : group} (subgroupOf G) â†’ (subgroupOf G) â˜ </span>
<span class="cm">						 = [G] [U : subgroupOf G] rstab (subgroupConjugation G) U â™   </span>
<span class="cm">	</span>
<span class="cm">	conjugacyClass : {G : group} (subgroupOf G) â†’ subtypeOf (subgroupOf G) â˜</span>
<span class="cm">	           = [G] [U : subgroupOf G] rorbit (subgroupConjugation G) U â™</span>
<span class="cm">						 </span>
<span class="cm">  centraliser : {G : group} G.domain â†’ (subgroupOf G) â˜</span>
<span class="cm">	           = [G] [x : G.domain] rstab (elementConjugation G) x â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">// theory NormalSubgroups : fnd:?Logic =</span>
<span class="cm">	include ?Subgroups â™</span>
<span class="cm">	</span>
<span class="cm">	theory NormalSubgroupsTheory : fnd:?Logic &gt; G : group â˜=</span>
<span class="cm">		include ?Subgroups/SubgroupsTheory â™</span>
<span class="cm">		</span>
<span class="cm">		normal_prop : âŠ¦ âˆ€[g : G.domain] âˆ€[n : domain] âˆƒ[n2 : domain] ((G.op) ((G.op) ((G.inverse) g) n) g) â‰ n2 â™ </span>
<span class="cm">	âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// This is a HACK â™</span>
<span class="cm">	normalSubgroupOf : group â†’ type â˜ = [g] (ModelsOf `?NormalSubgroups/NormalSubgroupsTheory ) g g â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">// theory SylowSubgroups : fnd:?Logic = </span>
<span class="cm">	include ?Subgroups â™</span>
<span class="cm">	include core:/arithmetics?intarith â™</span>
<span class="cm">	SylowSubgroups : {G : group} {p : Primes} subtypeOf (subgroupOf G) â™ </span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">// theory GroupHomomorphisms : fnd:?Logic = </span>
<span class="cm">	include ?Group â™</span>
<span class="cm">	include ?Subgroups â™</span>
<span class="cm">	include ?NormalSubgroups â™</span>

<span class="cm">	theory GroupHomomorphismsTheory : fnd:?Logic &gt; G : group, H : group â˜ = </span>
<span class="cm">		map : G.domain â†’ H.domain â™</span>
<span class="cm">    morphism_property : âŠ¦ âˆ€[x : G.domain] âˆ€[y : G.domain] (H.op) (map x) (map y) â‰ map ((G.op) x y)â™</span>
<span class="cm">  âš</span><span class="w"> </span><span class="cm">// </span>
<span class="cm">  hom : group â†’ group â†’ type â˜ = ModelsOf `?GroupHomomorphisms/GroupHomomorphismsTheory â˜ # 1 --&gt; 2 â™</span>

<span class="cm">  // Of course the type of kernel should be more precise! â™</span>
<span class="cm">  // kernel : {G : group} {H : group} hom G H â†’ (subgroupOf G) â™</span>
<span class="cm">	kernel : {G : group} {H : group} (hom G H) â†’ (normalSubgroupOf G) â™</span>
<span class="cm">  image : {G : group} {H : group} (hom G H) â†’ (subgroupOf H) â™	</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="cm">/T Permutation groups are subgroups of SymmetricGroup(Î©) âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">PermutationGroups</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subgroups </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>

<span class="w">	</span><span class="vc">permutationGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î© : type} subgroupOf (symmetricGroup Î©) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">permutationGroup</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// permutationGroupByGenerators : {Î© : type} subtypeOf (symmetricGroup Î©) âŸ¶ permutationGroup Î© â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">permutationGroup âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] cardinality g</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PermutationGroupsN</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subgroups </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroupOfN </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">permutationGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î© : type} subgroupOf (symmetricGroup Î©) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// permutationGroupByGenerators : {Î© : type} subtypeOf (symmetricGroup Î©) âŸ¶ permutationGroup Î© â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">StabilizerChain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PermutationGroups </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupActions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T A step in a Schreier-Sims Stabiliser Chain â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// step : {Î© : type} {G : group} {act : rightGroupActions G Î©} âŸ¶ </span>
<span class="cm">		{&#39; basept : Î©, orbit : rorbit act basept, stabiliser : rstab act Î² &#39;} â™</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SymmetricGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../algebra?Group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../typedsets?Functions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../typedsets?Bijective </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">    </span><span class="vc">has_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î© : type} âŠ¦ âˆ€ [x : bijections Î© Î©] (x Â° (bijinv x)) â‰ ([y : Î©] y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">has_inv</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_leftunital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î© : type} âŠ¦ âˆ€ [x : bijections Î© Î©] ([y] y) Â° x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">is_lu</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_rightunital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Î© : type} âŠ¦ âˆ€ [x : bijections Î© Î©] x Â° ([y] y) â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">is_ru</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">symmetricGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ group </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [Î©] [&#39;</span>
<span class="cm">    domain := bijections Î© Î©,</span>
<span class="cm">    op := function_composition Î© Î© Î©,</span>

<span class="cm">    associative := isassoc Î© Î© Î© Î©,</span>
<span class="cm">    </span>
<span class="cm">    unit := ([Ï‰ : Î©] Ï‰),</span>
<span class="cm">    leftunital := is_lu Î©, </span>
<span class="cm">    rightunital := is_ru Î©, </span>
<span class="cm">    </span>
<span class="cm">    inverse := ([x : domain] inverse_bijections Î© Î© x),</span>
<span class="cm">    inverse_property := has_inv Î©</span>
<span class="cm">    &#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SymmetricGroupOfN</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arith:?NaturalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">symmetricGroupOfN</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„•+ âŸ¶ group </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[N] symmetricGroup (fromOneTo N) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/groups</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SylowSubgroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// theory SylowSubgroupTheory : </span>
<span class="cm">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">right_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?subgroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">right_coset_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> g:G </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">g</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">type_of_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">right_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">right_coset_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_right_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [el:right_coset.type_of_coset] âˆƒ[h:H] el â‰ h âˆ˜ g </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">left_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?subgroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">left_coset_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> g:G </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">g</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">left_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">left_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">left_coset_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_left_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [el:left_coset.type_of_coset] âˆƒ[h:H] el â‰ g âˆ˜ h </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">normal_subgroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?subgroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?left_coset </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?right_coset </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?set_equality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_normal_subgroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[g:G] left_coset g = right_coset g </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="cm">//T how to handle properties of groups? Being abelian is a property</span>
<span class="cm">â™</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">abeliangroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">abelian_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type}{op : U â†’ U â†’ U}prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U][op]âˆ€[x]âˆ€[y] op x y â‰ op y x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">abeliangroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group/group_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">abelianax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ abelian_property U op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">abeliangroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">abeliangroup_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">is_abelian</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : abeliangroup} âŠ¦ commutative G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] (G.abelianax) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">group_homomorphism</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">group_homomorphism_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">from</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">A</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">to</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">map</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dom A â†’ dom B</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">morphism_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x: dom A] âˆ€[y: dom A] (map x) âˆ˜ (map y) â‰ map (x âˆ˜ y)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">grouphomomorphism</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">group_homomorphism_theory</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">group_action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">right_group_action_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group , Î© : type </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">acting</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">G</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">actee</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î©</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">map</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">actee â†’ dom acting â†’ actee </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">right_group_action_property_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[Ï‰ : actee] (Ï‰ ^ (unit acting) â‰ Ï‰ ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">right_group_action_property_prod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[Ï‰ : actee] âˆ€[g : dom acting] âˆ€[h : dom acting] (Ï‰^g)^h â‰ Ï‰^(gâˆ˜h) </span><span class=" -MMT_DD">â™</span><span class="w">      </span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">rightgroupaction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">right_group_action_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">left_group_action_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group, Î© : type </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">acting</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">G</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">actee</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î©</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">map</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dom acting â†’ actee â†’ actee </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">left_group_action_property_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[Ï‰ : actee] map (unit acting) Ï‰ â‰ Ï‰ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">leftgroupaction</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class="nv">left_group_action_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?permutation_representation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">action_from_representation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">permutation_representation â†’ rightgroupaction </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[pa] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">permutation_representation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_homomorphism </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">permutation_representation_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group, Î© : type </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">acting_group</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">actee_set</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">hom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">acting_group â†’ SymmetricGroup actee_set </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">permutation_representation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">permutation_representation_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">/T   all other fields of both action and representation are deduced from the group and the set, so i guess this is enough? âš</span><span class="w"></span>
<span class="kd">view</span><span class="w"> </span><span class="nc">group_action_is_permutation_representation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?group_action/rightgroupaction</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?permutation_representation/permutation_representation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">acting_group</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">acting </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">actee_set</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">actee </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">view</span><span class="w"> </span><span class="nc">permutation_representation_is_group_action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?permutation_representation/permutation_representation</span><span class="w"> </span><span class="p">â†’</span><span class="w"> </span><span class="l l-URI">?group_action/rightgroupaction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">acting</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">acting_group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">actee</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">actee_set </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">group_action_orbit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">orbit_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> action : rightgroupaction, Î± : action.actee </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">ga</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightgroupaction </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">action </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ga.actee </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î± </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">set</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{type : ga.actee} </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">orbit_set_binding</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{orb : orbit} âŠ¦ âˆ€[x:orb] âˆƒ[g:ga.acting] ga.map Î± g â‰ x </span><span class=" -MMT_DD">â™</span><span class="w">  </span>
<span class="w">    </span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">orbit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">orbit_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">group_action_stabilizer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">stabilizer_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> action : rightgroupaction, Î± : action.actee </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">ga</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightgroupaction </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">action </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ga.actee </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î± </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">stabilizer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{type : ga.acting} </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">stabilizer_set_binding</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[g:stabilizer] ga.map Î± g â‰ Î± </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">orbit_stabilizer_theorem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action_orbit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action_stabilizer </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Omega</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">G</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightgroupaction G Omega </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">theorem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[Î±:Omega] ((orbit action Î±).order) Ã— ((stabilizer action Î±).order) â‰ (G.order) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">conjugation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">G</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">Î©</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G.dom </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">la</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">leftgroupaction G Î© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">ra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightgroupaction G Î© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">conjugation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î© â†’ G.dom â†’ Î© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[Î±, g] ra (la (inverseOf g) Î±) g </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">// view conjugation : rightgroupaction =</span>
<span class="cm">  acting = G â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">actee</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Î© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">conjugation_centralizer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?conjugation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action_stabilizer </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">centralizer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group, Î± : G.dom} type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">stabilizer (conjugation G) Î± </span><span class=" -MMT_DD">â™</span><span class="w">    </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HeckeFields</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Field </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">degree_over_Q</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field âŸ¶ â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HilbertNewforms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?HeckeFields </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">hilbertNewform</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">base_field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform âŸ¶ field </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">base_field_degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform âŸ¶ â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="cm">// level_ideal TODO â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">level_norm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform âŸ¶ â„¤ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">dimension</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform âŸ¶ â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HeckeEigenvalues</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">elliptic_curves?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?HilbertNewforms </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">heckePolynomial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform âŸ¶ (polynomial rationalField) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">heckeEigenvalues</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform âŸ¶ List (polynomial rationalField) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SemiLattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?Relations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra/bands?Band</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">semilattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra/bands?Band/band_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span>
<span class="w">     </span><span class="vc">axiom_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_commutative op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="cm">// order : U âŸ¶ U âŸ¶ bool â˜ = [a,b] a â‰ a âˆ˜ b â˜ # 1 &lt; 2 â™</span><span class="w"></span>
<span class="w">     </span><span class="cm">// axiom_reflexive : âŠ¦ reflexive (order) â˜ = sketch &quot;trivial&quot; â™</span><span class="w"></span>
<span class="w">     </span><span class="cm">// axiom_transitive : âŠ¦ transitive (order)â˜ = sketch &quot;trivial&quot;  â™</span><span class="w"></span>
<span class="w">     </span><span class="cm">// axiom_antisymmetric : âŠ¦ antisymmetric (order) â˜ = sketch &quot;trivial&quot; â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?SemiLattice/semilattice_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="cm">// view POSetIsMeetSemiLattice : ?SemiLattice/semilattice_theory -&gt; ts:?POSetBounds/posetBounds_theory =</span>
<span class="cm">  universe = universe â™</span>
<span class="cm">  op = meet â™                               </span>
<span class="cm">  axiom_idempotent = meetIdempotent â™</span>
<span class="cm">  axiom_associative = meetAssociative â™</span>
<span class="cm">  axiom_commutative = meetCommutative â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">// view POSetIsJoinSemiLattice : ?SemiLattice/semilattice_theory -&gt; ts:?POSetBounds/posetBounds_theory =</span>
<span class="cm">  universe = universe â™</span>
<span class="cm">  op = join â™                               </span>
<span class="cm">  axiom_idempotent = joinIdempotent â™</span>
<span class="cm">  axiom_associative = joinAssociative â™</span>
<span class="cm">  axiom_commutative = joinCommutative â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">/T MiKo: probably need to say that the meet order is the same as the join-order, i.e. </span>
<span class="cm">in theory SemiLattice/semilattice_theory</span>
<span class="cm">  biviewMeet : âŠ¢ SemilatticeIsPOSet (POSetIsMeetSemiLattice op ) â‰ op </span>
<span class="cm">  biviewJoin : âŠ¢ SemilatticeIsPOSet (POSetIsJoinSemiLattice op ) â‰ op </span>

<span class="cm">  and in </span>

<span class="cm">theory ts:?POSet/poset_theory</span>
<span class="cm">  biviewMeet : âŠ¢ POSetIsMeetSemiLattice (SemilatticeIsPOSet ord ) â‰ ord </span>
<span class="cm">  biviewMeet : âŠ¢ POSetIsMeetSemiLattice (SemilatticeIsPOSet ord ) â‰ ord </span>
<span class="cm">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OperationProps </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SemiLattice </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?POSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// implicit view SemilatticeIsPOSet : ts:?POSet/poset_theory -&gt; ?SemiLattice/semilattice_theory =</span>
<span class="cm">    include â˜ts:?SetStructures â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// ord = [a,b] a â‰ a âˆ˜ b â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// axiom_reflexive = sketch &quot;trivial&quot; â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// axiom_transitive = sketch &quot;trivial&quot; â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// axiom_antisymmetric = sketch &quot;trivial&quot; â™</span><span class="w"></span>


<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?SetStructures </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">lattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="k">implicit</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">meetstruct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SemiLattice/semilattice_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â˜ts:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">op</span><span class="w"> </span><span class="p">@</span><span class="no"> meet </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ“</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">    </span><span class="kd">structure</span><span class="w"> </span><span class="nc">joinstruct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SemiLattice/semilattice_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â˜ts:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">op</span><span class="w"> </span><span class="p">@</span><span class="no"> join </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ”</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="cm">// order = â˜http://mathhub.info/MitM/core/typedsets?PrOSet/proset_theory?order â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_absorption1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop_absorption meet join </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_absorption2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop_absorption join meet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_absorption</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_absorption1 âˆ§ prop_absorption2 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span><span class="vc">lattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Lattice/lattice_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DistributiveLattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ringoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">distributiveLattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice/lattice_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="kd">structure</span><span class="w"> </span><span class="nc">ringoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Ringoid/ringoid_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">     	</span><span class="vc">R</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â˜ts:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="cm">// plus = join â™</span><span class="w"></span>
<span class="w">        </span><span class="cm">// times = meet â™</span><span class="w"></span>
<span class="w">     </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">distributiveLattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?DistributiveLattice/distributiveLattice_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BoundedLattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">boundedLattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">      </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice/lattice_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">top</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¤</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">bot</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŠ¥</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="cm">// axiom_top : âŠ¦ âˆ€[a] a â‰¼ âŠ¤ â™</span><span class="w"> </span><span class="cm">// imported implicitly via SemilatticeIsPOSet â™</span><span class="w"></span>
<span class="w">      </span><span class="cm">// axiom_bot : âŠ¦ âˆ€[a] âŠ¥ â‰¼ a â™</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span><span class="vc">boundedLattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?BoundedLattice/boundedLattice_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">ComplementedLattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BoundedLattice</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">complementedLattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BoundedLattice/boundedLattice_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">complement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,c] a âŠ” c â‰ âŠ¤ âˆ§ a âŠ“ c â‰ âŠ¥ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">comp</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">prop_complemented</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âˆ€[a] âˆƒ[c] comp a c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">axiom_complemented</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_complemented </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">complementedLattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?ComplementedLattice/complementedLattice_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"> </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BooleanAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ComplementedLattice</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DistributiveLattice </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">booleanAlgebra_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ComplementedLattice/complementedLattice_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DistributiveLattice/distributiveLattice_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">booleanalgebra</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?BooleanAlgebra/booleanAlgebra_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Module</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_dist1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type} (A âŸ¶ B âŸ¶ B) âŸ¶ (B âŸ¶ B âŸ¶ B) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,itimes,iplus] âˆ€[r]âˆ€[x]âˆ€[y] itimes r (iplus x y) â‰ iplus (itimes r x) (itimes r y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_dist</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_dist2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type} (A âŸ¶ B âŸ¶ B) âŸ¶ (A âŸ¶ A âŸ¶ A) âŸ¶ (B âŸ¶ B âŸ¶ B) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,itimes,plus1,plus2] âˆ€[r]âˆ€[s]âˆ€[x] itimes (plus1 r s) x â‰ plus2 (itimes r x) (itimes s x) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_dist</span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_associative_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type} (A âŸ¶ B âŸ¶ B) âŸ¶ (A âŸ¶ A âŸ¶ A) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,itimes,stimes] âˆ€[r]âˆ€[s]âˆ€[x] itimes r (itimes s x) â‰ itimes (stimes r s) x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_associative_scalars</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_unit_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type} (A âŸ¶ B âŸ¶ B) âŸ¶ A âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,itimes,u] âˆ€[x] itimes u x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_unit_scalars</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">module_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> scalars : ring â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">scaltp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">scalars.universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AbelianGroup/abeliangroup_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">scalarmult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">scaltp âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_dist1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_dist1 scalarmult op</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_dist2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_dist2 scalarmult (scalars.rplus) op </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_associative_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_associative_scalars scalarmult (scalars.rtimes) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_unit_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_unit_scalars scalarmult (scalars.rone) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">module</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[R : ring] Mod â˜?Module/module_theory R </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">distributive_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{R : ring} âŠ¦ prop_dist2 (R.rtimes) (R.rplus) (R.rplus) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">distributive_right</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">asModule</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : ring} module F </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := f.universe,</span>
<span class=" -MMT_ObjectExpression">		op := f.rplus,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := f.addition/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">		unit := f.rzero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := f.addition/axiom_leftUnital,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := f.addition/axiom_rightUnital,</span>
<span class=" -MMT_ObjectExpression">		inverse := f.rminus,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := f.addition/axiom_inverse,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := f.addition/axiom_commutative,</span>
<span class=" -MMT_ObjectExpression">		scalarmult := f.rtimes,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist1 := f.axiom_distributive,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist2 := distributive_right f,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative_scalars := f.multiplication/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">		axiom_unit_scalars := f.axiom_leftUnital</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asMod</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// include base:?Sequences â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// theory finGenFree_module_theory : base:?Logic &gt; scalars : ring â˜ =</span>
<span class="cm">		// include ?module/module_theory â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="cm">// flexary_sum : {n} U^n âŸ¶ U â˜ = [n,s] foldL op unit n s â˜ # âˆ‘ 2 â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="cm">// dimension : NAT â™</span><span class="w"></span>
<span class="w">		</span><span class="cm">// basis : U^dimension â™</span><span class="w"></span>
<span class="w">		</span><span class="cm">// is_basis : âŠ¦ âˆ€ [v : U] âˆƒ [s : scaltp^dimension] v â‰ (âˆ‘ âŸ¨&#39; s..i â‹… basis..i | i:dimension &#39;âŸ©) â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Vectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Field </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Module </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">vectorspace_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> scalars : field â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Module/module_theory (scalars) </span><span class=" -MMT_DD">â™</span><span class="w">       </span>
<span class="w">		</span><span class="vc">bminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] op a (inverse b) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"> </span>
<span class="w">	</span><span class="vc">vectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field âŸ¶ kind </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F : field] Mod â˜?Vectorspace/vectorspace_theory F </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Module </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">asVectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field} vectorspace F </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := f.universe,</span>
<span class=" -MMT_ObjectExpression">		op := f.rplus,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := f.addition/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">		unit := f.rzero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := f.addition/axiom_leftUnital,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := f.addition/axiom_rightUnital,</span>
<span class=" -MMT_ObjectExpression">		inverse := f.rminus,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := f.addition/axiom_inverse,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := f.addition/axiom_commutative,</span>
<span class=" -MMT_ObjectExpression">		scalarmult := f.rtimes,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist1 := f.axiom_distributive,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist2 := distributive_right f,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative_scalars := f.multiplication/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">		axiom_unit_scalars := f.axiom_leftUnital</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asVectorspace</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Productspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Vectorspace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">product_universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field} vectorspace F âŸ¶ vectorspace F âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2] v1.universe Ã— v2.universe </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">x_</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1: vectorspace F, v2: vectorspace F} (v1 x_ F v2) âŸ¶ (v1 x_ F v2) âŸ¶ (v1 x_ F v2) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2] [a,b] âŸ¨ ((v1.op) (Ï€l a) (Ï€l b)), ((v2.op) (Ï€r a) (Ï€r b))âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">xop_</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} v1 x_ F v2 </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2] âŸ¨ (v1.unit), (v2.unit) âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_unit</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F}(v1 x_ F v2) âŸ¶ (v1 x_ F v2) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2] [x] âŸ¨ (v1.inverse) Ï€l x, (v2.inverse) Ï€r x âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_inverse</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_scalarmult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1: vectorspace F, v2: vectorspace F} F.universe âŸ¶ (v1 x_ F v2) âŸ¶ (v1 x_ F v2) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2][Î±,v] âŸ¨ ((v1.scalarmult) Î± (Ï€l v)), ((v2.scalarmult) Î± (Ï€r v)) âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_scalarmult</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">product_axiom_associative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F}</span>
<span class=" -MMT_ObjectExpression">		âŠ¦ prop_associative (v1 xop_ F v2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_associative</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_leftUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		âŠ¦ prop_leftUnital	(v1 xop_ F v2) (product_unit F v1 v2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_leftUnital</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_rightUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		âŠ¦ prop_rightUnital	(v1 xop_ F v2) (product_unit F v1 v2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_rightUnital</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		âŠ¦ prop_inverse (v1 xop_ F v2) (product_inverse F v1 v2) (product_unit F v1 v2)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_inverse</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		âŠ¦ prop_commutative (v1 xop_ F v2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_commutative</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_dist1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, V1 : vectorspace F, V2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		âŠ¦ prop_dist1 (product_scalarmult F V1 V2) (V1 xop_ F V2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_dist</span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_dist2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, V1 : vectorspace F, V2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		âŠ¦ prop_dist2 (product_scalarmult F V1 V2) (F.rplus) (V1 xop_ F V2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_dist</span><span class="si">2</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_associativeScalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, V1 : vectorspace F, V2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		âŠ¦ prop_associative_scalars (product_scalarmult F V1 V2) (F.rtimes) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_associativeScalars</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_unitScalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, V1 : vectorspace F, V2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		âŠ¦ prop_unit_scalars (product_scalarmult F V1 V2) (F.rone) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_unitScalars</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">productspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field} vectorspace F âŸ¶ vectorspace F âŸ¶ vectorspace F </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] [v1] [v2] [&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := v1 x_ F v2,</span>
<span class=" -MMT_ObjectExpression">		op := v1 xop_ F v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := product_axiom_associative F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		unit := product_unit F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := product_axiom_leftUnital F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := product_axiom_rightUnital F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		inverse := product_inverse F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := product_axiom_inverse F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := product_axiom_commutative F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		scalarmult := product_scalarmult F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist1 := product_axiom_dist1 F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist2 := product_axiom_dist2 F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative_scalars := product_axiom_associativeScalars F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_unit_scalars := product_axiom_unitScalars F v1 v2</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">ov</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">finite_vectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F: field} pos_lit âŸ¶ vectorspace F </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// axiom_finite1 : {F : field} âŠ¦ eq (vectorspace F) (F ^ 1) (asVectorspace F) â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// axiom_sr : {n} âŠ¦ finite_real_vectorspace (Succ n) â‰ productspace realField â„1 (finite_real_vectorspace n) â™</span><span class="w">  </span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">LinearMaps</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Productspace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">linearMap_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> K : field, n1 : â„•+, n2 : â„•+ â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">V1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">K ^ n1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">V2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">K ^ n2 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(V1.universe) âŸ¶ (V2.universe) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="cm">// insert axioms here...</span>
<span class="cm">		..</span>
<span class="cm">		.. â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">linearMap</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field âŸ¶ â„•+ âŸ¶ â„•+ âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[K : field][n1 : â„•+,n2 : â„•+] Mod â˜?LinearMaps/linearMap_theory K n1 n2 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">linearMap</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// L : linearMap realfield 2 3 â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalMonoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NaturalDeduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?NaturalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">naturalMonoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">monoid </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := â„•,</span>
<span class=" -MMT_ObjectExpression">		op := â˜arith:?NaturalArithmetics?addition ,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := forallI [x : â„•] (forallI [y : â„•] (forallI [z : â„•] (associative_plus_nat x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		unit := 0 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := forallI leftunital_plus_nat ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := forallI rightunital_plus_nat</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntegerRing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w">                         </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NaturalDeduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?IntegerArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_intOneNeqZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ neq â„¤ 1 0 </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">integerRing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := â„¤,</span>
<span class=" -MMT_ObjectExpression">		rplus := â˜arith:?IntegerArithmetics?addition ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_associative := forallI [x : â„¤] (forallI [y : â„¤] (forallI [z : â„¤] (associative_plus_int x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rzero := 0 ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_leftUnital := forallI â˜arith:?IntegerArithmetics?axiom_leftUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_rightUnital := forallI â˜arith:?IntegerArithmetics?axiom_rightUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		rtimes := â˜arith:?IntegerArithmetics?multiplication ,</span>
<span class=" -MMT_ObjectExpression">		multiplication/axiom_associative := forallI [x : â„¤] (forallI [y : â„¤] (forallI [z : â„¤] (associative_times_int x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rminus := â˜arith:?IntegerArithmetics?uminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_inverse := forallI (axiom_plusUminus) ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_commutative := forallI [x : â„¤] (forallI [y : â„¤] (â˜arith:?IntegerArithmetics?axiom_additionCommutative x y)) ,</span>
<span class=" -MMT_ObjectExpression">		axiom_distributive := forallI [x : â„¤] (forallI [y : â„¤] (forallI [z : â„¤] (â˜arith:?IntegerArithmetics?axiom_distributive x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rone := 1 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_oneNeqZero := axiom_intOneNeqZero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := forallI â˜arith:?IntegerArithmetics?axiom_leftUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := forallI â˜arith:?IntegerArithmetics?axiom_rightUnitalTimes</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">integerGroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">additiveGroup integerRing </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RationalField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Field </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?RationalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NaturalDeduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_ratOneNeqZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ neq â„š 1 0 </span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">	</span><span class="vc">rationalField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := â„š,</span>
<span class=" -MMT_ObjectExpression">		rplus := â˜arith:?RationalArithmetics?addition ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_associative := forallI [x : â„š] (forallI [y : â„š] (forallI [z : â„š] (associative_plus_rat x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rzero := 0 ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_leftUnital := forallI â˜arith:?RationalArithmetics?axiom_leftUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_rightUnital := forallI â˜arith:?RationalArithmetics?axiom_rightUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		rtimes := â˜arith:?RationalArithmetics?multiplication ,</span>
<span class=" -MMT_ObjectExpression">		multiplication/axiom_associative := forallI [x : â„š] (forallI [y : â„š] (forallI [z : â„š] (associative_times_rat x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rminus := â˜arith:?RationalArithmetics?uminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_inverse := forallI â˜arith:?RationalArithmetics?axiom_plusUminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_commutative := forallI [x : â„š] (forallI [y : â„š] (â˜arith:?RationalArithmetics?axiom_commutativePlus x y)) ,</span>
<span class=" -MMT_ObjectExpression">		â˜arith:?IntegerArithmetics?axiom_distributive := forallI [x : â„š] (forallI [y : â„š] (forallI [z : â„š] (â˜arith:?RationalArithmetics?axiom_distributive x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rone := 1 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_oneNeqZero := axiom_ratOneNeqZero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := forallI â˜arith:?RationalArithmetics?axiom_leftUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := forallI â˜arith:?RationalArithmetics?axiom_rightUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		inverse := inverseTyped ,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := forallI axiom_inv2 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := forallI [x : â„š] (forallI [y : â„š] â˜arith:?RationalArithmetics?axiom_commutativeTimes x y)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// TODO ugly hack!! â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">rationalField2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">IntegerRing</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Field </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NaturalDeduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_realOneNeqZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ neq â„ 1 0 </span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">	</span><span class="vc">realField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := â„,</span>
<span class=" -MMT_ObjectExpression">		rplus := â˜arith:?RealArithmetics?addition ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_associative := forallI [x : â„] (forallI [y : â„] (forallI [z : â„] (associative_plus_real x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rzero := 0 ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_leftUnital := forallI â˜arith:?RealArithmetics?axiom_leftUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_rightUnital := forallI â˜arith:?RealArithmetics?axiom_rightUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		rtimes := â˜arith:?RealArithmetics?multiplication ,</span>
<span class=" -MMT_ObjectExpression">		multiplication/axiom_associative := forallI [x : â„] (forallI [y : â„] (forallI [z : â„] (associative_times_real x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rminus := â˜arith:?RealArithmetics?uminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_inverse := forallI â˜arith:?RealArithmetics?axiom_plusUminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_commutative := forallI [x : â„] (forallI [y : â„] (â˜arith:?RealArithmetics?axiom_commutativePlus x y)) ,</span>
<span class=" -MMT_ObjectExpression">		â˜arith:?IntegerArithmetics?axiom_distributive := forallI [x : â„] (forallI [y : â„] (forallI [z : â„] (â˜arith:?RealArithmetics?axiom_distributive x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rone := 1 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_oneNeqZero := axiom_realOneNeqZero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := forallI â˜arith:?RealArithmetics?axiom_leftUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := forallI â˜arith:?RealArithmetics?axiom_rightUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		â˜arith:?IntegerArithmetics?inverse := â˜arith:?RealArithmetics?inverseTyped ,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := forallI â˜arith:?RealArithmetics?axiom_inv2 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := forallI [x : â„] (forallI [y : â„] â˜arith:?RealArithmetics?axiom_commutativeTimes x y)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// TODO ugly hack!! â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealVectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Vectorspace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealField </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Productspace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">realVec</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vectorspace realField </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">realVec1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">realVec </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">asVectorspace realField </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„</span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">realVec2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">realVec </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = productspace realField â„1 â„1 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">realVec3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">realVec </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = productspace realField â„1 â„2 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„</span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// takes forever â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// finite_real_vectorspace : pos_lit âŸ¶ RealVec â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/permutationgroup</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">algebra</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Permutations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?Lists </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NatLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">cycle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">List â„•+ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">permutation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">PermList</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(List cycle) âŸ¶ permutation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">fromImage</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(List â„•+) âŸ¶ permutation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GroupAction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?Bijective</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜algebra:?Group</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">groupAction_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜algebra:?Group/group_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">X</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">phi</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ (bijections X X) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î¦</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">inner_notation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{g : U, x : X} X </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g,x] (Î¦ g) x </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w">   </span>
<span class="w">    </span><span class="vc">is_action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦  âˆ€[g: U] âˆ€[h: U] âˆ€[x:X] g&lt;h&lt;x&gt;&gt; â‰ (g âˆ˜ h)&lt;x&gt;</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">groupAction</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜GroupAction/groupAction_theory</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">outer_notation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{GX : groupAction, g : dom GX, x : GX.X} GX.X </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[GX,g,x] ((GX.phi) g) x </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w">   </span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜../algebra?RationalPolynomials </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">polynomialOrbit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} group âŸ¶ multi_polynomial r âŸ¶ List (multi_polynomial r) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orbit</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PermutationGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜algebra:?Group</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?Bijective </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Permutations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupAction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">permutationGroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupAction/groupAction_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">is_injective_action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ is_injective Î¦ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">permutationGroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?PermutationGroup/permutationGroup_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fromPerm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(List permutation) âŸ¶ permutationGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">generators</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">permutationGroup âŸ¶ List permutation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">dihedralGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ permutationGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">  </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TransitiveGroupAction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupAction</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">transitiveGroupAction_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupAction/groupAction_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">is_transitive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x:X] âˆ€[y:X] âˆƒ[g:U] (Î¦ g) x â‰ y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">transitiveGroupAction</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?TransitiveGroupAction/transitiveGroupAction_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">tr_value</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">transitiveGroupAction âŸ¶ â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">transitiveGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ transitiveGroupAction 	</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">/MitM/Foundation?Metadata?constructorargument</span><span class="w"> </span><span class=" -MMT_ObjectExpression">degree</span>
<span class=" -MMT_ObjectExpression">  																					</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">/MitM/Foundation?Metadata?constructorargument</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tr_value </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"> </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Polynomials</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?Sequences </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">finiteSum</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r:ring, n} (r.universe)^n âŸ¶ (r.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,n,s] foldL (r.rplus) (r.rzero) n s  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ‘</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">power_seq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r:ring, n : NAT} r.universe âŸ¶ r.universe </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,n,x] foldL (r.rtimes) (r.rone) n âŸ¨&#39; x | i:n &#39;âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">tothe</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">polynomial_of</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring, n} (r.universe)^n âŸ¶ (r.universe) âŸ¶ (r.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,n,s] [x] âˆ‘ âŸ¨&#39; ((r.rtimes) (s..i) (x tothe i) ) | i:n &#39;âŸ©</span>
<span class=" -MMT_ObjectExpression">		</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">polynomial_of</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">OneDimensionalPolynomialsOver</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] âŸ¨ f : (r.universe) âŸ¶ (r.universe) | âŠ¦ âˆƒ [n] exists_seq (r.universe) n [s] f â‰ (polynomial_of s)  âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">polynomialRing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring âŸ¶ ring </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// TODO </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">polynomial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] (polynomialRing r).universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">multi_polynomial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring âŸ¶ type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">monomial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">monomial</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NumberSpaces</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RationalField </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Polynomials </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">numberField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(polynomialRing rationalField).universe âŸ¶ ring </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">galoisGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring âŸ¶ group </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RationalPolynomials</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Polynomials </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?Lists </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?RationalField </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">poly_con</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} string âŸ¶ List â„š âŸ¶ polynomial r </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [n,s] polynomial_of s </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">monomial_con</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r: ring} (List (string Ã— â„•)) Ã— â„š âŸ¶ monomial r </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">monomial_con</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">multi_poly_con</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} List (monomial r) âŸ¶ multi_polynomial r </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">mpoly</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// x1 =  &quot;x1&quot; â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// x2 = &quot;x2&quot; â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// test1 = âŸ¨ x1 , 1 âŸ© â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// m1 = monomial_con rationalField2 âŸ¨  (âŸ¨ x1 , 1 âŸ© ++ nil) , 3 âŸ© â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// m2 = monomial_con rationalField2 âŸ¨ (âŸ¨ x2, 1âŸ© ++ nil),2âŸ© â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// p = mpoly (ls m1,m2) â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">groebner</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} List (multi_polynomial r) âŸ¶ List (multi_polynomial r) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">groebner</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ringoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">ringoid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kd">structure</span><span class="w"> </span><span class="nc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma/magma_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">      	</span><span class="vc">universe</span><span class="w"> </span><span class="p">@</span><span class="no"> R </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">op</span><span class="w"> </span><span class="p">@</span><span class="no"> plus </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"> </span>
<span class="w">	</span><span class="kd">structure</span><span class="w"> </span><span class="nc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma/magma_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">			</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">R </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">			</span><span class="vc">op</span><span class="w">  </span><span class="p">@</span><span class="no"> times </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_distributive plus times </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">ringoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Ringoid/ringoid_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T MiKo: refactor this with Ringoid âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Rig</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AbelianGroup </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">rig_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="kd">structure</span><span class="w"> </span><span class="nc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?AbelianGroup/abeliangroup_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">			</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â˜sets:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Uadd</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">			</span><span class="vc">op</span><span class="w"> </span><span class="p">@</span><span class="no"> rplus </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">			</span><span class="vc">unit</span><span class="w"> </span><span class="p">@</span><span class="no"> rzero </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">O</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">			</span><span class="vc">inverse</span><span class="w"> </span><span class="p">@</span><span class="no"> rminus </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class=" -MMT_MD">âš</span><span class="w"> </span>
<span class="w">		</span><span class="kd">structure</span><span class="w"> </span><span class="nc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SemiGroup/semigroup_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">			</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â˜sets:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Umult</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">			</span><span class="vc">op</span><span class="w">  </span><span class="p">@</span><span class="no"> rtimes </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">6</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">		</span><span class="vc">unitset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ x: U | âŠ¦ x â‰  O âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_distributive rplus rtimes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"> </span>
<span class="w">	</span><span class="vc">rig</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Rig/rig_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">unitsetOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rig âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] r.unitset </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rigUnitsetSubtype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : rig} r.unitset &lt;* r.universe </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">additiveGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rig âŸ¶ abeliangroup </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] [&#39; </span>
<span class=" -MMT_ObjectExpression">		universe := r.universe,</span>
<span class=" -MMT_ObjectExpression">		op := r.rplus ,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := r.addition/axiom_associative , </span>
<span class=" -MMT_ObjectExpression">		unit := r.rzero ,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := r.addition/axiom_leftUnital ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := r.addition/axiom_rightUnital ,</span>
<span class=" -MMT_ObjectExpression">		inverse := r.rminus ,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := r.addition/axiom_inverse ,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := r.addition/axiom_commutative</span>
<span class=" -MMT_ObjectExpression">		&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplicative_semigroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rig âŸ¶ semigroup </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] [&#39;</span>
<span class=" -MMT_ObjectExpression">			universe := r.universe,</span>
<span class=" -MMT_ObjectExpression">			op := (r.rtimes) ,</span>
<span class=" -MMT_ObjectExpression">			axiom_associative := r.multiplication/axiom_associative</span>
<span class=" -MMT_ObjectExpression">		&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// needs proof that ret type = unitset â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">		</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Ring</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rig </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="cm">// TODO needs refactoring once structures work â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">ring_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rig/rig_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">rone</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">I</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_oneNeqZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ I â‰  O </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_leftUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : U] I â‹… x â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_rightUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : U] x â‹… I â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">ring</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Ring/ring_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">multiplicative_monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring âŸ¶ monoid </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] [&#39;</span>
<span class=" -MMT_ObjectExpression">			universe := r.universe,</span>
<span class=" -MMT_ObjectExpression">			op := r.rtimes,</span>
<span class=" -MMT_ObjectExpression">			axiom_associative := r.multiplication/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">			unit := r.rone,</span>
<span class=" -MMT_ObjectExpression">			axiom_leftUnital := r.axiom_leftUnital,</span>
<span class=" -MMT_ObjectExpression">			axiom_rightUnital := r.axiom_rightUnital</span>
<span class=" -MMT_ObjectExpression">		&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">		</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">field_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring/ring_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unitset âŸ¶ unitset </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â»Â¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [x : unitset] x â‹… (x â»Â¹) â‰ I </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : U]âˆ€[y] (x â‹… y) â‰ (y â‹… x) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Field/field_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="cm">// multiplicative_group : field âŸ¶ abeliangroup â˜ = [r] [&#39;</span>
<span class="cm">			universe := r.unitset,</span>
<span class="cm">			op := r.times,</span>
<span class="cm">			isassociative := r.timesisassociative,</span>
<span class="cm">			unit := r.timesunit,</span>
<span class="cm">			leftunital := r.timesleftunital,</span>
<span class="cm">			rightunital := r.timesrightunital,</span>
<span class="cm">			inverse := r.timesinverse ,</span>
<span class="cm">			inverseproperty := r.timesinverseproperty ,</span>
<span class="cm">			abelianax := r.timesabelianax</span>
<span class="cm">		&#39;] â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ComplexNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">complexNumbers</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„‚</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T every real number is also a complex one: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realsAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ &lt;* â„‚ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rationalsAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š &lt;* â„‚ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_integersAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ &lt;* â„‚ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_naturalsAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• &lt;* â„‚ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_posAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„•+ &lt;* â„‚ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// this constructor returns a complex number z with arguments Re(z), Im(z). â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">complexNumberConstructor</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ â„‚ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+i</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">imaginaryUnit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">0 +i 1 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">i</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Re returns real part of complex number. â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">realPart</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Re</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Im returns real part of complex number. â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">imaginaryPart</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Im</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Axioms for basic complex functions: â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_complexNumberConstructor_Re</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[a] âˆ€[b] Re (a +i b) â‰ a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_complexNumberConstructor_Im</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[a] âˆ€[b] Im (a +i b) â‰ b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realPartOfReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„} âŠ¦ x +i 0 â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ComplexArithmetic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ComplexNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T ComplexConjugate maps a + b i -&gt; a - b i â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">complexConjugate</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„‚ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z] (Re z) +i (- Im z) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">cConj</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Additive Inverse â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">uminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„‚ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] (- Re x) +i (- Im x) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Addition of two complex numbers â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„‚ âŸ¶ â„‚ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z1,z2] (arithmetics?RealArithmetics?addition (Re z1) (Re z2)) +i (arithmetics?RealArithmetics?addition (Im z1) (Im z2)) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="cm">/T Difference of two complex numbers using additive inverse and addition â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">subtraction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„‚ âŸ¶ â„‚ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z1,z2] z1 + (- z2) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication of two complex numbers with each other. â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplication</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„‚ âŸ¶ â„‚ </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">													</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z1,z2] (â˜?RealArithmetics?addition ((Re z1) â‹… (Re z2)) ( â˜?RealArithmetics?uminus (Im z1) â‹… (Im z2)))</span>
<span class=" -MMT_ObjectExpression">																			 +i (â˜?RealArithmetics?addition ((Re z2) â‹… (Im z1)) ( (Re z1) â‹… (Im z2))) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">													</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Magnitude of  a + b i maps to sqrt(a*a+b*b)... â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">complexAbsoluteSquared</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z] Re (z â‹… cConj z) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|^</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">absolute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z] sqrt (|z|^) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="si">1</span><span class="ss">|</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w">												</span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">nonzeroComplexNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„‚*</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ z : â„‚ | âŠ¦ Re z â‰  0 âˆ¨ Im z â‰  0 âŸ©</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚* âŸ¶ â„‚</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inv</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">31</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">division</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„‚ âŸ¶ â„‚* âŸ¶ â„‚ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[u,z] u â‹… (inv z) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntegerNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NaturalNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?IntLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_natsAreInt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit &lt;* int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_natsAreInt2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT &lt;* int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_posAreInt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">negative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">minus_int_lit</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_negZeroIsZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ negative 0 â‰ 0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_negPosIsNotId</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•+} âŠ¦ neq int_lit (negative n) n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_negPosIsInj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n,m: â„•} âŠ¦ negative n â‰ negative m âŸ¶ âŠ¦ n â‰ m </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntegerArithmetics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NaturalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntegerNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Negation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">uminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">34</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">minus_int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_uminusIsNeg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: â„•} âŠ¦ -n â‰ negative n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_uminusIsNilp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{z:â„¤} âŠ¦ - (- z) â‰ z </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Addition â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus_int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intPlusIsNatplus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„•, y : â„•} âŠ¦ arithmetics?IntegerArithmetics?addition x y â‰ arithmetics?NaturalArithmetics?addition x y </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">axiom_additionCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤, y : â„¤} âŠ¦ x + y â‰ y + x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_additionCommutative</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_plusUminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤} âŠ¦ x + (-x) â‰ 0 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_plusUminus</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtraction â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] a + (-b) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication â™</span><span class="w">	</span>
<span class="w">	</span><span class="vc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times_int_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intTimesIsNattimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„•, y : â„•} âŠ¦ arithmetics?IntegerArithmetics?multiplication x y â‰ arithmetics?NaturalArithmetics?multiplication x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Division â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤, y : â„¤, p : âŠ¦ âˆƒ! [z] y â‹… z â‰ x} â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p] Î¹ [z] y â‹… z â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Exponentiation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">exponentiation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">34</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intExpIsNatexp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„•, y : â„•} âŠ¦ arithmetics?IntegerArithmetics?exponentiation x y â‰ arithmetics?NaturalArithmetics?exponentiation x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Roots â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">root</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„¤, m : â„•, p : âŠ¦ âˆƒ![x] x^m â‰ n}â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] Î¹ [x] x^m â‰ n  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆš</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">34</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// squareRoot : {n : â„¤, p : âŠ¦ âˆƒ![m] m^2 â‰ n}â„¤ â˜ = [n,p] 2 âˆš n â˜ # âˆš 1 %I2 prec 34 â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// squareRoot is technically only defined on naturals anyway â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Order â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] âˆƒ [n: â„•] eq â„¤ (arithmetics?IntegerArithmetics?addition x n) y </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">104</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">geq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] m â‰¤ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">104</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lessthan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n â‰¤ m âˆ§ n â‰  m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">104</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">morethan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n â‰¥ m âˆ§ n â‰  m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">104</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">max</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">max</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">min</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">min</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intLeqIsNatLeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„•, y : â„•} âŠ¦ arithmetics?NaturalArithmetics?leq x y â‰ arithmetics?IntegerArithmetics?leq x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Others â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">mod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„¤ âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">mod</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">up</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{z : â„¤, p : âŠ¦ z â‰¥ 0}â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„¤toâ„•</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_up</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•,p : âŠ¦ n â‰¥ 0} âŠ¦ â„¤toâ„• n â‰ n </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// natissub : â„• â‰â‰ âŸ¨ â„¤ | ([z] âŠ¦ Â¬ z &lt; 0) âŸ© â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">posisneqzero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„•+ &lt;* âŸ¨ x: â„¤ | âŠ¦ x â‰  0 âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">absolute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„• </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// â˜ = [z] case z &lt;0 âŸ¹ up (-z) . up z â˜ # | 1 | prec 10 â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO: axioms for the other ones as well.â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Group Axioms â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: â„¤,y,z} âŠ¦ arithmetics?IntegerArithmetics?addition x (arithmetics?IntegerArithmetics?addition y z) â‰ </span>
<span class=" -MMT_ObjectExpression">		arithmetics?IntegerArithmetics?addition (arithmetics?IntegerArithmetics?addition x y) z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_plus_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: â„¤,y,z} âŠ¦ x â‹… (y â‹… z) â‰ (x â‹… y) â‹… z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_times_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤} âŠ¦ arithmetics?IntegerArithmetics?addition 0 x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_plus_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤} âŠ¦ arithmetics?IntegerArithmetics?addition x 0 â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_plus_int</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤} âŠ¦ 1 â‹… x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_times_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤} âŠ¦ x â‹… 1 â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_times_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤, y : â„¤, z : â„¤} âŠ¦ arithmetics?IntegerArithmetics?multiplication x (arithmetics?IntegerArithmetics?addition y z) â‰ </span>
<span class=" -MMT_ObjectExpression">		arithmetics?IntegerArithmetics?addition (arithmetics?IntegerArithmetics?multiplication x y) (arithmetics?IntegerArithmetics?multiplication x z) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">distributive_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NatLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Succ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] succ_nat_lit n </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">axiom_succ1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ 0 â‰  Succ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_succ2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:â„•,y:â„•} âŠ¦ Succ x â‰ Succ y âŸ¶ âŠ¦ x â‰ y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_Induction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : â„• âŸ¶ bool} âŠ¦ A 0 âŸ¶ ({x}âŠ¦ A x âŸ¶ âŠ¦ A (Succ x)) âŸ¶ {x} âŠ¦ A x </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalArithmetics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NaturalNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Addition â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus_nat_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_plus1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ x + 0 â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_plus</span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_plus2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ x + Succ y â‰ Succ (x + y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtraction â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•, m : â„•, p : âŠ¦ âˆƒ! [x : â„•] m + x â‰ n}â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] Î¹ [x: â„•] m + x â‰ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO proof arguments are in the way â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// theorem_sub1: âŠ¦ âˆ€[n] n - zero â‰ n â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// theorem_sub2: âŠ¦ âˆ€[n] âˆ€[m] m â‰¤ n â‡’ (S n) - (S m) â‰ n - m â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times_nat_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_times1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„•} âŠ¦ x â‹… 1 â‰ x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_times2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ x â‹… Succ y â‰ x + x â‹… y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_times3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: â„•} âŠ¦ x â‹… 0 â‰ 0 âˆ§ 0 â‹… x â‰ 0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Division â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">divides</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] âˆƒ! [r : â„•] n â‹… r â‰ m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•, m : â„•, p : âŠ¦ âˆƒ! [r : â„•] n â‹… r â‰ m} â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] Î¹ ([r : â„•] n â‹… r â‰ m) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// theorem_div1: âŠ¦ âˆ€[n] Â¬ (n â‰ 0) â‡’ zero / n â‰ zero â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// theorem_div2: âŠ¦ âˆ€[n] âˆ€[m] Â¬(m â‰ zero) âˆ§ (m | n) â‡’ n / m â‰ S ((n - m) / m) â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Exponentiation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">exponentiation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_exp1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} âŠ¦ x ^ 0 â‰ 1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_exp2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} âŠ¦ x ^ Succ y â‰ x â‹… x ^ y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Roots â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">root</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•, m : â„•, p : âŠ¦ âˆƒ![x] x^m â‰ n}â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] Î¹ [x] x^m â‰ n  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆš</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">squareRoot</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•, p : âŠ¦ âˆƒ![m] m^2 â‰ n}â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,p] 2 âˆš n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆš</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Order â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] âˆƒ! [x] n + x â‰ m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">geq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] m â‰¤ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lessthan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n â‰¤ m âˆ§ n â‰  m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">morethan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n â‰¥ m âˆ§ n â‰  m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Others â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">max</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">max</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">min</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">min</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">mod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">mod</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// axiom_mod1: âŠ¦ âˆ€[n] âˆ€[m] n &lt; m â‡’ (n mod m) â‰ n â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// axiom_mod2: âŠ¦ âˆ€[n] âˆ€[m] (m â‰¤ n) â‡’ ((n mod m) â‰ ((n - m) mod m)) â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">primes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ x : â„•+ | âŠ¦ x â‰  1 âˆ§ âˆ€ [y : â„•] (y | x) â‡’ (y â‰ 1 âˆ¨ y â‰ x) âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">fromOneTo</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„•+ âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] âŸ¨ x: â„•+ | âŠ¦ 1 â‰¤ x âˆ§ x â‰¤ n âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Monoid Axioms â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: â„•,y,z} âŠ¦ x + (y + z) â‰ (x + y) + z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_plus_nat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„•} âŠ¦ 0 + x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_plus_nat</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_rightUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„•} âŠ¦ x + 0 â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">axiom_plus1 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_plus_nat</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RationalNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntegerNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">rationalNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„š</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intsAreRats</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit &lt;* â„š </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_natsAreRats</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit &lt;* â„š </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_natsAreRats2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT &lt;* â„š </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_posAreRats</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* â„š </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">fraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ âŸ¶ â„•+ âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">/</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO: this is the constructor â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">RationalArithmetics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntegerArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RationalNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Negation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">uminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratUminusIsIntUminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤} âŠ¦ arithmetics?RationalArithmetics?uminus x â‰ arithmetics?IntegerArithmetics?uminus x </span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">	</span><span class="cm">/T Addition â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratPlusIsIntPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤, y : â„¤} âŠ¦ arithmetics?RationalArithmetics?addition x y â‰ arithmetics?IntegerArithmetics?addition x y </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">axiom_plusUminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š} âŠ¦ x + (-x) â‰ 0 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtraction â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] a + (-b) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratTimesIsNatTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤, y : â„¤} âŠ¦ arithmetics?RationalArithmetics?multiplication x y â‰ arithmetics?IntegerArithmetics?multiplication x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Division â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">non_zero_rationals</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ x : â„š | âŠ¦ x â‰  0 âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„š*</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:â„š, p:âŠ¦ x â‰  0} â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inv</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverseTyped</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š* âŸ¶ â„š* </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : â„š, p: âŠ¦ r â‰  0} âŠ¦ r â‹… (inv r) â‰ 1 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">//  role Simplify </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Axiom_inv_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inv2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : â„š* } âŠ¦ r â‹… (inverseTyped r) â‰ 1 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_inv</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r:â„š,s:â„š, p:âŠ¦ s â‰  0} â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,s,p] r â‹… (inv s) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Exponentiation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">exponentiation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratExpIsNatExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤, y : â„¤} âŠ¦ arithmetics?RationalArithmetics?exponentiation x y â‰ arithmetics?IntegerArithmetics?exponentiation x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Roots â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">root</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„š, m : â„•, p : âŠ¦ âˆƒ![x] x^m â‰ n}â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] Î¹ [x] x^m â‰ n  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆš</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">squareRoot</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„š, p : âŠ¦ âˆƒ![m] m^2 â‰ n}â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,p] 2 âˆš n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆš</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Orders â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">103</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">geq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] m â‰¤ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">103</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lessthan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n â‰¤ m âˆ§ n â‰  m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">103</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">morethan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n â‰¥ m âˆ§ n â‰  m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">103</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">max</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">max</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">min</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">min</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratLeqIsIntLeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„¤, y : â„¤} âŠ¦ arithmetics?RationalArithmetics?leq x y â‰ arithmetics?IntegerArithmetics?leq x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Others â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">absolute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š âŸ¶ â„š </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[q] case q &lt; 0 âŸ¹ -q . q </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Field axioms â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: â„š,y,z} âŠ¦ x + (y + z) â‰ (x + y) + z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_plus_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: â„š,y,z} âŠ¦ x â‹… (y â‹… z) â‰ (x â‹… y) â‹… z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_times_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š} âŠ¦ arithmetics?RationalArithmetics?addition 0 x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_plus_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š} âŠ¦ arithmetics?RationalArithmetics?addition x 0 â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_plus_rat</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š} âŠ¦ 1 â‹… x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_times_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š} âŠ¦ x â‹… 1 â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_times_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š, y : â„š, z : â„š} âŠ¦ x â‹… (y + z) â‰ (x â‹… y) + (x â‹… z) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">distributive_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_commutativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š,y} âŠ¦ x + y â‰ y + x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">addition_commutative_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_commutativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š,y} âŠ¦ x â‹… y â‰ y â‹… x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">times_commutative_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?RealLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RationalNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">RealNumbers</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratsAreReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„š &lt;* â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intsAreReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„¤ &lt;* â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_natsAreReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• &lt;* â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_posAreReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„•+ &lt;* â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">NAT_is_real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT &lt;* â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealArithmetics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealNumbers </span><span class=" -MMT_DD">â™</span><span class="w">                                  </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RationalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Negation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">uminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">minus_real_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realMinusIsRatMinus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š} âŠ¦ arithmetics?RealArithmetics?uminus x â‰ arithmetics?RationalArithmetics?uminus x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Addition â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus_real_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realPlusIsRatPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š, y : â„š} âŠ¦ arithmetics?RealArithmetics?addition x y â‰ arithmetics?RationalArithmetics?addition x y </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">axiom_plusUminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„} âŠ¦ (x + (-x)) â‰ 0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtraction â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] a + (-b) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times_real_lit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realTimesIsRatTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š, y : â„š} âŠ¦ arithmetics?RealArithmetics?multiplication x y â‰ arithmetics?RationalArithmetics?multiplication x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Division â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">no_zero_reals</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ x : â„ | âŠ¦ x â‰  0 âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„*</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:â„, p:âŠ¦ x â‰  0} â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inv</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverseTyped</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„* âŸ¶ â„* </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inverseTyped</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„, p : âŠ¦ x â‰  0} âŠ¦ x â‹… (inv x) â‰ 1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inv2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : â„* } âŠ¦ r â‹… (inverseTyped r) â‰ 1 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_inv</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r:â„,s:â„, p:âŠ¦ s â‰  0} â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,s,p] r â‹… (inv s) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Exponentiation â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">exponentiation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realExpIsRatExp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š, y : â„š} âŠ¦ arithmetics?RealArithmetics?exponentiation x y â‰ arithmetics?RationalArithmetics?exponentiation x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Roots â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">root</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„, m : â„•, p : âŠ¦ âˆƒ![x] x^m â‰ n}â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] Î¹ [x] x^m â‰ n  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆš</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">squareRoot</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„, p : âŠ¦ âˆƒ![m] m^2 â‰ n}â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,p] 2 âˆš n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆš</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Order â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">geq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] m â‰¤ n </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lessthan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n â‰¤ m âˆ§ n â‰  m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">morethan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n â‰¥ m âˆ§ n â‰  m </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">max</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">max</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">min</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">min</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realLeqIsRatLeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„š, y : â„š} âŠ¦ arithmetics?RealArithmetics?leq x y â‰ arithmetics?RationalArithmetics?leq x y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtypes â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">NonNegativeRealNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„^+</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ x : â„ | âŠ¦ x â‰¥ 0 âŸ©</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">PositiveRealNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„+</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ x : â„ | âŠ¦ x &gt; 0 âŸ©</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Suprema â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// to allow for later usage of subspaces by way of a boolean function that tells whether it is part of the domain or not â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">predAsSub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(â„ âŸ¶ bool) âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P] âŸ¨ z : â„ | âŠ¦ P z âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pred</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">sup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(â„ âŸ¶ bool) âŸ¶ â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_sup1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool, y : pred P} âŠ¦ y â‰¤ sup P </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_sup2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool, y : â„, p : {z: pred P}âŠ¦z â‰¤ y} âŠ¦ sup P â‰¤ y </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Others â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">absolute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„^+ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [q] case q &lt; 0 âŸ¹ -q . q </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Field Axioms â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: â„,y,z} âŠ¦ x + (y + z) â‰ (x + y) + z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_plus_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: â„,y,z} âŠ¦ x â‹… (y â‹… z) â‰ (x â‹… y) â‹… z </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_times_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„} âŠ¦ 0 + x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_plus_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„} âŠ¦ x + 0 â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_plus_real</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„} âŠ¦ 1 â‹… x â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_times_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„} âŠ¦ x â‹… 1 â‰ x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_times_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„, y, z} âŠ¦ x â‹… (y + z) â‰ (x â‹… y) + (x â‹… z) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">distributive_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_commutativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„,y} âŠ¦ x + y â‰ y + x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">addition_commutative_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_commutativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : â„,y} âŠ¦ x â‹… y â‰ y â‹… x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">times_commutative_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExtendedReals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// extended_reals : type â˜ # â„âˆ â™</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// reals_are_extended : â„ &lt;* â„âˆ â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">infty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// leq : â„âˆ âŸ¶ â„âˆ âŸ¶ bool â˜ # 1 â‰¤ 2 prec 101 â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO neginfty : â„âˆ â˜ = - âˆ â˜ # -âˆ â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w">  </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FinSequences</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?NaturalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">below</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] âŸ¨ x : â„• | âŠ¦ x &lt; n âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">toBelow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•} below (Succ n) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">toB</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">succBelow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•} below n âŸ¶ below (Succ n) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">succB</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">belowIsSubtypeOfNat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•} (below n) &lt;* â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class="w">	</span><span class="vc">belowToNat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•} below (Succ n) âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">btn</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">belowToNatBaseCase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : â„•} âŠ¦ belowToNat m (toBelow m) â‰ m</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">belowToNatRecCase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : â„•, b : below (Succ m)} âŠ¦ belowToNat (Succ m) (succBelow (Succ m) b) â‰ belowToNat m b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">    </span><span class="vc">belowToNatExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ btn 3 (toB 3) â‰ 3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">belowToNatExample2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ btn 4 (succB (toB 3)) â‰ 3 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">belwoToNatExample2_2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ belowToNat (Succ 3) (succBelow (Succ 3) (toBelow 3)) â‰ 3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="cm">//	belowToNat2 : {n : â„•} below (Succ  n) âŸ¶ â„• â˜= [n, b] n â˜# btn2 %I1 â™</span><span class="w"></span>
<span class="cm">//	belowToNat3 : {n : â„•, m : â„•} below n âŸ¶ âŠ¦ m &lt; n âŸ¶ â„• â˜= [n , m , b, p ] m â˜#  btn3 %I1 â™</span><span class="w"></span>
<span class="cm">//	belowToNat4 : {n : â„•} below n âŸ¶ âŸ¨ â„• | [x] âŠ¦ x &lt; nâŸ© â˜# btn4 %I1â™</span><span class="w"></span>


<span class="w">	</span><span class="vc">finSeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n , A] below n âŸ¶ A  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">nonEmptyFinSeq_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•, A : type} finSeq n A âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n, A , f] 0 &lt; n </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">nefs</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">disjointFinSeq_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„•, A : type} finSeq n A âŸ¶ bool</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">disjointFinSeq_prop_trivial</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A : type,f : finSeq 0 A} âŠ¦ disjointFinSeq_prop 0 A f â‰ true</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">disjointFinSeq_prop_step</span><span class="w"> </span><span class="nc">//</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">{A : type , n : â„• , f : </span>
<span class="nv">			finSeq (succ n) A} âŠ¦ disjointFinSeq_prop (succ n) A f â‰ âˆ€ [m1 : below (succ n)] âˆ€ [m2 : below (succ n)] âŠ¦ m1 â‰  m2 âŸ¶ âŠ¦ true </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">belowShift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : â„• , m : â„•} below n âŸ¶ below (n + m)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="cm">//	belowShift_base : {n, b} âŠ¦ belowShift n 0 b â‰ bâ™</span><span class="w"> </span>
<span class="w">	</span>
<span class="cm">//	finSeqSum : {n : â„• , b : below n} â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleDerivatives</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealMetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NaturalDeduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FunctionLimit </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">axiom_neqImplNotZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a : â„, b : â„} âŠ¦ neq â„ a b âŸ¶ âŠ¦ neq â„ (b - a) 0 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">idnz</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">differenceQuotient</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool, f: pred P âŸ¶ â„, a: pred P}{x : pred P, p:âŠ¦ neq â„ a x}â„ </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,f,a : pred P] ([x : pred P,p] â˜arith:?RealArithmetics?div ((f x) - (f a)) (x - a) (idnz p)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">prop_differentiableAt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool}(pred P âŸ¶ â„) âŸ¶ pred P âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,f,a] prop_hasLimit_c (mpred P) â„m ([x: pred P] neq â„ a x) ([x,p] differenceQuotient P f a x p) a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   	</span>
<span class="w">   </span><span class="vc">prop_differentiable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool}(pred P âŸ¶ â„) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">diff</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,f] âˆ€ [x : pred P] prop_differentiableAt P f x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span>
<span class="w">   </span><span class="cm">/T derivative: P as predicate of where derivative is defined, f as a function on P of value â„, p as the proof that f is differentiable on Pâ™</span><span class="w">		</span>
<span class="w">   </span><span class="vc">derivative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool,f : pred P âŸ¶ â„, p : âŠ¦ diff f} pred P âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,f,p][a] limit_c (mpred P) â„m ([x: pred P] neq â„ a x) ([x,q] differenceQuotient P f a x q) a (forall_elim (pred P) ([x : pred P] prop_differentiableAt P f x) p a) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="cm">// defined as the limit of the diff_quotient on p, giving a proof that it is differentiable on P â™</span><span class="w"></span>
<span class="w">   	</span>
<span class="w">   	</span><span class="vc">f</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pred ([x] true) âŸ¶ â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   	</span>

<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">top</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">meta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">//   author: Theresa Pollinger âš</span><span class="w"></span>
<span class="w"> </span>
<span class="w"> </span>
<span class="cm">//   a lot of stuff here stolen from dgls.mmt xx: </span>
<span class="cm">//   To not make things too awful, I&#39;ve now fixed one â‹ for a vectorspace; just for notational reasons. âš</span><span class="w"></span>

<span class="cm">//   as &quot;domains&quot; is overloaded between disciplines: in numerical modeling, we are talking about finite, (singly) connected subspaces of â„^n as domains âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Intervals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜top:/arithmetics?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜top:/algebra?RealField </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealMetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">interval_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">leftPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">rightPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">predicate</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] leftPred left x âˆ§ rightPred x right </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">tp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pred predicate </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">interval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Intervals/interval_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">closedInterval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ interval </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] [&#39;</span>
<span class=" -MMT_ObjectExpression">		left := a,</span>
<span class=" -MMT_ObjectExpression">		right := b,</span>
<span class=" -MMT_ObjectExpression">		leftPred := ([x,y] x â‰¤ y),</span>
<span class=" -MMT_ObjectExpression">		rightPred := ([x,y] x â‰¤ y)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OneCuboid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜top:/arithmetics?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">oneCuboid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">leftPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">rightPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">predicate</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] leftPred left x âˆ§ rightPred x right </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">tp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pred predicate </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">interval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Intervals/interval_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">closed1Cuboid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ interval </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] [&#39;</span>
<span class=" -MMT_ObjectExpression">		left := a,</span>
<span class=" -MMT_ObjectExpression">		right := b,</span>
<span class=" -MMT_ObjectExpression">		leftPred := ([x,y] x â‰¤ y),</span>
<span class=" -MMT_ObjectExpression">		rightPred := ([x,y] x â‰¤ y)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneralDomains</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜top:/arithmetics?NaturalNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜top:/algebra?RealField </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ball </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜top:/algebra?Vectorspace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">generalDomain_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜top:/algebra?Vectorspace/vectorspace_theory (realField) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace/metricSpace_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">dimension</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">domainPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">domain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ x : U | âŠ¦ domainPred x âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">boundaryPred1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] âˆ€ [Îµ : â„+] âˆƒ[x : domain] d x b &lt; Îµ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">boundaryPred2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] âˆ€ [Îµ : â„+] âˆƒ[x : U] d x b &lt; Îµ âˆ§ Â¬ domainPred x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">boundaryPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] boundaryPred1 b âˆ§ boundaryPred2 b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">boundary</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸ¨ x : U | âŠ¦ boundaryPred x âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  	 </span>
<span class="w">  </span><span class="vc">generalDomain</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?GeneralDomains/generalDomain_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">  </span>

<span class="cm">// view IntervalsAsDomains : ?GeneralDomains/generalDomain_theory âŸ¶ ?Intervals/interval_theory =</span>
<span class="cm">    = â„ â™ </span>
<span class="cm">   // Dimension = 1 â™</span>
<span class="cm">   DomainPred = interval_pred â™</span>
<span class="cm">   BoundaryPred = boundary_pred â™</span>
<span class="cm">   // vec_pred_as_sub = pred_as_sub â™</span>
<span class="cm">âš</span><span class="w"> </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ms</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/measures</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LebesgueIntegral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ms:?Measure </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?Functions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?SetCollection </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?SetSum </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?SupremumReal </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ms:?LebesgueMeasurable </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// include arith:?RealArithmetics â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">simpleLebesgueIntegral</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{m : measureSpace , s : nonnegativeSimpleFunction  m }  â„ </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">â˜</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m , s] setSum  ((im (Ï€l s) (fullset (m.universe))) : set â„) </span>
<span class=" -MMT_ObjectExpression">  (theorem_nonnegativeSimpleFunctionHasFiniteValues m s) (([x] x â‹… (m.rmeasure.measure) (elem (m.sigma_algebra.coll) (preim (Ï€l s) (single x)))) : â„ âŸ¶ â„) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">upperFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a : type} (a âŸ¶ â„) âŸ¶ a âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[a , f , x ] max (f x) 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lowerFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a : type} (a âŸ¶ â„) âŸ¶ a âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[a : type, f : a âŸ¶ â„, x : a] max (- f x) 0  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lemma_upperFunctionIsNonNegative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , f : A âŸ¶ â„} âŠ¦ prop_nonnegative_function (upperFunction A f) </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">upperFunctionIsNonNegative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lemma_lowerFunctionInNonNegative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , f : A âŸ¶ â„} âŠ¦ prop_nonnegative_function (lowerFunction A f)  </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">lowerFunctionInNonNegative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w"> </span>
<span class="w">	</span><span class="vc">positiveLebesgueIntegral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace, f : (m.universe âŸ¶ â„)} âŠ¦ lebesgueMeasurableLeq (m.sigma_algebra) f âŸ¶</span>
<span class=" -MMT_ObjectExpression">	âŠ¦ prop_nonnegative_function f  âŸ¶ â„ </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m , f, p1,p2] supR ( im (simpleLebesgueIntegral m) ( âŸª fullset (nonnegativeSimpleFunction m) | ([ff] (âˆ€[x] ((Ï€l ff) x) â‰¤ (f x))) âŸ« )) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">lemma_lebesgueMeasurableFunctionUpperLebesgueMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_ObjectExpression">{A : type , s : sigmaAlgebra A, f : A âŸ¶ â„} âŠ¦ lebesgueMeasurableLeq s f âŸ¶ âŠ¦ lebesgueMeasurableLeq s (upperFunction A f)  </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableFunctionUpperLebesgueMeasurable</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">lemma_lebesgueMeasurableFunctionLowerLebesgueMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_ObjectExpression">{A : type , s : sigmaAlgebra A, f : A âŸ¶ â„} âŠ¦ lebesgueMeasurableLeq s f âŸ¶ âŠ¦ lebesgueMeasurableLeq s (lowerFunction A f)  </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableFunctionLowerLebesgueMeasurable</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">lebesgueIntegrable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ms : measureSpace, f : (ms.universe âŸ¶ â„)} âŠ¦ lebesgueMeasurableLeq (ms.sigma_algebra) f âŸ¶ bool</span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ms, f , p] positiveLebesgueIntegral ms (upperFunction (ms.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionUpperLebesgueMeasurable (ms.sigma_algebra) f p) </span>
<span class=" -MMT_ObjectExpression">	(upperFunctionIsNonNegative f)</span>
<span class=" -MMT_ObjectExpression">	&lt; âˆ âˆ§ positiveLebesgueIntegral ms (lowerFunction (ms.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionLowerLebesgueMeasurable (ms.sigma_algebra) f p) </span>
<span class=" -MMT_ObjectExpression">	(lowerFunctionInNonNegative f)</span>
<span class=" -MMT_ObjectExpression">	&lt; âˆ </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">quasiIntegrable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ms : measureSpace , f : (ms.universe âŸ¶ â„)} âŠ¦ lebesgueMeasurableLeq (ms.sigma_algebra) f âŸ¶ bool </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ms, f , p] positiveLebesgueIntegral ms (upperFunction (ms.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionUpperLebesgueMeasurable (ms.sigma_algebra) f p) </span>
<span class=" -MMT_ObjectExpression">	(upperFunctionIsNonNegative f)</span>
<span class=" -MMT_ObjectExpression">	&lt; âˆ âˆ¨ positiveLebesgueIntegral ms (lowerFunction (ms.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionLowerLebesgueMeasurable (ms.sigma_algebra) f p) </span>
<span class=" -MMT_ObjectExpression">	(lowerFunctionInNonNegative f)</span>
<span class=" -MMT_ObjectExpression">	&lt; âˆ </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">lebesgueIntegral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace ,f : ((m.universe âŸ¶ â„)) , </span>
<span class=" -MMT_ObjectExpression">	p1 : âŠ¦ lebesgueMeasurableLeq (m.sigma_algebra) f}  âŠ¦  quasiIntegrable m f p1 âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w">  </span>
<span class="w">	 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,f, p1 , p2] </span>
<span class=" -MMT_ObjectExpression">	(positiveLebesgueIntegral m (upperFunction (m.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionUpperLebesgueMeasurable (m.sigma_algebra) f p1) </span>
<span class=" -MMT_ObjectExpression">	(upperFunctionIsNonNegative f) : â„) + </span>
<span class=" -MMT_ObjectExpression">	(- (positiveLebesgueIntegral m (lowerFunction (m.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionLowerLebesgueMeasurable (m.sigma_algebra) f p1) </span>
<span class=" -MMT_ObjectExpression">	(lowerFunctionInNonNegative f) : â„))</span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ms</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/measures</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ms:?Measure </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?Functions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ms:?PowerSigmaAlgebra </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ms:?BorelMeasurable </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="cm">//	include top:?RealTopology â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_nonnegative_function</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A âŸ¶ â„) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A , f] âˆ€ [x : A] (0 : â„) â‰¤ ((f x) : â„) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">prop_nonnegative_function</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">prop_simpleFunction</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measurableSpace } (m.universe âŸ¶ â„) âŸ¶ bool </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m , f] (im f (fullset (m.universe))) finite âˆ§ </span>
<span class=" -MMT_ObjectExpression">	(âˆ€ [x]  x âˆˆ im f (fullset m.universe) â‡’ preim f (single x)  âˆˆ (m.sigma_algebra.coll)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">simpleFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">measurableSpace âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] Î£ f : (m.universe âŸ¶ â„) . âŠ¦ prop_simpleFunction m f   </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">nonnegativeSimpleFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">measurableSpace âŸ¶ type  </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] Î£ f: (m.universe âŸ¶ â„) . âŠ¦ prop_simpleFunction m f  âˆ§ prop_nonnegative_function f </span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class="w">	</span><span class="vc">simpleFunctionIsMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m1 : measurableSpace  , f : simpleFunction m1} âŠ¦ measurable (m1.sigma_algebra) (powerSigmaAlgebra â„) (Ï€l f) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">simpleFunctionIsBorelMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ m : measurableSpace , s : simpleFunction m} </span>
<span class=" -MMT_ObjectExpression">	âŠ¦  realBorelMeasurable (m.universe) (m.sigma_algebra) (Ï€l s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">theorem_simpleFunctionHasFiniteValues</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measurableSpace, S : simpleFunction m} âŠ¦ (im (Ï€l S) (fullset (m.universe))) finite </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">simpleFunctionHasFiniteValues</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">theorem_nonnegativeSimpleFunctionHasFiniteValues</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measurableSpace, S : nonnegativeSimpleFunction m} âŠ¦ (im (Ï€l S) (fullset (m.universe))) finite </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">nonnegativeSimpleFunctionHasFiniteValues</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w">                                                                                 </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">algebra</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">topo</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetricSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?SetStructures </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">signature_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">d</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">signature</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?MetricSpace/signature_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">prop_nonNegative</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type, d : G âŸ¶ G âŸ¶ â„} prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,d] âˆ€[x]âˆ€[y] 0 â‰¤ d x y </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">prop_identityOfIndiscernibles</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type, d : G âŸ¶ G âŸ¶ â„} prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,d] âˆ€[x]âˆ€[y] d x y â‰ 0 â‡’ x â‰ y  </span><span class=" -MMT_DD">â™</span><span class="w">   </span>
<span class="w">	</span><span class="vc">prop_positiveDefinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type, d : G âŸ¶ G âŸ¶ â„^+ }prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,d] prop_nonNegative G d âˆ§ prop_identityOfIndiscernibles G d </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_symmetric</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type, d : G âŸ¶ G âŸ¶ â„} prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][d] âˆ€[x]âˆ€[y]  d x y  â‰ d y x  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">prop_pseudoMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type, d : G âŸ¶ G âŸ¶ â„^+} prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,d] prop_positiveDefinite G d âˆ§ prop_symmetric G d </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">pseudoMetricSpace_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">d</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ â„^+ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_isPseudoMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_pseudoMetric U d </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">pseudoMetricSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?MetricSpace/pseudoMetricSpace_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_triangleInequality</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type, d : G âŸ¶ G âŸ¶ â„} prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][d] âˆ€[x]âˆ€[y]âˆ€[z] (d x z)  â‰¤ ((d y x) + (d y z))  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">metricSpace_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace/pseudoMetricSpace_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_triangleInequality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_triangleInequality U d </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">metricSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?MetricSpace/metricSpace_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// metricSpace : type âŸ¶ type  â˜ # metricSpace 1 â™</span><span class="w"> </span><span class="cm">// = [A] âŸ¨metricspace | ([G] âŠ¦ A â‰â‰ G.universe)âŸ©â˜</span>
<span class="cm">  </span>
<span class="cm">	distanceFunction : type âŸ¶ type â˜ = âŸ¨A âŸ¶ A âŸ¶ â„ | ([x] âŠ¦ âˆƒ[G: metricSpace] x â‰ G.d)âŸ© â˜ # distanceFunction 1 â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">metric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} (G.universe âŸ¶ G.universe âŸ¶ â„) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">d</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][a][b] (G.d) a b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetricMonoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?Monoid</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">metricMonoid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?Monoid/monoid_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace/metricSpace_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">metricMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?MetricMonoid/metricMonoid_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ball</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?AllSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">openBall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M: metricSpace} M.universe âŸ¶ â„ âŸ¶ set (M.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M][a][Îµ] âŸª (doms M) | ([x] (d x a) &lt; Îµ) âŸ« </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">B_</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">closedBall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M: metricSpace} M.universe âŸ¶ â„ âŸ¶ set (M.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M][a][Îµ] âŸª (doms M) | ([x] (d x a) â‰¤ Îµ) âŸ« </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// MiKo: how to do \overline{B} in the notation? â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetricSpaceAsTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ball </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜topo:?HausdorffTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// Why only Hausdorff? Don&#39;t we obtain even stronger conditions (normal?)? â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// A: as soon as we formalized those, sure :) â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">openColl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} set (set (dom M)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ballIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace, a : M.universe, Îµ : â„} âŠ¦ (openBall M a Îµ) âˆˆ (openColl M) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_emptyIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} âŠ¦ prop_emptyInColl (openColl M) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">emptyisopen</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_fullIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} âŠ¦ prop_fullInColl (openColl M) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">fullisopen</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_unionIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} âŠ¦ prop_unionInColl (openColl M) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unionisopen</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intersectionIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} âŠ¦ prop_finiteIntersection (openColl M) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">intersectionisopen</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_metricIsHausdorff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} âŠ¦ hausdorffProperty (dom M) (openColl M) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">miHaus</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">metricAsTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace}hausdorffTopology (dom M) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M] [&#39; </span>
<span class=" -MMT_ObjectExpression">			universe := M.universe, </span>
<span class=" -MMT_ObjectExpression">			d := M.d,</span>
<span class=" -MMT_ObjectExpression">			axiom_isPseudoMetric := M.axiom_isPseudoMetric,</span>
<span class=" -MMT_ObjectExpression">			axiom_triangleInequality := M.axiom_triangleInequality,</span>
<span class=" -MMT_ObjectExpression">			coll := openColl M,</span>
<span class=" -MMT_ObjectExpression">			axiom_empty := axiom_emptyIsOpen M,</span>
<span class=" -MMT_ObjectExpression">			axiom_full := axiom_fullIsOpen M,</span>
<span class=" -MMT_ObjectExpression">			â˜?OML?axiom_union := axiom_unionIsOpen M,</span>
<span class=" -MMT_ObjectExpression">			axiom_intersection := axiom_intersectionIsOpen M,</span>
<span class=" -MMT_ObjectExpression">			ishausdorff := miHaus M</span>
<span class=" -MMT_ObjectExpression">		&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">RealMetricSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">realmetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ â„ âŸ¶ â„^+ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] | a - b | </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ds</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">axiom_realIsPseudoMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_pseudoMetric â„ realmetric </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">axiom_triangleReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_triangleInequality â„ realmetric </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">realmetricspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">metricSpace </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39; </span>
<span class=" -MMT_ObjectExpression">   			universe := â„, </span>
<span class=" -MMT_ObjectExpression">   			d := realmetric, </span>
<span class=" -MMT_ObjectExpression">   			axiom_isPseudoMetric := axiom_realIsPseudoMetric,</span>
<span class=" -MMT_ObjectExpression">   			axiom_triangleInequality := axiom_triangleReal</span>
<span class=" -MMT_ObjectExpression">   		&#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â„m</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w">   </span>
<span class="w">   		</span>
<span class="w">   	</span>
<span class="w">   </span><span class="vc">axiom_predRealIsPseudoMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool} âŠ¦ prop_pseudoMetric (pred P) realmetric  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pseudom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">axiom_predTriangle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool} âŠ¦ prop_triangleInequality (pred P) realmetric </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">realmet</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">realSubMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool} metricSpace </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P] [&#39; </span>
<span class=" -MMT_ObjectExpression">   			universe := pred P, </span>
<span class=" -MMT_ObjectExpression">   			d := [a : pred P][b : pred P] realmetric a b,</span>
<span class=" -MMT_ObjectExpression">   			axiom_isPseudoMetric := pseudom P,</span>
<span class=" -MMT_ObjectExpression">   			axiom_triangleInequality := realmet P</span>
<span class=" -MMT_ObjectExpression">   		&#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">mpred</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span>
<span class="w">   </span><span class="vc">axiom_mpredIsSuptype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : â„ âŸ¶ bool} (mpred P).universe &lt;* â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sequences</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?AllSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// MiKo: should G here not be a metric space? â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">sequence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: type}type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] â„• âŸ¶ G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^Ï‰</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">structseq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : setstruct}type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] (G.universe)^Ï‰ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^Ï‰</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// prop_isSupremum : {G: metricSpace} G^Ï‰ âŸ¶ G.universe âŸ¶ prop  â˜</span>
<span class="cm">   		= [G,a,l] âˆ€[Îµ : â„+] (âˆ€[n : â„•] a n &lt; l + Îµ) âˆ§ (âˆƒ[n : â„•] a n &gt; l - Îµ) â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// prop_isInfimum : {G: metricSpace} G^Ï‰ âŸ¶ G.universe âŸ¶ prop  â˜</span>
<span class="cm">   		= [G,a,l] âˆ€[Îµ : â„+] (âˆ€[n : â„•] a n &gt; l - Îµ) âˆ§ (âˆƒ[n : â„•] a n &lt; l + Îµ) â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// prop_hasSupremum : {G: metricSpace} G^Ï‰ âŸ¶ prop  â˜</span>
<span class="cm">   		= [G,a] âˆƒ![g] prop_isSupremum G a g   â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// prop_hasInfimum : {G: metricSpace} G^Ï‰ âŸ¶ prop  â˜</span>
<span class="cm">   		= [G,a] âˆƒ![g] prop_isInfimum G a g    â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// supremum : {G : metricSpace, a : G^Ï‰, p : âŠ¦ prop_hasSupremum G a} dom G â˜</span>
<span class="cm">   		= [G, a, p] that (dom G) ([g] prop_isSupremum G a g) p â˜</span>
<span class="cm">   		# sup 2 %I3 â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// infimum : {G : metricSpace, a : G^Ï‰, p : âŠ¦ prop_hasInfimum G a} dom G â˜</span>
<span class="cm">   		= [G, a, p] that (dom G) ([g] prop_isInfimum G a g) p â˜</span>
<span class="cm">   		# inf 2 %I3 â™</span><span class="w"></span>
<span class="w">   	</span><span class="cm">// All of this stuff is only applicable to the real numbers, due to the usage of orders, addition etc. directly on elements of the</span>
<span class="cm">   		domain. Possibly can be generalized â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SequenceConvergence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sequences </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">prop_converges</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} G^Ï‰ âŸ¶ G.universe âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a,l] âˆ€[Îµ : â„+]âˆƒ[n : â„•] âˆ€[m : â„•] (m â‰¥ n) â‡’ (d (a m) l) &lt; Îµ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_convergent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} G^Ï‰ âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a] âˆƒ![g] prop_converges G a g   </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">            </span>
<span class="w">	</span><span class="cm">// isLimitSupremum : {G: metricSpace} G^Ï‰ âŸ¶ G.universe âŸ¶ prop  â˜</span>
<span class="cm">		// = [G,a,l] âˆ€[Îµ : â„+] (âˆ€[N : â„•] âˆƒ[n : â„•] (n â‰¥ N) âˆ§ (a n &gt; l - Îµ)) âˆ§ (âˆƒ[N : â„•] âˆ€[n : â„•] (n â‰¥ N) â‡’ (a n &lt; l + Îµ)) â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// isLimitInfimum : {G: metricSpace} G^Ï‰ âŸ¶ G.universe âŸ¶ prop  â˜</span>
<span class="cm">		//  = [G,a,l] âˆ€[Îµ : â„+] (âˆ€[N : â„•] âˆƒ[n : â„•] (n â‰¥ N) âˆ§ (a n &lt; l + Îµ)) âˆ§ (âˆƒ[N : â„•] âˆ€[n : â„•] (n â‰¥ N) â‡’ (a n &gt; l - Îµ)) â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// hasLimitSupremum : {G: metricSpace} G^Ï‰ âŸ¶ prop  â˜</span>
<span class="cm">		// = [G,a] âˆƒ![g] isLimitSupremum G a g   â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// hasLimitInfimum : {G: metricSpace} G^Ï‰ âŸ¶ prop  â˜</span>
<span class="cm">		// = [G,a] âˆƒ![g] isLimitInfimum G a g    â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// limitSupremum : {G : metricSpace, a : G^Ï‰, p : âŠ¦ hasLimitSupremum G a} dom G â˜</span>
<span class="cm">		//   = [G, a, p] that (dom G) ([g] isLimitSupremum G a g) p â˜</span>
<span class="cm">		// # limsup 2 %I3 â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// limitInfimum : {G : metricSpace, a : G^Ï‰, p : âŠ¦ hasLimitInfimum G a} dom G â˜</span>
<span class="cm">		//  = [G, a, p] that (dom G) ([g] isLimitInfimum G a g) p â˜</span>
<span class="cm">		// # liminf 2 %I3 â™</span><span class="w"></span>
<span class="w">         </span>
<span class="w">	</span><span class="vc">prop_isLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} G^Ï‰ âŸ¶ G.universe âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a,l] âˆ€[Îµ : â„+] âˆ€[N : â„•] âˆƒ[n : â„•] (n â‰¥ N) âˆ§ ((d (a n) l) &lt; Îµ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_hasLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} G^Ï‰ âŸ¶ prop  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a] âˆƒ![g] prop_isLimit G a g    </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">limit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricSpace, a : G^Ï‰, p : âŠ¦ prop_convergent G a} G.universe </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G, a, p] that (G.universe) ([g : G.universe] prop_converges G a g) p </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">#</span><span class="w"> </span><span class="ss">lim</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">    	      </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FunctionLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T p is the limit of f at &quot;point&quot; a, where A is the larger space and is restricted by cond â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T *_c-variants: only on pred_as_subs, all the others on â„ â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">prop_isLimit_c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace,B: metricSpace, cond : A.universe âŸ¶ prop} ({x : A.universe,p:âŠ¦ cond x}B.universe) âŸ¶ A.universe âŸ¶ B.universe âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,cond][f][a,l] âˆ€[Îµ:â„+] Îµ &gt; 0 â‡’ âˆƒ[Î´ : â„] Î´ &gt; 0 âˆ§ âˆ€[x : A.universe] âˆ€[p : âŠ¦ cond x] (d x a) &lt; Î´ â‡’ (d (f x p) l) &lt; Îµ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">prop_hasLimit_c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace,B: metricSpace, cond : A.universe âŸ¶ prop} ({x : A.universe,p:âŠ¦ cond x}B.universe) âŸ¶ A.universe âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,cond,f,a] âˆƒ![l : B.universe] prop_isLimit_c A B cond f a l </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">prop_isLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace,B: metricSpace} (A.universe âŸ¶ B.universe) âŸ¶ A.universe âŸ¶ B.universe âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a,l] prop_isLimit_c A B ([x]true) ([x,p] f x) a l </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">prop_hasLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace,B: metricSpace} (A.universe âŸ¶ B.universe) âŸ¶ A.universe âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a] âˆƒ![l : B.universe] prop_isLimit A B f a l</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">limit_c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace, B: metricSpace, cond : A.universe âŸ¶ prop, f : {x : A.universe,p:âŠ¦ cond x}B.universe, a : A.universe, p : âŠ¦ prop_hasLimit_c A B cond f a} B.universe </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,cond,f,a,p] that (B.universe) ([b:B.universe] prop_isLimit_c A B cond f a b) p </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">limit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace, B: metricSpace, f : A.universe âŸ¶ B.universe, a : A.universe, p : âŠ¦ prop_hasLimit A B f a} B.universe </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a,p] that (B.universe) ([b] prop_isLimit A B f a b) p </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Completeness</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SequenceConvergence </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// d(x_k , x_l ) â†’ 0 for k, l â†’ âˆ â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">cauchy</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M: metricSpace} (â„• âŸ¶ M.universe) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M, seq] âˆ€[Îµ : â„+] âˆ€[N : â„•] âˆƒ[k : â„•] âˆƒ[l : â„•] (k â‰¥ N) âˆ§ (l &gt; k) âˆ§ ((d (seq k) (seq l)) &lt; Îµ) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">cauchy</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// every Cauchy sequence in M converges â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">complete</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M: metricSpace} prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M] âˆ€[seq] cauchy seq â‡’ prop_convergent M seq </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">complete</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// MiKo: maybe we should refactor the iterated operation construction into $?monoid$ with the axioms âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Series</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SequenceConvergence </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricMonoid </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">partialSum</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid} G^Ï‰ âŸ¶ â„• âŸ¶ (G.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">parSum</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">axiom_partialSumBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid} âŠ¦ âˆ€[S : G^Ï‰] parSum S 0 â‰ (G.unit) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">axiom_partialSumStep</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid} âŠ¦ âˆ€[S : G^Ï‰] âˆ€[n] parSum S (succ_nat_lit n) â‰ (G.op) (parSum S n) (S (succ_nat_lit n)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_convergent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid} G^Ï‰ âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][S] prop_convergent G ([n] parSum S n) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">series</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid, S: G^Ï‰} dom G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] lim (partialSum G S) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SUM</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/categories</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cm">// import type http://mathhub.info/MitM/interfaces/TypeConstructors âš</span><span class="w">                              </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Categories</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">category_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ğ’° 10 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">hom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ ğ’° 10 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ihom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c:U} ihom a b âŸ¶ ihom b c âŸ¶ ihom a c </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">âˆ˜m</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	    </span><span class="vc">identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:U} ihom a a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">iid</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d:U} âŠ¦ âˆ€[f:ihom a b] âˆ€[g:ihom b c] âˆ€[h:ihom c d] h âˆ˜m (g âˆ˜m f) â‰ (h âˆ˜m g) âˆ˜m f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_id_r</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:U,a:U} âŠ¦ âˆ€[f:ihom a x] f âˆ˜m iid â‰ f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_id_l</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:U,a:U} âŠ¦ âˆ€[f:ihom x a] iid âˆ˜m f â‰ f </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">		</span><span class="vc">prop_isomorphism</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f:ihom A B] âˆƒ [g] g âˆ˜m f â‰ iid âˆ§ f âˆ˜m g â‰ iid </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_isomorphic</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">prop_isomorphic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] âˆƒ[f : ihom A B] prop_isomorphic f </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">category</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Categories/category_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Cat</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">objects</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Cat âŸ¶ ğ’° 10 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’] ğ’.universe </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">morphisms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ğ’: Cat} |ğ’| âŸ¶ |ğ’| âŸ¶ ğ’° 10 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’,a,b] (ğ’.hom) a b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hom</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">hom_composition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ğ’:Cat,a,b,c:|ğ’|} hom a b âŸ¶ hom b c âŸ¶ hom a c </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’,a,b,c,f,g] (ğ’.comp) a b c f g </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="ss">âˆ˜</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">id</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ğ’:Cat,a:|ğ’|} hom a a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’,a] (ğ’.identity) a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">id</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Opposite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">opposite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">category âŸ¶ category </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’] [&#39;</span>
<span class=" -MMT_ObjectExpression">        universe := (ğ’.universe) ,</span>
<span class=" -MMT_ObjectExpression">        hom := ([a,b] hom b a) ,</span>
<span class=" -MMT_ObjectExpression">        comp := ([a,b,c][f,g] f âˆ˜ g),</span>
<span class=" -MMT_ObjectExpression">        identity := ([a] id a),</span>
<span class=" -MMT_ObjectExpression">        axiom_assoc := ([a,b,c,d] trivial),</span>
<span class=" -MMT_ObjectExpression">        axiom_id_r := ([a,b] trivial),</span>
<span class=" -MMT_ObjectExpression">        axiom_id_l := ([a,b] trivial)</span>
<span class=" -MMT_ObjectExpression">    &#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">op</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Cat âŸ¶ Cat âŸ¶ Cat </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’,ğ’Ÿ] [&#39;</span>
<span class=" -MMT_ObjectExpression">        universe := ((ğ’.universe) Ã— (ğ’Ÿ.universe)) ,</span>
<span class=" -MMT_ObjectExpression">        hom := ([a,b] (hom (Ï€l a) (Ï€l b)) Ã— (hom (Ï€r a) (Ï€r b))) ,</span>
<span class=" -MMT_ObjectExpression">        comp := ([a,b,c][f,g] âŸ¨(Ï€l g) âˆ˜ (Ï€l f),(Ï€r g) âˆ˜ (Ï€r f) âŸ© ),</span>
<span class=" -MMT_ObjectExpression">        identity := ([a] âŸ¨ id (Ï€l a), id (Ï€r a) âŸ©),</span>
<span class=" -MMT_ObjectExpression">        axiom_assoc := ([a,b,c,d] trivial),</span>
<span class=" -MMT_ObjectExpression">        axiom_id_r := ([a,b] trivial),</span>
<span class=" -MMT_ObjectExpression">        axiom_id_l := ([a,b] trivial)</span>
<span class=" -MMT_ObjectExpression">    &#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Ã—C</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ArrowCategory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// include base:?Subtyping â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">arr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Cat âŸ¶ Cat </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [ğ’] [&#39;</span>
<span class="cm">        universe := (Î£ A : | ğ’ |, B : | ğ’ |. hom A B) ,</span>
<span class="cm">        dom : universe âŸ¶ type := [tr] Ï€l tr ,</span>
<span class="cm">        cod : universe âŸ¶ type := [tr] Ï€l ( Ï€r tr) ,</span>
<span class="cm">        arrow : universe âŸ¶ type := [tr] Ï€r (Ï€r) ,</span>
<span class="cm">        hom := ([a,b] Î£ p : ((hom (dom a) (dom b)) Ã— (hom (cod a) (cod b))) . âŠ¦ (Ï€r p) âˆ˜ a â‰ b âˆ˜ (Ï€l p) ) ,</span>
<span class="cm">        comp := ([a,b,c][f,g] âŸ¨âŸ¨(Ï€l (Ï€l g)) âˆ˜ (Ï€l (Ï€l f)),(Ï€r (Ï€l g)) âˆ˜ (Ï€r (Ï€l f)) âŸ©,trivial âŸ© ),</span>
<span class="cm">        identity := ([a] âŸ¨âŸ¨ id (dom a), id (cod a) âŸ©, trivialâŸ©),</span>
<span class="cm">        axiom_assoc := ([a,b,c,d] trivial),</span>
<span class="cm">        axiom_id_r := ([a,b] trivial),</span>
<span class="cm">        axiom_id_l := ([a,b] trivial)</span>
<span class="cm">    &#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Ã—C</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// Definiens fails â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>



<span class="kd">theory</span><span class="w"> </span><span class="nc">SmallCategories</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">small_category_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    	</span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">hom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ihom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c:U} ihom a b âŸ¶ ihom b c âŸ¶ ihom a c </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">âˆ˜m</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:U} ihom a a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">iid</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d:U} âŠ¦ âˆ€[f:ihom a b] âˆ€[g:ihom b c] âˆ€[h:ihom c d] h âˆ˜m (g âˆ˜m f) â‰ (h âˆ˜m g) âˆ˜m f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_id_r</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:U,a:U} âŠ¦ âˆ€[f:ihom a x] f âˆ˜m iid â‰ f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_id_l</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:U,a:U} âŠ¦ âˆ€[f:ihom x a] iid âˆ˜m f â‰ f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">small_category</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?SmallCategories/small_category_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SCat</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// theory CategoryOfSmallCategories : base:?Logic =</span>
<span class="cm">    include ?Functors â™</span>
<span class="cm">    include ?SmallCategories â™</span>
<span class="cm">    include base:?InformalProofs â™</span>

<span class="cm">    Instance functor_composition (ğ’ : Cat, ğ’Ÿ : Cat, E : Cat, F : functor ğ’ ğ’Ÿ, G : functor ğ’Ÿ E) (functor ğ’ E) â˜ =</span>
<span class="cm">        objF = [c : |ğ’|] objF G (objF F c) â™</span>
<span class="cm">        homF : {A,B} hom A B âŸ¶ hom (objF A) (objF B) â˜ = [A,B][f] homF G (homF F f) â˜ # ihomF 3 â™</span>
<span class="cm">        axiom_id : {A:|ğ’|} âŠ¦ ihomF (id A) â‰ id (objF A) â˜ = [A] sketch &quot;trivial&quot; â™</span>
<span class="cm">        axiom_comp: {A:|ğ’|,B:|ğ’|,C:|ğ’|}{f : hom A B, g : hom B C} âŠ¦ ihomF (g âˆ˜ f) â‰ (ihomF g) âˆ˜ (ihomF f) â˜ = [A,B,C][f,g] sketch &quot;trivial&quot; â™</span>
<span class="cm">    âš</span><span class="w"> </span><span class="cm">//</span>

<span class="cm">    Instance small_categories () Cat â˜ =</span>
<span class="cm">        universe = SCat â™</span>
<span class="cm">        hom = [ğ’:universe,ğ’Ÿ:universe] functor ğ’ ğ’Ÿ â™</span>
<span class="cm">        comp = [A:universe,B:universe,C:universe][f : hom A B,g : hom B C] functor_composition A B C f g â™</span>
<span class="cm">    âš</span><span class="w"> </span><span class="cm">//</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/categories</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Functors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">functor_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> ğ’ : Cat, ğ’Ÿ : Cat â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">objF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|ğ’| âŸ¶ |ğ’Ÿ| </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">homF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} hom A B âŸ¶ hom (objF A) (objF B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ihomF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:|ğ’|} âŠ¦ ihomF (id A) â‰ id (objF A) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:|ğ’|,B:|ğ’|,C:|ğ’|}{f : hom A B, g : hom B C} âŠ¦ ihomF (g âˆ˜ f) â‰ (ihomF g) âˆ˜ (ihomF f) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">functor</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’:Cat,ğ’Ÿ:Cat] Mod â˜?Functors/functor_theory ğ’ ğ’Ÿ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">objectF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ğ’,ğ’Ÿ} functor ğ’ ğ’Ÿ âŸ¶ |ğ’| âŸ¶ |ğ’Ÿ| </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’,ğ’Ÿ][F] F.objF </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">objF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">morphismF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ğ’,ğ’Ÿ} {F :functor ğ’ ğ’Ÿ} {A:|ğ’|,B:|ğ’|} hom A B âŸ¶ hom ((F.objF) A) ((F.objF) B) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’,ğ’Ÿ][F][A,B][f] (F.homF) A B f </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">homF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalTransformations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functors </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">naturaltransformation_theory</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> ğ’ : Cat, ğ’Ÿ : Cat, F : functor ğ’ ğ’Ÿ, G : functor ğ’ ğ’Ÿ â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">alpha</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{C: |ğ’|} hom (objF F C) (objF G C) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">axiom_alpha_commutes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c : |ğ’|, cp : |ğ’|} âŠ¦ âˆ€[f:hom c cp]</span>
<span class=" -MMT_ObjectExpression">          (homF G f) âˆ˜ (alpha c) â‰ (alpha cp) âˆ˜ (homF F f) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">    </span><span class="vc">naturaltransformation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ğ’ : Cat, ğ’Ÿ : Cat, F : functor ğ’ ğ’Ÿ, G : functor ğ’ ğ’Ÿ]</span>
<span class=" -MMT_ObjectExpression">        Mod â˜?NaturalTransformations/naturaltransformation_theory ğ’ ğ’Ÿ F G </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">natTrans</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/categories</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CategoryOfSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets?ZFC </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets?SetTypeConversions </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">composition_of_functions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t,r} (elem s âŸ¶ elem t) âŸ¶ (elem t âŸ¶ elem r) âŸ¶ (elem s âŸ¶ elem r) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t,r] [f,g] [x] g (f x) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">âˆ˜c</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">cSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">category </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">        universe := set ,</span>
<span class=" -MMT_ObjectExpression">        hom := ([s,t] (elem s) âŸ¶ (elem t)) ,</span>
<span class=" -MMT_ObjectExpression">        comp := composition_of_functions ,</span>
<span class=" -MMT_ObjectExpression">        identity := ([s] [x : elem s] x) ,</span>
<span class=" -MMT_ObjectExpression">        axiom_assoc := ([a,b,c,d] trivial) ,</span>
<span class=" -MMT_ObjectExpression">        axiom_id_r := ([x,u] trivial) ,</span>
<span class=" -MMT_ObjectExpression">        axiom_id_l := ([x,u] trivial)</span>
<span class=" -MMT_ObjectExpression">    &#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Temp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets?ZFC </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets?SetTypeConversions </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">Image</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t}{f: elem s âŸ¶ elem t} elem (â„˜ s) âŸ¶ elem (â„˜ t) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Im</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">Preimage</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t}{f: elem s âŸ¶ elem t} elem (â„˜ t) âŸ¶ elem (â„˜ s) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PreIm</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowersetFunctors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CategoryOfSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functors </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Opposite </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Temp </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">covariantPowersetFunctor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">functor cSet cSet </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">            objF := ([A] â„˜ A),</span>
<span class=" -MMT_ObjectExpression">            homF := ([A,B][f] [x] Im x f),</span>
<span class=" -MMT_ObjectExpression">            axiom_id := ([x] trivial) ,</span>
<span class=" -MMT_ObjectExpression">            axiom_comp := ([a,b,c,f,g] trivial)</span>
<span class=" -MMT_ObjectExpression">        &#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">contravariantPowersetFunctor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">functor (cSet op) cSet </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [&#39;</span>
<span class="cm">            objF := ([A] â„˜ A),</span>
<span class="cm">            homF := ([A,B][f] [x] PreIm x f),</span>
<span class="cm">            axiom_id := ([x] trivial) ,</span>
<span class="cm">            axiom_comp := ([a,b,c,f,g] trivial)</span>
<span class="cm">        &#39;] </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// Definiens takes forever â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Coalgebras</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CategoryOfSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functors </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">coalgebra_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">T</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">functor cSet cSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">C</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">gamma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elem C âŸ¶ elem (objectF cSet cSet T C) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/collections</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Properties</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_emptyInColl</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] âˆ… âˆˆ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_emptyInColl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_fullInColl</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] (fullset G) âˆˆ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_fullInColl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_unionInColl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] âˆ€[S] S âŠ‘ C â‡’ UNION S âˆˆ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_unionInColl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_intersectionInColl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] âˆ€[S] S âŠ‘ C âˆ§ INTERSECT S âˆˆ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_intersectionInColl</span><span class="w">  </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_finiteIntersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] âˆ€[A]âˆ€[B] A âˆˆ C âˆ§ B âˆˆ C â‡’ (A âˆ© B) âˆˆ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_finiteIntersection</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_finiteUnion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] âˆ€[A]âˆ€[B] A âˆˆ C âˆ§ B âˆˆ C â‡’ (A âˆª B) âˆˆ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_finiteUnion</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_subsetClosed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] âˆ€[S] âˆ€[T] S âˆˆ C âˆ§ T âŠ‘ S â‡’ T âˆˆ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_subsetClosed</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_cover</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ set G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C,S] S âŠ‘ UNION C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">covers</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_subcover</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ collection G âŸ¶ set G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C,D,S] C âŠ‘ D âˆ§ C covers S </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">subcover</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">on</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_pairwiseDisjoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] âˆ€[S] âˆ€[T] S âˆˆ C âˆ§ T âˆˆ C â‡’ disjoint S T </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pairwiseDisjoint</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_closedUnderComplements</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] âˆ€[S] (S âˆˆ C) â‡’ (compl S) âˆˆ C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_closedUnderComplements</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Partition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Properties </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">prop_isPartition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type} collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] C covers (fullset G) âˆ§ Â¬ (prop_emptyInColl C) âˆ§ pairwiseDisjoint C </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	  </span><span class="p">#</span><span class="w"> </span><span class="ss">isPartition</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	  </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">partition_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_covers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ coll covers (fullset X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_nonEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ Â¬ (âˆ… âˆˆ coll) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_pairwisedisjoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ pairwiseDisjoint coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">partition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod â˜?Partition/partition_theory (X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// theory TaggedPartition : base:?Logic =</span>
<span class="cm">	include ?Partition â™</span>
<span class="cm">	include ts:?TaggedCollectoin â™</span>
<span class="cm">	</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/collections</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Matroids</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Properties </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?FiniteCardinality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?NaturalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">matroid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s : set X} âŠ¦ s âˆˆ coll âŸ¶ âŠ¦ s finite </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_emptyInColl coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_subset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_subsetClosed coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_augmentation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [A] âˆ€ [B] A âˆˆ coll âˆ§ B âˆˆ coll âˆ§ | B | â‰¤ | A | </span>
<span class=" -MMT_ObjectExpression">				â‡’ âˆƒ [x] x âˆˆ (A \ B) âˆ§ (B âˆª (single x)) âˆˆ coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜http://mathhub.info/MitM/core/typedsets?Injective </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?Vectors </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w"> </span><span class="vc">weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class="vc">polynomial_equation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model âŸ¶ (polynomial rationalField) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class="vc">polynomial_equation_injectivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} âŠ¦ polynomial_equation A â‰ polynomial_equation B âŸ¶ âŠ¦ A â‰ B </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// As the Weierstrass model is really defined by the polynomial_equation, this is really what defines equality. (1) â™</span><span class="w"></span>

<span class="w"> </span><span class="vc">discriminant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model âŸ¶ â„¤</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// missing that this discriminant is really the discriminant of the polynomial equation</span>
<span class="cm">    // and thus that this factors through the discriminant defined (elsewhere) for multivariate polynomials â™</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="cm">// Dennis: is it okay to just define the discriminant of a weierstrass model as above (i.e. as the discriminant of the associated polynomial?) â™</span><span class="w"> </span>

<span class="w"> </span><span class="vc">a_invariants</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model âŸ¶ (vector â„¤ 5) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class="vc">a_invariants_factors_injectivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ is_injective a_invariants </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// if formulation of (1) changes, this should change too</span>
<span class="cm">    // really, this should go through the polynomial_equation, as it is more core to defn of a_invariants â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">a_Invariants</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Minimal_Weierstrass_model </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">a_invariants</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve âŸ¶ (vector â„¤ 5) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] a_invariants (minimal_Weierstrass_model A) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Base</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜num:?IntegerArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?Field </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?Matrices </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?RationalPolynomials </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">power_series</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w">                                      </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Complex_multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Elliptic_curve </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">complex_multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"> </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Conductor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Elliptic_curve </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">conductor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve âŸ¶ â„¤ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Discriminant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Minimal_Weierstrass_model </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// include ?Weierstrass_model â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">discriminant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve âŸ¶ â„¤ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] discriminant (minimal_Weierstrass_model A) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lmfdb</span><span class="w"> </span><span class="l l-URI">http://www.lmfdb.org/omf</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Elliptic_curve_toolchest</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Modular_degree </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?a_Invariants </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Discriminant </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// include ec_2_adic_data â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// include ec_padic_data â™</span><span class="w"></span>

<span class="w">    </span><span class="cm">// include lmfdb:?LMFDB_label â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// include lmfdb:?Cremona_label â™</span><span class="w">          </span>
<span class="w">    </span><span class="cm">// clash in some names, such as conductor_component, although domains are different</span>
<span class="cm">    // Dennis: Should be fine; Florian massively improved disambiguation at some point :) â™</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Isogeny_class </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?q_Expansion </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Complex_multiplication </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conductor </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="cm">// include minimal_Weierstrass_model â™</span><span class="w"> </span>
<span class="w">    </span><span class="cm">// discriminant makes this redundant</span>
<span class="cm">    // Dennis: true; commented it out  â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Elliptic_curve</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Weierstrass_model </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="vc">elliptic_curve</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">base_field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve âŸ¶ field </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">weierstrass_model_construction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model âŸ¶ elliptic_curve </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">minimal_Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve âŸ¶ weierstrass_model </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">construction_surjective</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ weierstrass_model_construction (minimal_Weierstrass_model A) â‰ A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">                                          </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Isogeny_class</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conductor </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="vc">isogeny_class</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">isogeny_equivalence_class</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve âŸ¶ isogeny_class </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="vc">isogenies_preserve_conductor</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : elliptic_curve, B:elliptic_curve} âŠ¦ isogeny_equivalence_class A â‰ isogeny_equivalence_class B âŸ¶ âŠ¦ conductor A â‰ conductor B </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// should really be defined as a quotient â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">    </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Minimal_Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Elliptic_curve </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w"> </span><span class="vc">minimal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model âŸ¶ weierstrass_model </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class="vc">is_minimal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] (minimal A) â‰ A </span><span class=" -MMT_DD">â™</span><span class="w">           </span>
<span class="w">    </span><span class="cm">// need separators â™</span><span class="w"></span>
<span class="w">    </span>
<span class="w"> </span><span class="cm">// minimality_condition : {A : tm Weierstrass_model,B : tm Weierstrass_model} âŠ¦ (minimal A) â‰ B â†’ âŠ¦ absolute_value (discriminant B) â‰¤ absolute_value (discriminant A) â™</span><span class="w"></span>
<span class="w"> </span><span class="cm">// Dennis: For some reason this doesn&#39;t typecheck. I have an idea why, but no idea how to solve it yet. â™</span><span class="w"></span>
<span class="w"> </span><span class="vc">minimality_idempotence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ minimal (minimal A) â‰ minimal A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="cm">// the whole thing with minimal stinks of redundancy. it should be reusing partial orders and minimality over N â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">minimality_of_minimal_Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ is_minimal (minimal_Weierstrass_model A) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">injective_minimal_Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} âŠ¦ minimal_Weierstrass_model A â‰ minimal_Weierstrass_model B âŸ¶ âŠ¦ A â‰ B </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// roundtrip_Weierstrass_model_construction : {A} âŠ¦ A â‰ Weierstrass_model_construction (minimal_Weierstrass_model A) â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Dennis: now subsumed by elliptic_curve?construction_surjective â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Modular_degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conductor </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">modular_degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve âŸ¶ â„¤ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">q_Expansion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w">             </span><span class="cm">// illustrates gain in introducing isogeny_class, could talk about modular forms as well â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Isogeny_class </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">q_expansion</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve âŸ¶ power_series </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">q_expansion_factors_through_isogeny_class</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} âŠ¦ isogeny_equivalence_class A â‰ isogeny_equivalence_class B âŸ¶ âŠ¦ q_expansion A â‰ q_expansion B </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"> </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/functional-analysis</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">calculus</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">algebra</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">topo</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NormedSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜algebra:?Vectorspace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜algebra:?RealField </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">normedspace_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜algebra:?Vectorspace/vectorspace_theory (realField) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">norm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe âŸ¶  â„^+ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">||</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">||</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_multiplicativity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : universe] âˆ€[a : â„] â˜arith:?RealArithmetics?multiplication (â˜arith?RealArithmetics?absolute a) || x || â‰ || (scalarmult) a x ||</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_subadditivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : universe] âˆ€[y : universe] (|| op x y ||) â‰¤ (||x|| + ||y||) </span><span class=" -MMT_OD">â˜</span><span class="cm">// âŠ¦ ||(x + y)|| â‰¤ (||x|| + ||y||) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_positivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : universe] 0 â‰¤ || x || </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_definiteness</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€[x : universe] 0.0 â‰ || x || â‡” x â‰ unit </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// âŠ¦ ||x||â‰0 â‡” x â‰ e  â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"> </span>
<span class="w">	</span><span class="vc">normedSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?NormedSpace/normedspace_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜calculus:?MetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">NormedSpaceAsMetricSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">calculus:?MetricSpace/metricSpace_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?NormedSpace/normedspace_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">		</span><span class="vc">d</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x : universe, y : universe] || x - y ||</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_triangleInequality</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;follows from axiom_subadditivity&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_isPseudoMetric</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;follows from axiom_positivity, and from the symmetry in the metric as implied by multiplicativity&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BanachSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NormedSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜calculus:?Completeness </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">normedmetric_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NormedSpace/normedspace_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="kd">structure</span><span class="w"> </span><span class="nc">ms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">calculus:?MetricSpace/metricSpace_theory abbrev ?NormedSpace/NormedSpaceAsMetricSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">normedmetric</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?BanachSpace/normedmetric_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">banach</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : normedSpace} prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] complete n </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// TODO also as models-of â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BanachAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BanachSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// theory NormedRealVectorSpaces : base:?Logic =</span>
<span class="cm">	include algebra:?RealVectorspace â™</span>
<span class="cm">	include arith:?RealArithmetics â™</span>
<span class="cm">	// TODO generalize â™</span>
<span class="cm">	// include ?NormedSpace â™</span>
<span class="cm">	</span>
<span class="cm">	Norm: â„1.universe âŸ¶ â„^+ â˜ = [x] |x| â˜ # || 1 || â™</span>
<span class="cm">	Axiom_Multiplicativity : âŠ¦ âˆ€[x : â„1.universe] âˆ€[Î± : â„] || (â„1.scalarmult) Î± x || â‰ | Î± | â‹… || x || â™ // error: type of bound variable too big: kind â™</span>
<span class="cm">	Axiom_Subadditivity : âŠ¦ âˆ€[x] âˆ€[y] (|| (â„1.op) x y ||) â‰¤ (||x|| + ||y||) â™</span>
<span class="cm">	Axiom_Positivity : âŠ¦ âˆ€[x] 0 â‰¤ || x || â™</span>
<span class="cm">	Axiom_Definiteness : âŠ¦ âˆ€[x] ||x||â‰0 â‡” x â‰ (â„1.unit)  â™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/geometry</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cm">// TODO: âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.frameit.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">3DGeometry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Geometry </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="cm">// â„Â³ â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">point</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ Ã— â„ Ã— â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">xofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] Ï€l p </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_x</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">yofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] Ï€l (Ï€r p) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_y</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">zofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] Ï€r (Ï€r p) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_z</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">point_addI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] âŸ¨ (p1 _x + p2 _x), (p1 _y + p2 _y), (p1 _z + p2 _z) âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">point_subtractI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] âŸ¨ (p1 _x - p2 _x), (p1 _y - p2 _y), (p1 _z - p2 _z) âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">vec_multI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,p] âŸ¨ r â‹… p _x, r â‹… p _y, r â‹… p _z âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">scalar_productI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] (p1 _x â‹… p2 _x) + (p1 _y â‹… p2 _y) + (p1 _z â‹… p2 _z) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Common point point_addI point_subtractI vec_multI scalar_productI) </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class="w">  </span><span class="vc">vec_cross</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v, w ] âŸ¨ ( v _y  â‹… w _z  - v _z â‹… w _y ) , ( v _z  â‹… w _x  - v _x â‹… w _z ) , ( v _x  â‹… w _y  - v _y â‹… w _x ) âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Vcross</span><span class="w">  </span><span class="si">2</span><span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InterceptTheorem</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?3DGeometry </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// naming like the images on</span>
<span class="cm">    https://en.wikipedia.org/wiki/Intercept_theorem â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">S</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">C</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">D</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">line1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ S on (from A to B) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">line2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ S on (from C  to D) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">twolines</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦  Â¬ (A -- B) âˆ¥ (C -- D) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">par</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (A -- C) âˆ¥ (B -- D) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">ratio1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (d- S A ) / (d- A B) â‰ (d- S C) / (d- C D) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">ratio2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (d- S A ) / (d- S B) â‰ (d- S C) / (d- S D) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">ratio3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (d- S A ) / (d- S B) â‰ (d- A C) / (d- B D) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">ratio4</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ (d- S C ) / (d- S D) â‰ (d- A C) / (d- B D) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">3DTriangles</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?3DGeometry </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Triangles point point_addI point_subtractI vec_multI scalar_productI) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">area</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( | ( _A T  --  _B T ) Vcross ( _A T -- _C T ) | )  â‹… ( 1 / 2 )</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">AÎ”</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// area definition that does not use height; can be computed without needing Î¹ â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Planes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?3DTriangles </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">plane</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangleToPlane</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ plane </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PofÎ”</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">ParametrizedPlane</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ point âŸ¶ plane </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Ppara</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">pointNormalPlane</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ plane </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Ppn</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">planeNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Pnormal</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">planeBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Pbase</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">PlaneBaseAxiom1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v, w, b } âŠ¦ Pbase (Ppara b v w ) â‰ b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">normalAxiom1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ v, w, b } âŠ¦ ( Pnormal ( Ppara b v w ) ) â‰ ( normalize ( v Vcross w ) ) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">normalAxiom2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ v, b } âŠ¦ ( Pnormal ( Ppn b v ) ) â‰ ( norm ( v ) ) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangleAxiom</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( PofÎ” T ) â‰ Ppara ( _A T ) ( _A  T -- _B T  ) ( _A  T -- _B T)  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">pointOnPlane</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ plane âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v , p] &lt; Pnormal p , v -- Pbase p &gt; â‰  0  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">VonP</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">lineOnPlane</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line âŸ¶ plane âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[l,p ] ( ( from l ) VonP p ) âˆ§  ( ( from l ) ++( dir l ) ) VonP p </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">LonP</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">LinePlaneCollisionPoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ A, B } ( âŠ¦ dir A âŠ¥âŠ¥ Pnormal B ) âŸ¶ point  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">colPLV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">LinePlaneCollisionPointAxiom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A , B, p1 } âŠ¦  ( colPLV  A B p1 ) VonP B   âˆ§  ( colPLV  A B p1 ) on A </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">parallelPlanes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane âŸ¶ plane âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ p1 ,p2] ( Pnormal p1 ) âˆ¥ ( Pnormal p2 ) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Ppar</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">samePlane</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane âŸ¶ plane âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ p1 , p2] ( Pbase p1 VonP  p2 ) âˆ§ ( p1 Ppar p2 )</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">Psame</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">collidePlane</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane âŸ¶ plane âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ A ,B ] ( Â¬ A Ppar  B ) âˆ¨ Psame A B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="ss">colP</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">collisionLine</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B } âŠ¦ colP A B âŸ¶ âŠ¦ Â¬ Psame A B âŸ¶ line </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">colPPL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">collisionLineAxiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, p1 ,p2} âŠ¦ ( ( colPPL A B p1 p2 ) LonP A ) âˆ§( ( colPPL A B p1 p2 ) LonP B )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// TODO Generalize to n-Spheres? âš</span><span class="w"></span>
<span class="cm">// theory Sphere : http://mathhub.info/MitM/Foundation?Math =</span>
<span class="cm">    include ?Vector â™</span>
<span class="cm">    include ?Lines â™</span>

<span class="cm">    sphere: type â˜ # S â™</span>
<span class="cm">    sphereAround: V âŸ¶ â„ âŸ¶ S â˜# So 1 2 â™</span>
<span class="cm">    center: S âŸ¶ V â˜ # Sm 1 â™</span>
<span class="cm">    centerAxiom: {m,r}  âŠ¦ Sm ( So m r) â‰ m â™</span>
<span class="cm">    radius: S âŸ¶ â„ â˜ # Sr 1 â™</span>
<span class="cm">    radiusAxiom : {m,r} âŠ¦ Sr (So m r) â‰ r â™</span>

<span class="cm">    onSphere: S âŸ¶ V âŸ¶ bool â˜ =  [s, v] ( d ( Sm s ) ( v ) ) â‰ ( Sr s ) â˜ # 2 VonS  1 â™</span>
<span class="cm">    inSphere: S âŸ¶ V âŸ¶ bool â˜ =  [s, v] ( d ( Sm s ) ( v ) ) &lt; ( Sr s ) â˜ # 2 VinS  1 â™</span>

<span class="cm">    collidesSphereLine: S âŸ¶ L âŸ¶ bool â˜ = [s,l] âˆƒ [v] ( v VonL  l ) âˆ¨  (v VinS s ) â˜ # 1 ScolL  2 â™</span>

<span class="cm">    circumfenceSphere: S âŸ¶ â„ â˜ = [s] ( Sr s ) â‹… ( Sr s) â‹… 4 â‹… Ï€  â˜ # CS 1 â™</span>
<span class="cm">    areaSphere :  S âŸ¶ â„ â˜ = [s] ( Sr s ) â‹… ( Sr s ) â‹… (Sr s) â‹… ( 4 / 3 ) â‹… Ï€  â˜ # AS 1 â™</span>
<span class="cm">âš</span><span class="w"></span>

<span class="cm">// theory Pyramid :  http://mathhub.info/MitM/Foundation?Math =</span>
<span class="cm">    include â˜http://BenniDoes.Stuff/?Vector â™</span>
<span class="cm">    include â˜http://BenniDoes.Stuff/?Triangle â™</span>

<span class="cm">    Pyramid : type â˜ # Pyr â™</span>
<span class="cm">    pyramidOf : V âŸ¶ V âŸ¶ V âŸ¶ V âŸ¶ Pyr â˜ # Pyrof 1 2 3 4 â™</span>
<span class="cm">    P_A : Pyr âŸ¶ V â˜ # P_A 1â™</span>
<span class="cm">    P_A_axiom : {a :V, b :V, c :V, dd :V } âŠ¦ ( P_A ( Pyrof a b c dd) ) â‰  a  â˜ role ForwardRuleâ™</span>
<span class="cm">    P_B : Pyr âŸ¶ V â˜ # P_B 1â™</span>
<span class="cm">    P_B_axiom : {a :V, b :V, c :V, dd :V } âŠ¦ ( P_B ( Pyrof a b c dd) ) â‰  b  â˜ role ForwardRuleâ™</span>
<span class="cm">    P_C : Pyr âŸ¶ V â˜ # P_C 1â™</span>
<span class="cm">    P_C_axiom : {a :V, b :V, c :V, dd :V } âŠ¦ ( P_C ( Pyrof a b c dd) ) â‰  c  â˜ role ForwardRuleâ™</span>
<span class="cm">    P_D : Pyr âŸ¶ V â˜ # P_D 1â™</span>
<span class="cm">    P_D_axiom : {a :V, b :V, c :V, dd :V } âŠ¦ ( P_D ( Pyrof a b c dd) ) â‰  dd  â˜ role ForwardRuleâ™</span>

<span class="cm">    Volume_Pyramid: Pyr âŸ¶ â„ â˜ = [p ] ( 1 / 6) â‹… ( &lt; ( ( ( P_B p ) â» ( P_A p ) ) Vcross ( ( P_C  p ) â» ( P_A p ) ) ), (( P_D  p ) â» ( P_A p )  ) &gt; ) â˜# VolofP 1 â™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/geometry</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cm">// TODO: âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.core.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Geometry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?Trigonometry </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">Common</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> point : type,</span>
<span class="nv">        add : point âŸ¶ point âŸ¶ point,</span>
<span class="nv">        subtract : point âŸ¶ point âŸ¶ point,</span>
<span class="nv">        mult : â„ âŸ¶ point âŸ¶ point,</span>
<span class="nv">        scp : point âŸ¶ point âŸ¶ â„ â˜ </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="cm">// â„^n â™</span><span class="w"></span>

<span class="w">      </span><span class="vc">point_add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">add </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">++</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">point_subtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">subtract </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">--</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">vec_mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ point âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mult </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‹…â‹…</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">scalar_product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">scp </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">norm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] âˆš &lt;p,p&gt; </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">metric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] | (p1 -- p2) | </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">d-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MetricCommutative </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">      </span><span class="vc">normalize</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v] (1 / ( | v | )) â‹…â‹… v </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">norm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class="w">      </span><span class="cm">// Angles â™</span><span class="w"></span>

<span class="w">      </span><span class="vc">angle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w] acos ( &lt; v,w &gt; / (|v| â‹… |w|)) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ </span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">angle_between</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] âˆ  (x -- y) (z -- y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ </span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AngleInvertible </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">      </span><span class="vc">parallel</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w] (âˆ  v w â‰ 0) âˆ¨ (âˆ  v w â‰ pi_num) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âˆ¥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">orthogonal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w] &lt; v ,w &gt; â‰ 0 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">âŠ¥âŠ¥</span><span class="w"> </span><span class="si">2</span><span class="w">   </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">//  jbot â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">rightangle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] x â‰ pi_num / 2  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âœ“</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">//  jcheck â™</span><span class="w"></span>

<span class="w">      </span><span class="cm">// Lines â™</span><span class="w"></span>

<span class="w">      </span><span class="vc">line_type</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">line</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">lineOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ line </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">basepoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">targetpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">axiom_basepoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p1,p2} âŠ¦ from (from p1 to p2) â‰ p1  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">axiom_targetpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p1,p2} âŠ¦ to (from p1 to p2) â‰ p2  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">      </span><span class="vc">lineDirection</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[l] norm (( to l ) -- ( from l )) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">dir</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// wut? â™</span><span class="w"></span>

<span class="w">      </span><span class="vc">onLine</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line âŸ¶ point âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">on</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// definiens? â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">sameLine</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line âŸ¶ line âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A ,B] ( (from B ) on A ) âˆ§ ( (lineDirection B) âˆ¥ (lineDirection A) ) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰…</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">      </span><span class="vc">intersect</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line âŸ¶ line âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] âˆƒ [p] (p on A) âˆ§ (p on B) âˆ§ (Â¬ A â‰… B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">colL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">pointOfIntersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A ,B } ( âŠ¦ colL A B ) âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">colLV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">parallelLine</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line âŸ¶ line âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] lineDirection A âˆ¥ lineDirection B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">paraL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">pointOfIntersectionAxiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, p} âŠ¦ ( ( colLV A B  p) on A ) âˆ§ ( ( colLV A B  p) on B) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">Triangles</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> point : type,</span>
<span class="nv">          addI : point âŸ¶ point âŸ¶ point,</span>
<span class="nv">          subtractI : point âŸ¶ point âŸ¶ point,</span>
<span class="nv">          multI : â„ âŸ¶ point âŸ¶ point,</span>
<span class="nv">          scpI : point âŸ¶ point âŸ¶ â„ â˜ </span><span class="p">=</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Common point addI subtractI multI scpI) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">triangle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangle_constructor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ point âŸ¶ point âŸ¶ triangle </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î”</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">triangle_point1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_A</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangle_point2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_B</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangle_point3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_C</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">alpha_angle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_Î±</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] angle ( _B T -- _A T ) ( _C T -- _A T )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">beta_angle</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_Î²</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] angle ( _A T --  _B T ) ( _C T -- _B T )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">gamma_angle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_Î³</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] angle ( _A T -- _C T  ) ( _B T -- _C T )</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">a_triangle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _B T) ( _C T) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_a</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">b_triangle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _A T) ( _C T) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_b</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">c_triangle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _A T) ( _B T) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_c</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class="w">    </span><span class="vc">height_triangle_basepoint_a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_haV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_a_online_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( _haV T ) on ( from ( _B T) to ( _C T ) ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_a_orthogonal_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( _haV T -- _B T ) âŠ¥âŠ¥ ( _haV T -- _A T ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">ha_triangle_length</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _A T ) ( _haV T  )</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_ha</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">height_triangle_basepoint_b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_hbV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_b_online_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( _hbV T ) on ( from ( _A T) to ( _C T ) ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_b_orthogonal_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( _hbV T -- _A T ) âŠ¥âŠ¥ ( _hbV T -- _B T ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">hb_triangle_length</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _B T ) ( _hbV T  )</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_hb</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">height_triangle_basepoint_c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ point </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_hcV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_c_online_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( _hcV T ) on ( from ( _B T) to ( _A T ) ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_c_orthogonal_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( _hcV T -- _B T ) âŠ¥âŠ¥ ( _hcV T -- _C T ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">hc_triangle_length</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _C T ) ( _hcV T  )</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_hc</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">lawOfCosine_Alpha</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( _a T â‹… _a T ) â‰ ( _b T â‹… _b T ) + ( _c T â‹… _c T ) + 2 â‹… _b T â‹… _c T â‹…  ( cos ( _Î± T ) )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">lawOfCosine_Beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( _b T â‹… _b T ) â‰ ( _a T â‹… _a T ) + ( _c T â‹… _c T ) + 2 â‹… _a T â‹… _c T â‹…  ( cos ( _Î² T ) )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">lawOfCosine_Gamma</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ ( _c T â‹… _c T ) â‰ ( _a T â‹… _a T ) + ( _b T â‹… _b T ) + 2 â‹… _a T â‹… _b T â‹…  ( cos ( _Î³ T ) )</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">lawOfSinesAB</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ _a  T / sin ( _Î± T ) â‰ _b T / sin ( _Î² T ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">lawOfSinesAC</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ _a  T / sin ( _Î± T ) â‰ _c T / sin ( _Î³ T ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">lawOfSinesCB</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } âŠ¦ _c  T / sin ( _Î³ T ) â‰ _b T / sin ( _Î² T ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">angleSum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} âŠ¦ (( _Î± T) + ( _Î² T) + ( _Î³ T) )â‰ pi_num </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">area</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] ( _hb T) â‹… ( _b T) / 2 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">AÎ”</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">SymmetricTriangles</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> point : type,</span>
<span class="nv">         addI : point âŸ¶ point âŸ¶ point,</span>
<span class="nv">         subtractI : point âŸ¶ point âŸ¶ point,</span>
<span class="nv">         multI : â„ âŸ¶ point âŸ¶ point,</span>
<span class="nv">         scpI : point âŸ¶ point âŸ¶ â„ â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Triangles point addI subtractI multI scpI) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">symmetric_Î±</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] _Î² T â‰ _Î³ T </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sym_Î±</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_Î²</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] _Î± T â‰ _Î³ T </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sym_Î²</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_Î³</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] _Î± T â‰ _Î² T </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sym_Î³</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">symmetric_edges_Î±</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : âŠ¦ (sym_Î± T) } âŠ¦ _b T â‰ _c T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_edges_Î²</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : âŠ¦ (sym_Î² T) } âŠ¦ _a T â‰ _c T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_edges_Î³</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : âŠ¦ (sym_Î³ T) } âŠ¦ _a T â‰ _b T </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">symmetric_Î±_edges</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : âŠ¦ ( _b T â‰ _c T)} âŠ¦ sym_Î± T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_Î²_edges</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : âŠ¦ ( _a T â‰ _c T)} âŠ¦ sym_Î² T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_Î³_edges</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : âŠ¦ ( _a T â‰ _b T)} âŠ¦ sym_Î³ T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">RightTriangles</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> point : type,</span>
<span class="nv">            addI : point âŸ¶ point âŸ¶ point,</span>
<span class="nv">            subtractI : point âŸ¶ point âŸ¶ point,</span>
<span class="nv">            multI : â„ âŸ¶ point âŸ¶ point,</span>
<span class="nv">            scpI : point âŸ¶ point âŸ¶ â„ â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Triangles point addI subtractI multI scpI) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">pythagoras_alpha</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _c T) â‹… ( _c T) + ( _b T) â‹… ( _b T) â‰ ( _a T) â‹… ( _a T) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">pythagoras_beta</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _a T) â‹… ( _a T) + ( _c T) â‹… ( _c T) â‰ ( _b T) â‹… ( _b T) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">pythagoras_gamma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _a T) â‹… ( _a T) + ( _b T) â‹… ( _b T) â‰ ( _c T) â‹… ( _c T) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">right_alpha_prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] âœ“  _Î± T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">right_beta_prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] âœ“  _Î² T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">right_gamma_prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] âœ“  _Î³ T </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">pythagoras_theorem_alpha</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T}  { p :  âŠ¦ right_alpha_prop T } âŠ¦ pythagoras_alpha  T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">pythagoras_theorem_beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T}  { p :  âŠ¦ right_beta_prop T } âŠ¦ pythagoras_beta  T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">pythagoras_theorem_gamma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T}  { p :  âŠ¦ right_gamma_prop T } âŠ¦ pythagoras_gamma  T </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">geometric_mean_alpha</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _ha T â‹… _ha T ) â‰ ( d- ( _haV T ) ( _B T ) ) â‹… ( d- ( _haV T) ( _C T ) ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">geometric_mean_beta</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _hb T â‹… _hb T ) â‰ ( d- ( _hbV T ) ( _A T ) ) â‹… ( d- ( _hbV T) ( _C T ) ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">geometric_mean_gamma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _hc T â‹… _hc T ) â‰ ( d- ( _hcV T ) ( _B T ) ) â‹… ( d- ( _hcV T) ( _A T ) ) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">geometric_mean_theorem_alpha</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  âŠ¦ ( âœ“  _Î± T  ) } âŠ¦ geometric_mean_alpha T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">geometric_mean_theorem_beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  âŠ¦ ( âœ“  _Î² T  ) } âŠ¦ geometric_mean_beta T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">geometric_mean_theorem_gamma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  âŠ¦ ( âœ“  _Î³ T  ) } âŠ¦ geometric_mean_gamma T </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">cathetus_alpha_1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _b T â‹… _b T  ) â‰ _a T â‹… ( d- ( _haV T) ( _C T ) )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">cathetus_alpha_2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _c T â‹… _c T  ) â‰ _a T â‹… ( d- ( _haV T) ( _B T ) )</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">cathetus_beta_1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _c T â‹… _c T  ) â‰ _b T â‹… ( d- ( _hbV T) ( _A T ) )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">cathetus_beta_2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _a T â‹… _a T  ) â‰ _b T â‹… ( d- ( _hbV T) ( _C T ) )</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">cathetus_gamma_1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _a T â‹… _a T  ) â‰ _c T â‹… ( d- ( _hcV T) ( _B T ) )</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">cathetus_gamma_2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _b T â‹… _b T  ) â‰ _c T â‹… ( d- ( _hcV T) ( _A T ) )</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">catheus_theorem_alpha_1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  âŠ¦ ( âœ“  _Î± T  ) } âŠ¦ cathetus_alpha_1 T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">catheus_theorem_alpha_2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  âŠ¦ ( âœ“  _Î± T  ) } âŠ¦ cathetus_alpha_2 T </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">catheus_theorem_beta_1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  âŠ¦ ( âœ“  _Î² T  ) } âŠ¦ cathetus_beta_1 T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">catheus_theorem_beta_2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  âŠ¦ ( âœ“  _Î² T  ) } âŠ¦ cathetus_beta_2 T </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">catheus_theorem_gamma_1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  âŠ¦ ( âœ“  _Î³ T  ) } âŠ¦ cathetus_gamma_1 T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">catheus_theorem_gamma_2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  âŠ¦ ( âœ“  _Î³ T  ) } âŠ¦ cathetus_gamma_2 T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/geometry</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="cm">// TODO: âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.frameit.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PlanarGeometry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Geometry </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// â„Â² â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">point</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„ Ã— â„ </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">xofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] Ï€l p </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_x</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">yofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] Ï€r p </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_y</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">point_addI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] âŸ¨ (p1 _x + p2 _x), (p1 _y + p2 _y) âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">point_subtractI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] âŸ¨ (p1 _x - p2 _x), (p1 _y - p2 _y) âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">vec_multI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,p] âŸ¨ r â‹… p _x, r â‹… p _y âŸ© </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">scalar_productI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] (p1 _x â‹… p2 _x) + (p1 _y â‹… p2 _y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Common point point_addI point_subtractI vec_multI scalar_productI) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/graphs</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Graphs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?AllSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?Relations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?Union </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜num:?NaturalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?SetQuantifiers </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">nodetype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">dgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	    </span><span class="vc">nodes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set nodetype </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	    </span><span class="vc">edges</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">relation nodetype nodetype </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	    </span><span class="vc">successors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype âŸ¶ set nodetype </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] âŸª nodes | ([x] edges a x) âŸ« </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	    </span><span class="vc">predecessors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype âŸ¶ set nodetype </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] âŸª nodes | ([x] edges x a) âŸ« </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	    </span><span class="vc">neighbours</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype âŸ¶ set nodetype </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] (successors a) âˆª (predecessors a)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    	</span><span class="vc">n_regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] âˆ€ âˆˆ nodes . [a] âˆƒ= n âˆˆ (neighbours a) . [b] TRUE </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">ugraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Graphs/dgraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">undirected_edges</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ symmetric edges </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">finite_dgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Graphs/dgraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ nodes finite </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">finite_ugraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Graphs/ugraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Graphs/finite_dgraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">	</span><span class="vc">dgraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Graphs/dgraph_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">ugraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Graphs/ugraph_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">finite_dgraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Graphs/finite_dgraph_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">finite_ugraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?Graphs/finite_ugraph_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w"> 	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?RelationClosure </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">nodesOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{g: dgraph}set nodetype </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] (g.nodes) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">nodes</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">dEdgesOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{g: dgraph}relOn nodetype </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] (g.edges) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">edgesOf</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">uEdgesOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{g: ugraph}relOn nodetype </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] symmetric_closure (g.edges) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">edgesOf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">finite_dgraph âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] | nodesOf g | </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">inducedUGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph âŸ¶ ugraph </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d : dgraph] [&#39;</span>
<span class=" -MMT_ObjectExpression">		nodes := d.nodes , </span>
<span class=" -MMT_ObjectExpression">		edges := symmetric_closure (d.edges) ,</span>
<span class=" -MMT_ObjectExpression">		undirected_edges := trivial</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	    </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">emptyGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">graphEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] empty (g.nodes) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">emptyGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">	  nodes := emptySet nodetype ,</span>
<span class=" -MMT_ObjectExpression">	  edges := ([x : nodetype,y : nodetype] false)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">graphEdgeless</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] (g.edges) â‰ [x,y] false </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">edgelessGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set nodetype âŸ¶ dgraph </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] [&#39;</span>
<span class=" -MMT_ObjectExpression">      nodes := S ,</span>
<span class=" -MMT_ObjectExpression">      edges := ([x : nodetype,y : nodetype] false)</span>
<span class=" -MMT_ObjectExpression">      &#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GraphOrderSize</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?FiniteCardinality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] | nodesOf g | </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// TODO: we would need to convert a relation into a set of pairs and count that â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">//size : dgraph âŸ¶ â„• â˜ = [g] | dedgesOf g | â˜ # || 1 || â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GraphDegree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?FiniteCardinality </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="cm">// indegree : {g : dgraph} (g.nodes) âŸ¶ â„• â˜ = [g,n] | âŸª dedgesOf g | [e] Ï€2 e â‰n  âŸ« | â˜ indeg 2â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// outdegree : {g : dgraph} (g.nodes) âŸ¶ â„• â˜ = [g,n] | âŸª dedgesOf g | [e] Ï€1 e â‰n  âŸ« | â˜ outdeg 2â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// degree : {g : ugraph} (g.nodes) âŸ¶ â„• â˜ = [g,n] | âŸª dedgesOf g | [e] Ï€1 e â‰n  âŸ« | â˜ degree 2â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">InitialTerminal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// initial : {g : dgraph} (g.nodes) âŸ¶ bool â˜ = [g,n] Â¬âˆƒ[e] e âˆˆ (g.edges) âˆ§ âˆƒ[m] e m n â˜ # initial 2 â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// terminal : {g : dgraph} (g.nodes) âŸ¶ bool â˜ = [g,n] Â¬âˆƒ[e] e âˆˆ (g.edges) âˆ§ âˆƒ[m] e n m â˜ # terminal 2 â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// sets =/= types â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GraphMorphisms</span><span class="w"> </span><span class="p">:</span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">graphMorphism_theory</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> g1 : ugraph, g2 : ugraph â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype âŸ¶ nodetype </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">        </span><span class="vc">morphism_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ âˆˆ (g1.nodes) . [n1] âˆ€ âˆˆ (g1.nodes) . [n2] (g1.edges) n1 n2 â‡’ (g2.edges) (fun n1) (fun n2) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/graphs</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">VertexColoredGraphs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">vertexcoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Graphs/ugraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">        </span><span class="vc">colors</span><span class="w"> </span><span class="p">:</span><span class=" -MMT_ObjectExpression">set â„• </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// we assume at most countably many colors indexed by â„• â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">color</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype âŸ¶ asType colors </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">undirectedVertexcoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Graphs/ugraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?VertexColoredGraphs/vertexcoloredgraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EdgeColoredGraphs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">edgecoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Graphs/dgraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">        </span><span class="vc">colors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set â„• </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// we assume at most countably many colors indexed by â„• â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">colorOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b:nodetype} âŠ¦ edges a b âŸ¶ asType colors </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">color</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class="w">        </span><span class="vc">color_symm_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âˆ€[a] âˆ€[b] âˆ€[p] âˆ€[q] edges a b â‡’ colorOf a b p â‰ colorOf b a q </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="cm">// TODO needs eliminating the second proof argument â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">undirectedEdgecoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Graphs/ugraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?EdgeColoredGraphs/edgecoloredgraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class="w">        </span><span class="vc">color_symm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ color_symm_prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">proper_prop</span><span class="w"> </span><span class="p">:</span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âˆ€[a] âˆ€ âˆˆ (neighbours a) . [b] âˆ€ âˆˆ (neighbours a) . [c] âˆ€[p] âˆ€[q] b â‰  c â‡’ colorOf a b p â‰  colorOf a c q </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="cm">// TODO needs eliminating the second proof argument â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">    </span><span class="vc">uecGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?EdgeColoredGraphs/undirectedEdgecoloredgraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">properEdgecoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?EdgeColoredGraphs/undirectedEdgecoloredgraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">        </span><span class="vc">is_proper</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ proper_prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">    </span><span class="vc">properedgecoloredGraph</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?EdgeColoredGraphs/properEdgecoloredgraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">subGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">properedgecoloredGraph âŸ¶ (nodetype âŸ¶ prop) âŸ¶ (nodetype âŸ¶ nodetype âŸ¶ prop) âŸ¶ properedgecoloredGraph </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// TODO definiens â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// TODO generalize â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">components</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">properedgecoloredGraph âŸ¶ set properedgecoloredGraph </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ColoredGraphMorphisms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GraphMorphisms </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EdgeColoredGraphs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">colorPreservingMorphism</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> g1 : uecGraph, g2 : uecGraph â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?GraphMorphisms/graphMorphism_theory g1 g2 </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">        </span><span class="cm">// preservation_property : âŠ¦ âˆ€ âˆˆ (g1.nodes) . [n1] âˆ€ âˆˆ (g1.nodes) . [n2] âˆ€ [p : âŠ¦ (g1.edges) n1 n2]</span>
<span class="cm">            (g1.colorOf)  n1 n2 p â‰ (g2.colorOf) (fun n1) (fun n2) trivial â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Maniplexes</span><span class="w"> </span><span class="p">:</span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EdgeColoredGraphs </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">maniplex_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> rank : â„• â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Graphs/ugraph_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">        </span><span class="kd">structure</span><span class="w"> </span><span class="nc">colored</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EdgeColoredGraphs/properEdgecoloredgraph_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">            </span><span class="vc">nodes</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">            </span><span class="vc">edges</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">edges </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">            </span><span class="vc">colors</span><span class="w"> </span><span class="p">@</span><span class="no"> colors </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŸª (fullset â„•) | ([x] x &lt; rank) âŸ« </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">            </span><span class="vc">colorOf</span><span class="w"> </span><span class="p">@</span><span class="no"> colorOf </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">        </span><span class="vc">this</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">properedgecoloredGraph </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// TODO â™</span><span class="w"></span>

<span class="w">        </span><span class="vc">is_n_regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ n_regular rank </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="vc">subgraph_induced_by_colors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{i : â„•, j : â„•} properedgecoloredGraph </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="cm">// TODO â™</span><span class="w"></span>

<span class="w">        </span><span class="vc">has_squares_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = âˆ€ âˆˆ colors . [i] âˆ€ âˆˆ colors . [j] ((max i j) - (min i j)) &gt; 1 â‡’</span>
<span class="cm">                                                âˆ€ âˆˆ (components (subgraph_induced_by_colors i j)) . [C] âˆƒ= 4 âˆˆ (C.nodes) . [x] true </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">        </span><span class="vc">has_squares</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ has_squares_prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>


<span class="w">        </span><span class="vc">pathIntersection_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="cm">// For every pair of nodes (u,v) and every pair of colors (i,j):</span>
<span class="cm">            if there is a path (TODO!) from u to v that only uses colors &gt;i and a second path that only uses colors &lt;j,</span>
<span class="cm">            then there&#39;s a path that only uses colors c with i&lt;c&lt;j</span>
<span class="cm">         â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">    </span><span class="vc">maniplex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n:â„•] Mod â˜?Maniplexes/maniplex_theory n </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">dual</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n:â„•} maniplex n âŸ¶ maniplex n </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="cm">// swaps edges of color i with edges of color n - 1 - i  </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">k_faces</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{rank : â„•} maniplex rank âŸ¶ â„• âŸ¶ set properedgecoloredGraph </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">      </span><span class="cm">// = [r,M,k] components (subGraph M ([x] true) ([x,y] (M.color) x y â‰  k)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">k_face_flagGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{rank : â„•} maniplex rank âŸ¶ â„• âŸ¶ set properedgecoloredGraph </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="cm">// = [r,M,k] components (subGraph M ([x] true) ([x,y] (M.color) x y &lt; k)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// return type should be set (maniplex k) â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">facet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{rank : â„•} maniplex rank âŸ¶ set properedgecoloredGraph </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="cm">// = [r,M] k_face_flagGraph r M (r-1) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// return type should be set (maiplex rank-1) â™</span><span class="w"></span>

<span class="w">    </span><span class="cm">// k_face_flagGraph preserves pathIntersection_property i.e. return type polytopeFlagGraph â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">vertex_figures</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{rank : â„•} maniplex rank âŸ¶ set properedgecoloredGraph </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,M] k_face_flagGraph r M 0 </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// ...and shift colors to get maniplex/polytopeFlagGraph again â™</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">polytopeFlagGraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> rank : â„• â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜?Maniplexes/maniplex_theory (rank) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">        </span><span class="vc">hasPathIntersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ pathIntersection_property </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/measures</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">exr</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seq</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">desc</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/DescriptionOperators</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Additive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?ExtendedReals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">collections?Properties </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">prop_additive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type}{F : collection A} (setastype F âŸ¶ â„) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_Additive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">	</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="cm">// = [A,F,f] âˆ€[S]âˆ€[T] disjoint X Y â‡’ f(X âˆª Y) â‰ f(X) + f(Y)  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// DM: conversion between sets and types needed to work properly â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SigmaAdditive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?Functions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SigmaAlgebra </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?ExtendedReals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">calculus?Series </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">prop_sigmaAdditive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type}{F : collection A} (setastype F âŸ¶ â„) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_sigmaAdditive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">	</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="cm">// = [A,F,f] âˆ€[S : sequence (setastype (F.coll))] pairwiseDisjoint (im S (fullset â„•)) â‡’  f (elem (F.coll) (UNION (im S (fullset â„•)))) â‰ SUM ([x : â„•] f (S x)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// DM: conversion between sets and types needed to work properly â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Measure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SigmaAdditive </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">calculus?Series </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?Functions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">measure_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type , A : sigmaAlgebra X â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">measure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">setastype (A.coll) âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Î¼</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">		</span><span class="vc">axiom_nonnegative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [x] Î¼ x â‰¥ 0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_emptyiszero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ Î¼  (elem (A.coll) âˆ… ) â‰ 0 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_sigmaadditivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_sigmaAdditive (A.coll) measure </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">measure</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type, A : sigmaAlgebra X] Mod â˜?Measure/measure_theory X A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">measureSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{&#39;</span>
<span class=" -MMT_ObjectExpression">  		universe : type ,</span>
<span class=" -MMT_ObjectExpression">  		sigma_algebra : sigmaAlgebra universe ,</span>
<span class=" -MMT_ObjectExpression">  		rmeasure : measure universe sigma_algebra</span>
<span class=" -MMT_ObjectExpression">	&#39;}</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">measurableSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{&#39;universe : type , sigma_algebra : sigmaAlgebra universe &#39;} </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="cm">// very slow! toMeasureSpace : {ms: measurableSpace} measure (ms.universe) (ms.sigma_algebra) âŸ¶ measureSpace </span>
<span class="cm">	â˜// = [ms, m] [&#39;universe := ms.universe , sigma_algebra := ms.sigma_algebra , measure := m&#39;] â™</span><span class="w"></span>
<span class="w">	                                                                         </span>
<span class="w">	</span><span class="vc">isFiniteMeasure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">measureSpace âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="cm">// slow! = [ms] (ms.measure.measure) (elem (ms.sigma_algebra.coll) (fullset (ms.universe))) &lt; âˆ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Measure </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_powersetIsSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] prop_isSigmaAlgebra A (powerset A (fullset A)) </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_fullInPowerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} âŠ¦ prop_fullInColl (â„˜ (fullset A)) </span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// (â„˜ (fullset A)) â™</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_finiteIntersectionPower</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} âŠ¦ prop_finiteIntersection (â„˜ (fullset A)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_complementsPower</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} âŠ¦ prop_closedUnderComplements (â„˜  (fullset A)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class="cm">// lemma_finiteUnion : âŠ¦ prop_finiteUnion coll â˜ = sketch &quot;by de Morgan&quot; â™</span><span class="w"></span>
<span class="cm">//	lemma_empty : âŠ¦ prop_emptyInColl coll â˜ = sketch &quot;$âˆ…$ is the complement of $X$&quot; â™</span><span class="w"> </span>

<span class="w">	</span><span class="vc">prop_intersectionInPower</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} âŠ¦ prop_intersectionInColl (â„˜ (fullset A)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">powerSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : type} sigmaAlgebra X </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [X : type] [&#39; 	setalgebra/axiom_complements := prop_complementsPower  , coll := â„˜  (fullset X), axiom_intersection := prop_intersectionInPower 	</span>
<span class="cm">	, setalgebra/axiom_full :=  prop_fullInPowerset  &#39;] </span><span class=" -MMT_DD">â™</span><span class="w"> </span>

<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CountingMeasure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerSigmaAlgebra </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">countingMeasureFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : type, A : sigmaAlgebra X} setastype (A.coll) âŸ¶ â„</span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">â˜</span><span class="cm">// slow! = [A, S, s] if s finite  then (| s | : â„) else âˆ</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">countingMeasureFunction_nonnegative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : type, A : sigmaAlgebra X } âŠ¦ âˆ€ [x] (countingMeasureFunction X A) x â‰¥ 0</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="cm">// slow!	countingMeasure_emptyiszero	: {A : type, S : sigmaAlgebra A} âŠ¦ (countingMeasureFunction A S) (elem (S.coll) âˆ…) â‰ 0 â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">countingMeasure_sigmaadditivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , S : sigmaAlgebra A} âŠ¦ prop_sigmaAdditive (S.coll) (countingMeasureFunction A S) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">countingMeasure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : type, A : sigmaAlgebra X}  measure X A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">//  =  [X,A] </span>
<span class="cm">	[&#39;</span>
<span class="cm">	measure := (countingMeasureFunction X A) , axiom_nonnegative :=  countingMeasureFunction_nonnegative ,   </span>
<span class="cm">	axiom_emptyiszero := countingMeasure_emptyiszero , axiom_sigmaadditivity := countingMeasure_sigmaadditivity</span>
<span class="cm">	&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">countingMeasurableSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ measurableSpace </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// slow! = [A] [&#39;universe := A , sigma_algebra := powerSigmaAlgebra A&#39;]</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">countingMeasureSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ measureSpace </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// slow! = [A] [&#39;universe := A , sigma_algebra := powerSigmaAlgebra A , measure := countingMeasure A (powerSigmaAlgebra A)   &#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">                 </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NullSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Measure </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">isNullSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace} set (m.universe) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="cm">// slow! = [m , s] (s âˆˆ m.sigma_algebra.coll) âˆ§ (((m.measure.measure) </span>
<span class="cm">  (elem (m.sigma_algebra.coll) s)) â‰ 0)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">allNullSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace} collection (m.universe) </span><span class=" -MMT_OD">â˜</span><span class="cm">// slow!= [m] âŸª  (m.sigma_algebra.coll) | ([s] (((m.measure.measure) </span>
<span class="cm">  (elem (m.sigma_algebra.coll) s)) â‰ 0))âŸ« </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AlmostEverywhere</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NullSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">almostEverywhere</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace} ((m.universe) âŸ¶ bool) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,P] âˆƒ [n] n âˆˆ (allNullSets m) âˆ§ (âˆ€[x] x âˆˆ (fullset (m.universe) \ n) â‡’  P x)</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">AE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/measures</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">top</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">collections?Properties </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">prop_isSetAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type} collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] prop_fullInColl C âˆ§ prop_closedUnderComplements C âˆ§ prop_finiteIntersection C </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	  </span><span class="p">#</span><span class="w"> </span><span class="ss">isSetAlgebra</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	  </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">setAlgebra_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_full</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_fullInColl coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_finiteIntersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_finiteIntersection coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_complements</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_closedUnderComplements coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">lemma_finiteUnion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_finiteUnion coll </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by de Morgan&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">lemma_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_emptyInColl coll </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;$âˆ…$ is the complement of $X$&quot; </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">setAlgebra</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod â˜?SetAlgebra/setAlgebra_theory X </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">    </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜collections?Properties </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetAlgebra </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">prop_isSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type} collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">	  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] isSetAlgebra C âˆ§ prop_intersectionInColl C </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	  </span><span class="p">#</span><span class="w"> </span><span class="ss">isSigmaAlgebra</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	  </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">sigmaAlgebra_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_intersectionInColl coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">lemma_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_unionInColl coll </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by de Morgan&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="k">implicit</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">setalgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SetAlgebra/setAlgebra_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">			</span><span class="vc">coll</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">			</span><span class="vc">axiom_finiteIntersection</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;special case of $axiom_intersection$&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">			</span><span class="vc">lemma_finiteUnion</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;special case of $lemma_union$&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">sigmaAlgebra</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod â˜?SigmaAlgebra/sigmaAlgebra_theory X </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Measurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?Functions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SigmaAlgebra </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">	</span><span class="vc">measurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type}{X : sigmaAlgebra A, Y : sigmaAlgebra B} (A âŸ¶ B) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][X,Y,F] âˆ€[S] S âˆˆ (Y.coll) â‡’ (preim F S) âˆˆ (X.coll) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	 </span><span class="p">#</span><span class="w"> </span><span class="ss">measurable</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>

<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LebesgueMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Measurable </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">lebesgueMeasurableLeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : sigmaAlgebra A} (A âŸ¶ â„) âŸ¶ bool </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] âˆ€[x : â„] âŸª fullset A | ([i : A] (f i) â‰¤ x) âŸ« âˆˆ (s.coll) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableLeq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lebesgueMeasurableLt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : sigmaAlgebra A} (A âŸ¶ â„) âŸ¶ bool </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] âˆ€[x : â„] âŸª fullset A | ([i : A] (f i) &lt; x) âŸ« âˆˆ (s.coll) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableLt</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lebesgueMeasurableGeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : sigmaAlgebra A} (A âŸ¶ â„) âŸ¶ bool </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] âˆ€[x : â„] âŸª fullset A | ([i : A] (f i) â‰¥ x) âŸ« âˆˆ (s.coll) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableGeq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">lebesgueMeasurableGt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : sigmaAlgebra A} (A âŸ¶ â„) âŸ¶ bool </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] âˆ€[x : â„] âŸª fullset A | ([i : A] (f i) &gt; x) âŸ« âˆˆ (s.coll) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableGt</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// MiKo: would like a view from topological spaces into Sigma Algebras that makes continuous functions measurable. âš</span><span class="w"></span>
<span class="cm">// I don&#39;t understand - in general, sigma algebras aren&#39;t topologies... âš</span><span class="w"></span>
<span class="cm">/T The BorelSigmaAlgebra is the smallest SigmaAlgebra that contains the collection of open sets. âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">BorelSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?LeastMost </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SigmaAlgebra </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">topology?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">borelsigmacoll</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} collection A âŸ¶ collection A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,C] least ([D] isSigmaAlgebra D âˆ§ (C âŠ‘ D)) (subset (set A)) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">borelsigma</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class="cm">//  axiom_closedundercomplements : {t : topologicalSpace} âŠ¦ prop_closedUnderComplements (borelsigma (topologyOf t)) â™</span><span class="w"></span>
<span class="w"> </span><span class="cm">// axiom_closedunderintersections : {t : topologicalSpace} âŠ¦  prop_intersectionInColl (borelsigma (topologyOf t)) â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">borelSigma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t : topologicalSpace} sigmaAlgebra (t.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">    </span><span class="cm">// = [t] [&#39;</span>
<span class="cm">	  	  coll := borelsigma (topologyOf t) ,</span>
<span class="cm">	  	  axiom_full := (t.axiom_full) ,</span>
<span class="cm">	  	  axiom_intersection := axiom_closedunderintersections ,</span>
<span class="cm">	  	  axiom_complements := axiom_closedundercomplements</span>
<span class="cm">	&#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BorelMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Measurable </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BorelSigmaAlgebra </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜top:?RealTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">borelMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, t : topologicalSpace} sigmaAlgebra A âŸ¶ (A âŸ¶ t.universe) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,t,s,f] measurable s (borelSigma t) f </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">borelMeasurable</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">realBorelMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} sigmaAlgebra A âŸ¶ (A âŸ¶ â„) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] measurable s (borelSigma realTopologicalSpace) f</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">lemma_realBorelMeasurableIsMeasurable</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/numbertheory</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveBases</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?FiniteSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?SetQuantifiers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?LeastMost </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatIntervals </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">isAdditiveBasisFor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set â„• âŸ¶ set â„• âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,T] âˆ€ âˆˆ T . [t] âˆƒ âˆˆ A . [a1] âˆƒ âˆˆ A . [a2] a1 + a2 â‰ t </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">isRestrictedAdditiveBasisFor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set â„• âŸ¶ set â„• âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,T] (isAdditiveBasisFor A T) âˆ§ (âˆ€ âˆˆ A . [x:â„•] âˆ€ âˆˆ T . [y:â„•] (2 â‹… x) â‰¤ y) âˆ§</span>
<span class=" -MMT_ObjectExpression">          âˆƒ [b] T â‰ natInterval 0 b </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?LeastMost </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">isSymmetricAdditiveBasis</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set â„• âŸ¶ set â„• âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">        </span><span class="cm">// = [A,T] (isAdditiveBasisFor A T) âˆ§ âˆ€ âˆˆ A . [a] ((greatest ([x:â„•] x âˆˆ A) ([x:â„•,y:â„•] x â‰¤ y) - a) âˆˆ A) â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/numbertheory</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatIntervals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?NaturalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜sets:?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">natInterval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">â„• âŸ¶ â„• âŸ¶ set â„• </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] âŸª fullset â„• | ([x] a â‰¤ x âˆ§ x â‰¤ b ) âŸ« </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UpDownSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?POSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">upset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset} (set (P.universe)) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] âˆ€[x] âˆ€[y] x âˆˆ F âˆ§ (P.ord) x y â‡’ y âˆˆ F </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">upset</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">downset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset} (set (P.universe)) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] âˆ€[x] âˆ€[y] x âˆˆ F âˆ§ (P.ord) y x â‡’ y âˆˆ F </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">downset</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">  </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">filter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?POSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UpDownSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeastMost </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DirectedSet</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_isFilter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset} (set (P.universe)) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] upset F âˆ§ (P.prop_directedSubset) F </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isFilter</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_isProperFilter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset}  (set (P.universe)) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] isFilter F âˆ§ Â¬ F â‰ fullset (P.universe) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_isUltrafilter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset} (set (P.universe)) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] isGreatest F ([x] isFilter x) ([x,y] subset (P.universe) x y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w">  </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sig</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>

<span class="w">	</span><span class="vc">finiteSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[t] Î£  x : (set t) . âŠ¦ x finite </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">finSet</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">setToFiniteSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , s : set A} âŠ¦ s finite âŸ¶ finSet A </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,p] âŸ¨ s , p âŸ©</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">theorem_emptySetIsFinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} âŠ¦ (âˆ… : set A) finite</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">theorem_setConsFinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : set A , a : A} âŠ¦ s finite âŸ¶ âŠ¦ (s &lt;- a) finite</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">theorem_setConsFiniteSplit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : set A , a : A } âŠ¦ (s &lt;- a) finite âŸ¶ âŠ¦ s finite </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">setSpFin</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// error , wenn keine notation dann fehle rin setsum -&gt; bla â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Functions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">function_composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type, C : type} (A âŸ¶ B) âŸ¶ (B âŸ¶ C)  âŸ¶ (A âŸ¶ C) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C][f,g] [x] g (f x) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">Â°</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">image</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (A âŸ¶ B) âŸ¶ set A âŸ¶ set B  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">im</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">function_restriction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type, C : type}{prf : (C &lt;* A)} (A âŸ¶ B) âŸ¶ (C âŸ¶ B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">function_restriction</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">preimage</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (A âŸ¶ B) âŸ¶ set B âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">preim</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">identityFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A âŸ¶ A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x] x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Id</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">constantFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type} B âŸ¶ A âŸ¶ B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,c,x] c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Injective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">	</span><span class="vc">injective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type, f: A âŸ¶ B} prop  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] âˆ€[x:A] âˆ€[y : A]  f x â‰ f y â‡’ x â‰ y </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">#</span><span class="w"> </span><span class="ss">is_injective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">		</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	           </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Surjective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">surjective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type, f: A âŸ¶ B} prop  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f]   âˆ€[y : B] âˆƒ[x: A]  f x â‰ y </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">#</span><span class="w"> </span><span class="ss">is_surjective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Bijective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Surjective</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Injective</span><span class=" -MMT_DD">â™</span><span class="w">  </span>

<span class="w">	</span><span class="vc">bijective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, B: type, f : A âŸ¶ B} prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[A, B, f] is_injective f âˆ§ is_surjective f</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">		</span><span class="p">#</span><span class="w"> </span><span class="ss">is_bijective</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">          </span>
<span class="w">	</span><span class="vc">bijections</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type} type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, B] (A âŸ¶ B) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">bijections</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverseBijections</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type} bijections A B âŸ¶ bijections B A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">bijinv</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">InverseFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B: type, f: A âŸ¶ B} B âŸ¶ A  </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,y]  Î¹ [x] f x â‰ y </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">^-</span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Permutation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bijective </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">permutation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, f: A âŸ¶ A} prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f] is_bijective f </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">is_permutation</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ar</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PrOSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NaturalDeduction </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">proset_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetStructures/setstruct_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">ord</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰¼</span><span class="w"> </span><span class="si">2</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">axiom_reflexive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ reflexive ord </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">axiom_transitive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ transitive ord </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">lemma_preOrder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ preOrder ord </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">and_introduction axiom_reflexive axiom_transitive </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">strictord</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] ord a b âˆ§ Â¬ a â‰ b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">â‰º</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">strict_lemma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ strictPreOrder strictord </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by construction&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span>
<span class="w">     </span><span class="vc">prop_upperBound</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set U âŸ¶ U âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,b] âˆ€[s] S s â‡’ (s â‰¼ b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">prop_lowerBound</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set U âŸ¶ U âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,b] âˆ€[s] S s â‡’ (b â‰¼ s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">prop_directed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âˆ€[a] âˆ€[b] âˆƒ[c] a â‰¼ c âˆ§ b â‰¼ c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">prop_directedSubset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(U âŸ¶ bool) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] âˆ€[a] âˆ€[b] F a âˆ§ F b â‡’ âˆƒ[c] F c âˆ§ a â‰¼ c âˆ§ b â‰¼ c </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">proset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?PrOSet/proset_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w">  </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeastMost</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">    </span><span class="vc">prop_isLeast</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} A âŸ¶ (A âŸ¶ bool) âŸ¶ (A âŸ¶ A âŸ¶ bool) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,P,R] P x âˆ§ âˆ€[y] P y â‡’ R x y </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isLeast</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">    </span><span class="vc">least</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A âŸ¶ bool) âŸ¶ (A âŸ¶ A âŸ¶ bool) âŸ¶ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,R] Î¹ [x] isLeast x P R </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">least</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w">   </span>
<span class="w">    </span><span class="vc">prop_isGreatest</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} A âŸ¶ (A âŸ¶ bool) âŸ¶ (A âŸ¶ A âŸ¶ bool) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,P,R] isLeast x P (converse R) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isGreatest</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">    </span><span class="vc">greatest</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A âŸ¶ bool) âŸ¶ (A âŸ¶ A âŸ¶ bool) âŸ¶ A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,R] Î¹ [x] isGreatest x P R </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">greatest</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="cm">// least/greatest assume that there is a unique least element. Instead minimal/maximal return a set of minimal elements (a singleton</span>
<span class="cm">    // if there is a unique one). â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">minimal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A âŸ¶ bool) âŸ¶ (A âŸ¶ A âŸ¶ bool) âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,R] Î¹ [s] âˆ€[x] x âˆˆ s â‡’ isLeast x P R </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">minimal</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">maximal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A âŸ¶ bool) âŸ¶ (A âŸ¶ A âŸ¶ bool) âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,R] Î¹ [s] âˆ€[x] x âˆˆ s â‡’ isGreatest x P R </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">maximal</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DirectedSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?OperationProps </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeastMost </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PrOSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">directedSet_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PrOSet/proset_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">lub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] least (prop_upperBound S) ord </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">glb</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] greatest (prop_lowerBound S) ord </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">meet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] lub [x] x â‰ a âˆ§ x â‰ b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">join</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U âŸ¶ U âŸ¶ U </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] glb [x] x â‰ a âˆ¨ x â‰ b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">      </span><span class="vc">axiom_directed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_directed </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">meetIdenpotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_idempotent meet </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">sketch &quot;by idempotence of conjunction&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">meetAssociative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_associative meet </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by associativity of conjunction&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">meetCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_commutative meet </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by commutativity of conjunction&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">joinIdempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_idempotent join </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">sketch &quot;by idempotence of disjunction&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">joinAssociative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_associative join </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by associativity of disjunction&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span><span class="vc">joinCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_commutative join </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by commutativity of disjunction&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span><span class="vc">directedSet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?DirectedSet/directedSet_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Fixpoints</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">isFixpoint</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type, f:A âŸ¶ A, a:A} prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f,a] f a  â‰  a </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">fixpoints</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A âŸ¶ A) âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f] Î¹ [s] âˆ€[x] x âˆˆ s â‡’ isFixpoint A f x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">POSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PrOSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">poset_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PrOSet/proset_theory </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">axiom_antisymmetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ antisymmetric ord </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">lemma_partialOrder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ partialOrder ord </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">and_introduction lemma_preOrder axiom_antisymmetric</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">     </span><span class="vc">strict_lemma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ strictPartialOrder strictord </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by construction&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="vc">poset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?POSet/poset_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SupremumReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeastMost </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ar:?ExtendedReals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">supremumReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set â„ âŸ¶ â„</span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] least ([a] âˆ€[x] x âˆˆ s â‡’ x â‰¤ a)  ([a,b] a â‰¤ b)   </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">supR</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">/T MiKo: a first-order approximation of a view from POSet to PowerSet</span>
<span class="cm">   eventually, we want to push filter and co out over this to get the </span>
<span class="cm">   usual applications of filters âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ASet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BasicLemmata </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowersetPOSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?POSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="kd">view</span><span class="w"> </span><span class="nc">PowersetIsPOSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?POSet/poset_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?ASet</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    	</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set A </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">ord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,T] subset A S T </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_reflexive</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lemma_subsetReflexive </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_transitive</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lemma_subsetTransitive </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_antisymmetric</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lemma_subsetAntisymmetric </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Relations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?NaturalArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">relation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] A âŸ¶ B âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">relation</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">relOn</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] A âŸ¶ A âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">relOn</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">converse</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} relation A B âŸ¶ relation B A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][R] [y,x] R x y</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">converse</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">relation_composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} relation A B âŸ¶ relation B C  âŸ¶ relation A C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C][R,S] [x,y] âˆƒ[w] R x w âˆ§ S w y </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">range</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} relation A B âŸ¶ set B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">range</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// restriction: {A,B} relation A B âŸ¶ {C} relation C B  â˜ # 3 | 4 â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_reflexive</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] âˆ€[x] R x x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">reflexive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_irreflexive</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] âˆ€ [x] Â¬ R x x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">irreflexive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_symmetric</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] âˆ€[x]âˆ€[y] R x y â‡’ R y x</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">symmetric</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_antisymmetric</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] âˆ€[x]âˆ€[y] R x y âˆ§ R y x â‡’ x â‰ y</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">antisymmetric</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_asymmetric</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] âˆ€[x]âˆ€[y] R x y â‡’ Â¬ R y x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asymmetric</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_total</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] âˆ€[x]âˆ€[y] x â‰  y â‡’ (R x y âˆ¨ R y x)</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">total</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_transitive</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] âˆ€[x]âˆ€[y]âˆ€[z] R x y âˆ§ R y z â‡’ R x z</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">transitive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_equivalent</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (symmetric R) âˆ§ (transitive R) âˆ§ (reflexive R) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equivalent</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_preorder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (reflexive R) âˆ§ (transitive R) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">preorder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// MiKo: I could not find any evidence for this name on the web</span>
<span class="cm">	prop_permutation: {A} relOn AâŸ¶ bool â˜ = [A][R] (symmetric R) âˆ§ (transitive R) â˜ # permutation 2 â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_commutes</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f,g] âˆ€ [x:A] âˆ€ [y:A] f x y â‡’ (âˆ€ [z:A] g z y â‡’ âˆƒ [w:A] g w x âˆ§ f z w)  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">commute</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_preOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (reflexive R) âˆ§ (transitive R) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">preOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_strictPreOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (irreflexive R) âˆ§ (transitive R) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">strictPreOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_partialOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (preOrder R) âˆ§ (antisymmetric R) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">partialOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_strictPartialOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (irreflexive R) âˆ§ (transitive R) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">strictPartialOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_order</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (partialOrder R) âˆ§ (total R) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">order</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_strictOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (strictPartialOrder R) âˆ§ (total R) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">strictOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_linearOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (partialOrder R) âˆ§ âˆ€ [a] âˆ€ [b] R a b âˆ¨ R b a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">linearOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_wellfounded</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (partialOrder R) âˆ§ âˆ€ [B: set A] âˆƒ [b] b âˆˆ B âˆ§ âˆ€ [c] (R b c)  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">wellfounded</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_wellOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (linearOrder R) âˆ§ (wellfounded R)  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">wellOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// sameRelation: {A,B} relation A B âŸ¶ relation A B âŸ¶ bool â˜ = [A,B,f,g] (inclusion f g) âˆ§ (inclusion f g) â˜ # sameRelation 3 4 â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  	</span><span class="vc">subrelation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} relation A B âŸ¶ relation A B âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][R,S] âˆ€ [x]âˆ€[y] (R x y) â‡’ (S x y) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">sub</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelationClosure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetRelations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T maybe factor out minimal-such-that? â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ (relOn AâŸ¶ bool) âŸ¶ relOn A</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">  	</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,R,P] Î¹ [S] R sub S âˆ§ P S âˆ§ âˆ€[T] (R sub T âˆ§ P T) â‡’ (S â‰ T) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">closure</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span><span class="vc">symmetricClosure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ relOn A</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,R] closure R [x] symmetric x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">symmetric_closure</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">reflexiveClosure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶relOn A</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[A,R] closure R [x] reflexive x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">transitiveClosure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶relOn A</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[A,R] closure R [x] transitive x </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">reflexiveTransitiveClosure</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn AâŸ¶ relOn A</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,R] closure R [r] reflexive r âˆ§ transitive r </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">^*</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">closureLemma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€[P : relOn AâŸ¶ bool] âˆ€[R : relOn A] P (closure R P) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">// theory QuotientSpace : base:?Logic = </span>
<span class="cm">  include ?Relations â™</span>
<span class="cm">  include ?PowerSet â™</span>
<span class="cm">  include collections?Properties â™</span>
<span class="cm"> </span>
<span class="cm">  // temporary workaround; use https://github.com/UniFormal/MMT/issues/358 later. â™</span>
<span class="cm">  equivRel : type â˜ = {A} relOn A â™</span>
<span class="cm">  equivalenceClass : {A} equivRel A âŸ¶ A âŸ¶ set A â˜ </span>
<span class="cm">    = [A,R,a] âŸª (fullset A) | ([x] R a x) âŸ« â˜</span>
<span class="cm">    # 3 _^ 2 â™</span>
<span class="cm">  quotient : {A} set A âŸ¶ equivRel A âŸ¶ set (set A) â˜</span>
<span class="cm">    = [A,S,R] âŸª (â„˜ (fullset A)) | ([T] âˆ€[x] x âˆˆ T â‡’ âˆƒ[y] y âˆˆ S âˆ§ R x y) âŸ« â˜</span>
<span class="cm">    # 3 / 2 â™</span>
<span class="cm">  projection : {A} equivRel âŸ¶ A âŸ¶ set A â˜</span>
<span class="cm">     = [A,R] [a] a _^ R â˜</span>
<span class="cm">    # Ï€_2 â™</span>
<span class="cm">  lemma_cover : {A} âŠ¦ âˆ€[R] âˆ€[S] S / R covers S â™</span>
<span class="cm">  lemma_disjiont : {A} âŠ¦ âˆ€[R] âˆ€[S] âˆ€[X] âˆ€[Y] X âˆˆ S / R âˆ§ Y âˆˆ S â‡’ disjoint X Y â™</span>
<span class="cm">  lemma_nonEmpty : {A} âŠ¦ âˆ€[R] âˆ€[S] âˆ€[X] X âˆˆ S / R â‡’ nonEmpty X â™</span>
<span class="cm">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="cm">// Views to parametric theories are currently impossible; semantics is unclear â™</span>
<span class="cm">// view PartitionQuotientspace : ?Partition -&gt; ?Quotientspace  (R) =</span>
<span class="cm">  coll = quottientspace R â™</span>
<span class="cm">  axiom_covers =  lemma_cover â™</span>
<span class="cm">  axiom_nonEmpty =  lemma_nonEmtpy â™</span>
<span class="cm">  axiom_pairwisedisjoint = lemma_disjoint â™</span>
<span class="cm">âš</span><span class="w"></span>
<span class="w">   </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w">  </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sig</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ar</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetSum</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ar:?RealArithmetics </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?FiniteSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">setSum</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type  , s : set â„} âŠ¦ s finite âŸ¶ (A âŸ¶ â„) âŸ¶ â„ </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">setSum</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">setSum_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , f : A âŸ¶ â„} âŠ¦ setSum âˆ… theorem_emptySetIsFinite f â‰ (0 : â„) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">setSum_cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , s : set â„ ,  a : â„, p : âŠ¦ (s &lt;- a) finite , f : A âŸ¶ â„} </span>
<span class=" -MMT_ObjectExpression">	âŠ¦ setSum (s &lt;- a) p f â‰ a + setSum s (theorem_setConsFiniteSplit â„ s a p) f </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?Lists </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?Subtyping </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the type operator of sets along with its constructors â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">set</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] A âŸ¶ prop </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">setCons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A âŸ¶ set A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] [a,P] [x] P x âˆ¨ x â‰ a</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">setList</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} List A âŸ¶  set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â‰ª</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">â‰«</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">inSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} A âŸ¶ set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][a,P] P a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">bsetst</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ (A âŸ¶ prop) âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][P,Q] [x] P x âˆ§ Q x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âŸª</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">âŸ«</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">fullset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] [x] true </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">fullset</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">setAsType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, P: set A} type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] âŸ¨ x : A | âŠ¦ P x âŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asType</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="cm">// TODO, need a lot of congruence rules that make sure that setcons ACI â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetQuantifiers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?NatLiterals </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">forall_sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type } set A âŸ¶ (A âŸ¶ prop) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,P] âˆ€[x:A] x âˆˆ S â‡’ P x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ€</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists_sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type } set A âŸ¶ (A âŸ¶ prop) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,P] âˆƒ[x:A] x âˆˆ S âˆ§ P x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists_n_sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} â„• âŸ¶ set A âŸ¶ (A âŸ¶ prop) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆƒ=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆˆ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-102</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EmptySet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">emptySet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] [x] false</span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s] s â‰ âˆ…  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">empty</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">nonEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s] s â‰  âˆ…  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="vc">inhabited</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inhabited</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">axiom_inhabited</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€[S:set A] inhabited S â‡” (âˆƒ [x] (x âˆˆ S)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">axiom_emptySet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ Â¬ (âˆƒ [x:A] (x âˆˆ âˆ…)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EmptySet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">single</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a] âˆ… &lt;- a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">single</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s] âˆƒ[x] s â‰ single x </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">singleton</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="w">  </span><span class="cm">// consider merge this with singleton âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Tuples</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EmptySet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">double</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A âŸ¶ A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b] âˆ… &lt;- a &lt;- b </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">double</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span><span class="vc">triple</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A âŸ¶ A âŸ¶ A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b,c] âˆ… &lt;- a &lt;- b &lt;- c </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">triple</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">axiom_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a : set A, b : set A} âŠ¦ âˆƒ! [x: set A] âˆ€[y : A] y âˆˆ x â‡” (y âˆˆ a âˆ¨ y âˆˆ b) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_union</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆª</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b] </span>
<span class=" -MMT_ObjectExpression">   		that (set A) ([x: set A] âˆ€[y : A] y âˆˆ x â‡” (y âˆˆ a âˆ¨ y âˆˆ b)) (axiom_union A a b) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   		</span>
<span class="w">   </span><span class="vc">munionCollection</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A,B} set A âŸ¶ (A âŸ¶ set B) âŸ¶ set B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â‹ƒ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">unionCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set (set A) âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, s] â‹ƒ s ([e] e) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">UNION</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âˆ©</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b] âŸª a | ([x] x âˆˆ b) âŸ« </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">mintersectCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} set A âŸ¶ (A âŸ¶ set B) âŸ¶ set B </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">â‹‚</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">intersectCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set (set A) âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, s] â‹‚ s ([e] e) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">INTERSECT</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SetRelations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Intersection </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EmptySet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">subset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] âˆ€[x] x âˆˆ S â‡’ x âˆˆ T </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŠ‘</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">properSubset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] (S âŠ‘ T) âˆ§ Â¬ S â‰ T </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŠ‚</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">superset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] âˆ€[x] x âˆˆ T â‡’ x âˆˆ S </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŠ’</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">properSuperset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] (S âŠ’ T) âˆ§ Â¬ S â‰ T </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">âŠƒ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">disjoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A,B] A âˆ© B â‰ âˆ… </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">disjoint</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">sameSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] (S âŠ‘ T) âˆ§ (T âŠ‘ S)  </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">same_set</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">powerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set (set A) </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">â„˜</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetDifference</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Singleton </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">setdiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A,B] âŸª A | ([x] Â¬ x âˆˆ B) âŸ« </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">\</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">symdiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A,B] (A \ B) âˆª (B \ A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">symdiff</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">complement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A] (fullset O \ A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">compl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// take out an element from a set â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ A âŸ¶ set A </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A,a] A \ (single a) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">BasicLemmata</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetDifference </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetRelations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">lemma_extensionality</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€[a:set A] âˆ€[b:set A] same_set a b â‡” a â‰ b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_universeMember</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€ [a : A] (a âˆˆ (fullset A)) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_subsetTransitive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€ [s : set A] âˆ€ [t : set A] âˆ€ [u : set A] (subset A s t âˆ§ subset A t u) â‡’ subset A s u </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_subsetReflexive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€ [s : set A] subset A s s </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_subsetAntisymmetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€ [s : set A] âˆ€ [t : set A] (subset A s t âˆ§ subset A t s) â‡’ s â‰ t </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_emptyset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€ [s : set A] subset A âˆ… s </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_emptySetSubset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€ [s : set A] ( subset A s âˆ…) â‡’ s â‰ âˆ… </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_properSubsetTransitive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€ [s : set A] âˆ€ [t : set A] âˆ€ [u : set A] (s âŠ‚ t âˆ§ t âŠ‚ u) â‡’ s âŠ‚ u </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_properSubsetIrreflexive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ âˆ€ [s : set A] Â¬ (s âŠ‚ s) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteCardinality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?NaturalNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">finite</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">cardinality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, a : set A}âŠ¦ a finite âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">infinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] Â¬ S finite </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">infinite</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetStructures</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">setstruct_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span><span class="vc">setstruct</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod â˜?SetStructures/setstruct_theory </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">dom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">setstruct âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] (S.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">doms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S : setstruct}set (dom S) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] fullset (dom S) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IndicatorFunction</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜arith:?NaturalNumbers </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?DescriptionOperator </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">indicatorFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} set A âŸ¶ A âŸ¶ â„• </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,a] if (a âˆˆ s) then (1 : â„•) else 0 </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">AllSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FiniteCardinality </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerSet </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetDifference </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetStructures </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetRelations </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">typeof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="cm">// = [A,s] âŸ¨ x : A | âŠ¦ x âˆˆ sâŸ© </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">setastype</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">elemof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{s : set A, e : A} âŠ¦ e âˆˆ s âŸ¶ setastype s </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">elem</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">%I4</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SetCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">   </span><span class="vc">collection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] set (set G)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">                                      </span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">setColl_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">   	  </span><span class="vc">coll</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">collection X </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   	  </span><span class="vc">colltype</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">setastype coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span><span class="vc">setColl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod â˜?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">emptySetInType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T, S : setColl T, emptyincoll : âŠ¦ âˆ… âˆˆ (S.coll) } S.colltype </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">âˆ…t</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">fullSetInType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T, S : setColl T, fullincoll : âŠ¦ (fullset T) âˆˆ (S.coll) } S.colltype </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">fullt</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TaggedSetCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetCollection </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?ProductTypes </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">taggedCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] set (G Ã— set G) </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">neighborhoodSystem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">sets:?filter </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">    </span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">X</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">nhsys</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">X âŸ¶ powerset (set X) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">N</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_filter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [x] isFilter (N x)</span><span class=" -MMT_DD">â™</span><span class="w"> </span><span class="cm">// maybe better use a predicate subtype for N? â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_nhsys1</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [x] âˆ€ [U] U âˆˆ (N x) â‡’ x âˆˆ U </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_nhsys2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ âˆ€ [x] âˆ€ [U] U âˆˆ (N x) â‡’ âˆƒ [V] (N x) âˆ§ âˆ€ [y] y âˆˆ V â‡’ U âˆˆ (N y) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">    </span><span class="vc">isOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(set X) âŸ¶ bool </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S]  âˆ€ [x] x âˆˆ S â‡’ âˆƒ [U] U âˆˆ (N x) âˆ§ U âŠ‘ S</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="cm">// view topologyFromNHsystem: ?topology_theory -&gt; ?neighborhoodSystem =</span>
<span class="cm">//   universe := universe â™</span>
<span class="cm">//   topology := isOpen â™</span>
<span class="cm">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">calc</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜calc:?RealMetricSpace</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜calc:?MetricSpaceAsTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>

<span class="w">	</span><span class="vc">realTopology</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">metricAsTopology realmetricspace </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">topology â„</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">realTopologicalSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39; universe := â„ , topology := realTopology  &#39;] </span><span class=" -MMT_OD">â˜</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">topologicalSpace </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OpenSetTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">collections?Properties </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">prop_isTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type} collection G âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">	  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] prop_emptyInColl C âˆ§ prop_fullInColl C âˆ§ prop_unionInColl C âˆ§ prop_finiteIntersection C </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">	  </span><span class="p">#</span><span class="w"> </span><span class="ss">isTopology</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">topology_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_emptyInColl coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_full</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_fullInColl coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_unionInColl coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_intersection</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ prop_finiteIntersection coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">topology</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod â˜?OpenSetTopology/topology_theory (X)</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">topologicalSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{&#39;</span>
<span class=" -MMT_ObjectExpression">		universe : type ,</span>
<span class=" -MMT_ObjectExpression">		topology : topology universe</span>
<span class=" -MMT_ObjectExpression">	&#39;}</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">topologyOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: topologicalSpace} collection (G.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] (G.topology).coll </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">topologyOf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">isOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] S âˆˆ (topologyOf G) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">open</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">isClosed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] ((doms G)\ S) âˆˆ (topologyOf G) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">closed</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">isClopen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] closed S âˆ§ open S </span><span class=" -MMT_DD">â™</span><span class="w"> </span>
<span class="w">	</span>
<span class=" -MMT_MD">âš</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">coarsefineTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">coarserTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} collection A âŸ¶ collection A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,T1,T2] T1 âŠ‘ T2 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">finerTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} collection A âŸ¶ collection A âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,T1,T2] T2 âŠ‘ T1 </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"> </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TrivialTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trivialTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} collection A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [A] setList (set A) ((emptySet A) , ((fullset A) , nil A)) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trivialTopology</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ prop_emptyInColl (trivialTopology A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;by construction&quot; </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lemma_empty</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_full</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ prop_fullInColl (trivialTopology A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;by construction&quot; </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lemma_full</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ prop_unionInColl (trivialTopology A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;by construction&quot; </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lemma_union</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_intersection</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} âŠ¦ prop_finiteIntersection (trivialTopology A) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;by construction&quot; </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lemma_intersection</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">  </span><span class="vc">indiscreteSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} topologicalSpace </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// = [A] [&#39; </span>
<span class="cm">      universe := A , </span>
<span class="cm">      topology := trivialTopology A,</span>
<span class="cm">      axiom_empty := lemma_empty A,</span>
<span class="cm">      axiom_full := lemma_full A,</span>
<span class="cm">      (axiom_union) := lemma_union A,</span>
<span class="cm">      axiom_intersection := lemma_intersection A</span>
<span class="cm">      &#39;] </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// ^ &quot;x.topology&quot; still needs to be the record</span>
<span class="cm">  	containing the collection and all the proofs. The topological space only contains the universe and the topology (which is a record itself). â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DiscreteSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜base:?InformalProofs </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">discreteTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A âŸ¶ collection A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] â„˜ S </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w"> 	</span><span class="cm">// lemma_empty : {A : type } âŠ¦ âˆ€[S : set A] prop_emptyInColl (discreteTopology S) â˜ = sketch &quot;by construction&quot; â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// lemma_full : âŠ¦ âˆ€[S] prop_fullInColl (discreteTopology S) â˜ sketch &quot;by construction&quot; â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// lemma_union : âŠ¦ âˆ€[S] prop_unionInColl (discreteTopology S) â˜ sketch &quot;by construction&quot; â™</span><span class="w"></span>
<span class="w">	</span><span class="cm">// lemma_intersection: âŠ¦ âˆ€[S] prop_finiteIntersection (discreteTopology S) sketch &quot;by construction&quot; â™</span><span class="w"></span>
<span class="w">		</span>
<span class="w">    </span><span class="cm">// discreteSpace : {A} set A âŸ¶ topologicalSpace A â˜ = [A,S] [&#39;</span>
<span class="cm">	universe := A, </span>
<span class="cm">	topology := â„˜ S </span>
<span class="cm">	axiom_empty := lemma_empty A,</span>
<span class="cm">	axiom_full := lemma_full A,</span>
<span class="cm">        axiom_union := lemma_union A,</span>
<span class="cm">        axiom_intersection := lemma_intersection A</span>
<span class="cm">  	&#39;] â™</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosureInterior</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) âŸ¶ set (G.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] â‹ƒ âŸª topologyOf G | ([T] closed T âˆ§ S âŠ‘ T) âŸ« ([T] T) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">closure</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">interior</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) âŸ¶ set (G.universe)</span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] â‹‚ âŸª topologyOf G | ([T] open T âˆ§ T âŠ‘ S) âŸ« ([T] T) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">interior</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">boundary</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) âŸ¶ set (G.universe) </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] closure S \ interior S </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">boundary</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w">                                                             </span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Neighborhood</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">neighborhood</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} (G.universe) âŸ¶ set (G.universe) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a,S] S âˆˆ topologyOf G âˆ§ a âˆˆ S </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">neighborhood</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LimitPoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Neighborhood </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">limitPoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} (G.universe) âŸ¶ set (G.universe) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][a,S] S âŠ‘ doms G âˆ§ a âˆˆ S âˆ§ âˆ€[N : set (dom G)] neighborhood N a â‡’ âˆƒ[b] b âˆˆ N âˆ§ Â¬ a â‰ b </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Continuity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Neighborhood </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">â˜ts:?Functions </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// continuous_def : the preimage of an open set is open â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">continuous</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : topologicalSpace, Y : topologicalSpace} ((dom X) âŸ¶ (dom Y)) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,f] âˆ€[O] O âˆˆ topologyOf X â‡’ (im f O) âˆˆ topologyOf Y </span>
<span class=" -MMT_ObjectExpression">     </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">continuous</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">continuousAt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : topologicalSpace, Y : topologicalSpace} ((dom X) âŸ¶ (dom Y)) âŸ¶ (dom X) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,f,x] âˆ€[V] neighborhood V (f x) â‡’ neighborhood (preim f V) x</span>
<span class=" -MMT_ObjectExpression">     </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">continuousAt</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Compactness</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="cm">// compact_def: every open cover C of dom G has a finite subcover D of dom G â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">compact</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] âˆ€[C] C covers (fullset (G.universe)) â‡’ âˆƒ[D] D subcover C on (fullset (G.universe)) </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">compact</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TopologyBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class="vc">base</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X: topologicalSpace}collection (X.universe) âŸ¶prop </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,B] âˆ€[O] O âˆˆ topologyOf G â‡’ âˆƒ[C] C âŠ‘ B âˆ§ O â‰ UNION C </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">basefor</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">HausdorffTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetRelations </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class="vc">hausdorffProperty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}(collection G) âŸ¶ prop </span><span class=" -MMT_OD">â˜</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,T] âˆ€[p] âˆ€ [q] p âˆˆ (fullset G) âˆ§ q âˆˆ (fullset G) âˆ§ p â‰  q â‡’ </span>
<span class=" -MMT_ObjectExpression">       âˆƒ[P]âˆƒ[Q]P âˆˆ T âˆ§ Q âˆˆ T âˆ§ p âˆˆ P âˆ§ q âˆˆ Q âˆ§ disjoint P Q </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">       </span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">hausdorff_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type â˜ </span><span class="p">=</span><span class="w"></span>
<span class="w">   	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology/topology_theory (X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   	 </span><span class="vc">ishausdorff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">âŠ¦ hausdorffProperty X coll </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">   </span><span class="vc">hausdorffTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod â˜?HausdorffTopology/hausdorff_theory (X) </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">hausdorffSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">â˜</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{&#39;</span>
<span class=" -MMT_ObjectExpression">		universe : type ,</span>
<span class=" -MMT_ObjectExpression">		topology : hausdorffTopology universe</span>
<span class=" -MMT_ObjectExpression">	&#39;} </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kd">theory</span><span class="w"> </span><span class="nc">EmptyTheory</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">EmptyTheoryWithMeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?EmptyTheory</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">EmptyView</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?EmptyTheory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?EmptyTheory</span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">thy</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">emptyStructure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EmptyTheory</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">emptyStructureWithEq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EmptyTheory</span><span class="p">=</span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">blub</span><span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://github.com/ComFreek/mmtpygments/meta-annotations</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_MD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri</span><span class=" -MMT_MD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">E </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">v</span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?S</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?T</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_MD">â™</span><span class="w"></span>
<span class="w">	</span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri</span><span class=" -MMT_MD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">d</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://github.com/ComFreek/mmtpygments</span><span class="w"> </span><span class=" -MMT_MD">âš</span><span class="w"></span>
<span class="kd">meta</span><span class="w"> </span><span class="l l-URI">?purpose</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;screenshot for readme&quot; </span><span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lists</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type âŸ¶ type </span><span class=" -MMT_DD">â™</span><span class="w"></span>

<span class="w">	</span><span class="vc">nil</span><span class="p">:</span><span class="w">    </span><span class=" -MMT_ObjectExpression">{A: type} list A                </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[]</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">cons</span><span class="p">:</span><span class="w">   </span><span class=" -MMT_ObjectExpression">{A: type} A âŸ¶ list A âŸ¶ list A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">::</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">append</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type} A âŸ¶ list A âŸ¶ list A </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">80</span><span class="w">  </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">concat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type} list A âŸ¶ list A âŸ¶ list A</span>
<span class=" -MMT_ObjectExpression">		</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">?purpose</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;for concatenation&quot;</span>
<span class=" -MMT_ObjectExpression">		</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// comment: choose a better notation?</span>
<span class="cm">		</span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">:::</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">reverse</span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Lists</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Lists</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">list</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">nil</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nil </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">cons</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, a, l] l ;; a </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">?coolness</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;beyond imagination&quot; </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">append</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, a, l] a :: l </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class="w">	</span><span class="vc">concat</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">??? </span><span class=" -MMT_OD">â˜</span><span class="w"> </span><span class="cm">// missing </span><span class=" -MMT_DD">â™</span><span class="w"></span>
<span class=" -MMT_MD">âš</span><span class="w"></span>
</pre></div>
</body></html>